(this.webpackJsonpmicrobots=this.webpackJsonpmicrobots||[]).push([[0],{78:function(t,r,n){"use strict";n.r(r);var e={};n.r(e),n.d(e,"newVec3",(function(){return u})),n.d(e,"clone",(function(){return f})),n.d(e,"add",(function(){return b})),n.d(e,"addEq",(function(){return l})),n.d(e,"sub",(function(){return d})),n.d(e,"subEq",(function(){return v})),n.d(e,"multiplyScalar",(function(){return h})),n.d(e,"dot",(function(){return p})),n.d(e,"length",(function(){return j})),n.d(e,"dist",(function(){return O})),n.d(e,"normalize",(function(){return m})),n.d(e,"dir",(function(){return g}));var a={};n.r(a),n.d(a,"newWorld",(function(){return G})),n.d(a,"clone",(function(){return H})),n.d(a,"displacement",(function(){return K})),n.d(a,"neighbors",(function(){return Q})),n.d(a,"gradient",(function(){return Z})),n.d(a,"connections",(function(){return tt}));var o={};n.r(o),n.d(o,"ContractionType",(function(){return i})),n.d(o,"createAnimation",(function(){return vt}));var i,c=n(12),s=n(11),u=function(t,r,n){return[t,r,n]},f=function(t){return[t[0],t[1],t[2]]},b=function(t,r){return[t[0]+r[0],t[1]+r[1],t[2]+r[2]]},l=function(t,r){t[0]+=r[0],t[1]+=r[1],t[2]+=r[2]},d=function(t,r){return[t[0]-r[0],t[1]-r[1],t[2]-r[2]]},v=function(t,r){t[0]-=r[0],t[1]-=r[1],t[2]-=r[2]},h=function(t,r){return[t[0]*r,t[1]*r,t[2]*r]},p=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},j=function(t){return Math.sqrt(p(t,t))},O=function(t,r){return j(d(t,r))},m=function(t){return h(t,1/j(t))},g=function(t,r){return m(d(t,r))},w=function(t,r){for(var n=0;n<3;++n)for(var e=0;e<3;++e)t[n][e]+=r[n][e]},y=function(t,r){for(var n=0;n<3;++n)for(var e=0;e<3;++e)t[n][e]*=r},x=function(t,r){for(var n=[0,0,0],e=0;e<3;++e)for(var a=0;a<3;++a)n[e]+=t[e][a]*r[a];return n},M=function(t,r){return n=u(t[0]*r[0],t[0]*r[1],t[0]*r[2]),e=u(t[1]*r[0],t[1]*r[1],t[1]*r[2]),a=u(t[2]*r[0],t[2]*r[1],t[2]*r[2]),[n,e,a];var n,e,a},A=function(t){return{pos:f(t.pos),fixed:t.fixed}},E=function(t,r,n,e,a,o){return function(t,r,n,e,a){var o=1e-10,i=r.time-t.time,c=a-t.time,s=a-r.time,u=n.time-r.time,f=n.time-a,l=e.time-a,d=i*c+o,v=c*s+o,p=s*u+o,j=u*f+o,O=f*l+o,m=l*(e.time-n.time)+o,g=1/(j*p),w=g+1/Math.pow(v,2)+1/Math.pow(p,2),y=g+1/Math.pow(j,2)+1/Math.pow(O,2),x=-1/(d*v*(w+y)),M=(w+1/(d*v))/(w+y),A=(y+1/(O*m))/(w+y),E=-1/(O*m*(w+y)),S=h(t.pos,x),k=h(r.pos,M),V=h(n.pos,A),C=h(e.pos,E);return b(b(b(S,k),V),C)}({pos:n,time:t-2*r},{pos:e,time:t-r},{pos:a,time:t+r},{pos:o,time:t+2*r},t)},S=n(2),k=function(t,r){for(var n=0;n<t.length;++n)r[n]=t[n]},V=function(t,r){for(var n=0,e=0;e<t.length;++e)n+=t[e]*r[e];return n},C=function(t,r,n){for(var e=0;e<t.length;++e)t[e]+=r[e]*n},I=function(t,r,n){for(var e=0;e<n.length;++e)n[e]=0;for(var a=0;a<t.length;++a)for(var o=0;o<t[a].length;++o){var i=t[a][o][0],c=t[a][o][1];n[a]+=c*r[i],a!==i&&(n[i]+=c*r[a])}},W=function(t,r){for(var n=0;n<r.length;++n)r[n]*=t[Math.floor(n/3)]},P=function(t,r){var n=Array(r.length);k(r,n);var e=function(t,r){for(var n=Array(r.length/3).fill(0),e=0;e<t.length;++e)for(var a=0;a<t[e].length;++a){var o=Object(s.a)(t[e][a],2),i=o[0],c=o[1];Math.floor(e/3)===Math.floor(i/3)&&(n[Math.floor(e/3)]+=c,e!==i&&(n[Math.floor(i/3)]+=c))}for(var u=0;u<n.length;++u)n[u]=Math.sqrt(Math.sqrt(3/n[u]));return n}(t,n);!function(t,r){for(var n=0;n<r.length;++n)for(var e=0;e<r[n].length;++e){var a=r[n][e][0];r[n][e][1]*=t[Math.floor(n/3)],r[n][e][1]*=t[Math.floor(a/3)]}}(e,t),W(e,n);var a=function(t,r){var n=Array(r.length).fill(0),e=Array(r.length);k(r,e);var a=Array(r.length);I(t,n,a),C(e,a,-1);var o=Array(e.length),i=Array(o.length);k(e,o);for(var c=V(e,e),s=0;s<20;++s){I(t,o,a);var u=c/V(o,a);C(n,o,u),C(e,a,-u);var f=V(e,e);k(o,i),k(e,o),C(o,i,f/c),c=f}return n}(t,n);return W(e,a),a},T=n(30),z=n(3),D=n(9),N=function(t){return((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[1][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*-t[2][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*-t[4][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[3][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*-t[4][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*t[0][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[1][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[3][3])-(((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[2][3]+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[4][3])+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[0][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[4][3])))},F=function(){function t(r,n,e){Object(z.a)(this,t),this.vertices=void 0,this.adjacent=void 0,this.boundary=void 0,this.lastVisited=void 0,this.vertices=r,this.adjacent=n,this.boundary=e,this.lastVisited=-1}return Object(D.a)(t,[{key:"flip",value:function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var r=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=r}}]),t}(),B=function t(r,n,e){Object(z.a)(this,t),this.vertices=void 0,this.cell=void 0,this.index=void 0,this.vertices=r,this.cell=n,this.index=e},q=function(){function t(r,n){var e=this;Object(z.a)(this,t),this.vertices=void 0,this.simplices=void 0,this.interior=void 0,this.tuple=void 0,this.orient=void 0,this.vertices=r,this.simplices=n,this.interior=n.filter((function(t){return!t.boundary})),this.tuple=Object(S.a)(this.vertices),this.orient=function(){return N(e.tuple)}}return Object(D.a)(t,[{key:"handleBoundaryDegeneracy",value:function(t,r){var n=this.vertices.length-1,e=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-n;o.length>0;){var i=o.pop();if(void 0===i)break;for(var c=i.adjacent,s=0;s<=4;++s){var u=c[s];if(u.boundary&&!(u.lastVisited<=-n)){for(var f=u.vertices,b=0;b<=4;++b){var l=f[b];e[b]=l<0?r:a[l]}var d=this.orient();if(d>0)return u;u.lastVisited=-n,0===d&&o.push(u)}}}return null}},{key:"walk",value:function(t){for(var r=this.vertices.length-1,n=this.vertices,e=this.tuple,a=this.interior.length-1,o=this.interior[a];!o.boundary;){for(var i=o.vertices,c=o.adjacent,s=0;s<=4;++s)e[s]=n[i[s]];o.lastVisited=r;for(var u=0;u<=4;++u){var f=c[u];if(!(f.lastVisited>=r)){var b=e[u];e[u]=t;var l=this.orient();if(e[u]=b,l<0){o=f;break}f.boundary?f.lastVisited=-r:f.lastVisited=r}}}return o}},{key:"addPeaks",value:function(t,r){var n=this.vertices.length-1,e=this.vertices,a=this.tuple,o=this.interior,i=this.simplices,c=[r];r.lastVisited=n,r.vertices[r.vertices.indexOf(-1)]=n,r.boundary=!1,o.push(r);for(var s=[];c.length>0;){var u=c.pop();if(void 0===u)break;var f=u.vertices,b=u.adjacent,l=f.indexOf(n);if(!(l<0))for(var d=0;d<=4;++d)if(d!==l){var v=b[d];if(v.boundary&&!(v.lastVisited>=n)){var h=v.vertices;if(v.lastVisited!==-n){for(var p=0,j=0;j<=4;++j)h[j]<0?(p=j,a[j]=t):a[j]=e[h[j]];if(this.orient()>0){h[p]=n,v.boundary=!1,o.push(v),c.push(v),v.lastVisited=n;continue}v.lastVisited=-n}var O=v.adjacent,m=f.slice(),g=b.slice(),w=new F(m,g,!0);i.push(w);var y=O.indexOf(u);if(!(y<0)){O[y]=w,g[l]=v,m[d]=-1,g[d]=u,b[d]=w,w.flip();for(var x=0;x<=4;++x){var M=m[x];if(!(M<0||M===n)){for(var A=new Array(3),E=0,S=0;S<=4;++S){var k=m[S];k<0||S===x||(A[E++]=k)}s.push(new B(A,w,x))}}}}}}s.sort((function(t,r){return function(t,r){var n=t[0]+t[1],e=r[0]+r[1],a=n+t[2]-(e+r[2]);if(a)return a;var o=Math.min(t[0],t[1]),i=Math.min(r[0],r[1]);return(a=Math.min(o,t[2])-Math.min(i,r[2]))||Math.min(o+t[2],n)-Math.min(i+r[2],e)}(t.vertices,r.vertices)}));for(var V=0;V+1<s.length;V+=2){var C=s[V],I=s[V+1],W=C.index,P=I.index;W<0||P<0||(C.cell.adjacent[C.index]=I.cell,I.cell.adjacent[I.index]=C.cell)}}},{key:"insert",value:function(t){var r=this.vertices;r.push(t);var n=this.walk(t);if(n){for(var e=this.tuple,a=0;a<=4;++a){var o=n.vertices[a];e[a]=o<0?t:r[o]}var i=this.orient();if(!(i<0)){if(0===i){var c=this.handleBoundaryDegeneracy(n,t);if(!c)return;n=c}this.addPeaks(t,n)}}}},{key:"boundary",value:function(){for(var t=[],r=this.simplices,n=r.length,e=0;e<n;++e){var a=r[e];if(a.boundary){for(var o=new Array(4),i=a.vertices,c=0,s=0,u=0;u<=4;++u)i[u]>=0?o[c++]=i[u]:s=u&&1;if(1===s){var f=o[0];o[0]=o[1],o[1]=f}t.push(o)}}return t}}]),t}(),R=function t(r,n){Object(z.a)(this,t),this.point=void 0,this.index=void 0,this.point=r,this.index=n},$=function(t){var r=t.length;if(0===r)return[];for(var n=new Array(r),e=1,a=0;a<r;++a){for(var o=t[a],i=new Array(4),c=0,s=0;s<3;++s){var u=o[s];i[s]=u,c+=u*u}i[3]=c,n[a]=new R(i,a),e=Math.max(c,e)}n.sort((function(t,r){for(var n=0;n<5;++n){var e=r.point[n]-t.point[n];if(e)return e}return 0})),r=n.length;for(var f=new Array(r+3+1),b=new Array(r+3+1),l=16*e,d=new Array(4),v=0;v<=3;++v)d[v]=0;d[3]=l,f[0]=d.slice(),b[0]=-1;for(var h=0;h<=3;++h){var p=d.slice();p[h]=1,f[h+1]=p,b[h+1]=-1}for(var j=0;j<r;++j){var O=n[j];f[j+3+1]=O.point,b[j+3+1]=O.index}var m=function(t){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var n=t[0].length;if(r<=n)throw new Error("Must input at least d+1 points");var e=t.slice(0,n+1),a=N(e);if(0===a)throw new Error("Input not in general position");for(var o=new Array(n+1),i=0;i<=n;++i)o[i]=i;a<0&&(o[0]=1,o[1]=0);for(var c=new F(o,new Array(n+1),!1),s=c.adjacent,u=new Array(n+2),f=0;f<=n;++f){for(var b=o.slice(),l=0;l<=n;++l)l===f&&(b[l]=-1);var d=b[0];b[0]=b[1],b[1]=d;var v=new F(b,new Array(n+1),!0);s[f]=v,u[f]=v}u[n+1]=c;for(var h=0;h<=n;++h)for(var p=s[h].vertices,j=s[h].adjacent,O=0;O<=n;++O){var m=p[O];if(m<0)j[O]=c;else for(var g=0;g<=n;++g)s[g].vertices.indexOf(m)<0&&(j[O]=s[g])}for(var w=new q(e,u),y=n+1;y<r;++y)w.insert(t[y]);return w.boundary()}(f);m=m.filter((function(t){for(var r=0;r<=3;++r){var n=b[t[r]];if(n<0)return!1;t[r]=n}return!0}));for(var g=0;g<m.length;++g){var w=m[g],y=w[0];w[0]=w[1],w[1]=y}return m},G=function(){return{bots:[]}},H=function(t){return{bots:t.bots.map((function(t){return A(t)}))}},J=function(t,r,n){return n<t-r/2?1:n>t+r/2?0:2*(n+r-t)*Math.pow(t+r/2-n,2)/Math.pow(r,3)},L=function(t,r,n){var e=j(n),a=h(n,Math.sqrt(J(t,r,e))/e);return M(a,a)},X=function(t,r,n){var e=M(n,n);return y(e,function(t,r,n){return J(t,r,n)+1e-4}(t,r,j(n))/p(n,n)),e},U=function(t,r,n,e){var a=1e-5,o=e[n],i=f(e);i[n]=o+a;var c=f(e);c[n]=o-a;var s=L(t,r,i);return function(t,r){for(var n=0;n<3;++n)for(var e=0;e<3;++e)t[n][e]-=r[n][e]}(s,L(t,r,c)),y(s,1/2e-5),s},Y=function(t,r,n,e,a){for(var o=Object(S.a)(Array(3*e.bots.length)).map((function(){return[]})),i=0;i<e.bots.length;++i)for(var c=X(t,r,u(e.bots[i].pos[1]+.5,0,0)),s=X(t,r,u(0,e.bots[i].pos[1]+.5,0)),f=X(t,r,u(0,0,e.bots[i].pos[1]+.5)),b=0;b<3;++b)for(var l=b;l<3;++l)o[3*i+b].push([3*i+l,(c[b][l]+f[b][l])*n+s[b][l]]);for(var v=function(n){a[n].forEach((function(a){for(var i=function(t,r,n,e){var a=d(e.pos,n.pos);return L(t,r,a)}(t,r,e.bots[n],e.bots[a]),c=0;c<3;++c)for(var s=0;s<3;++s)o[3*n+c].push([3*a+s,-i[c][s]]),c>s||(o[3*n+c][s-c][1]+=i[c][s],o[3*a+c][s-c][1]+=i[c][s])}))},h=0;h<e.bots.length;++h)v(h);return o},K=function(t,r,n,e,a,o,i,c,s,u){var f=function(t,r,n,e,a,o){var i=Object(S.a)(Array(3*o.bots.length)).map((function(){return 0}));return o.bots.forEach((function(c,s){for(var u=0;u<3;++u){var f=(o.bots[s].pos[u]-t.bots[s].pos[u])/n,b=((r.bots[s].pos[u]-o.bots[s].pos[u])/n-f)/n;i[3*s+u]=((1===u?-1:0)-b)*e*a}})),i}(e,a,o,i,c,s),b=Y(t,r,n,s,u);return P(b,f)},Q=function(t,r,n,e){return n[e].filter((function(t){return t>e})).filter((function(n){return O(r.bots[e].pos,r.bots[n].pos)<t}))},Z=function(t,r,n,e,a,o,i,c,s,f,b,O,m,g,M){for(var A=Object(S.a)(Array(m.bots.length)).map((function(){return[0,1,2].map((function(){return 0}))})),k=function(e){for(var a=function(a){var i=U(t,r,a,u(m.bots[e].pos[1]+.5,0,0));y(i,n);var c=U(t,r,a,u(0,m.bots[e].pos[1]+.5,0)),s=U(t,r,a,u(0,0,m.bots[e].pos[1]+.5));y(s,n);var f=u(o[3*e],o[3*e+1],o[3*e+2]);w(i,c),w(i,s);var b=p(f,x(i,f));A[e][a]+=b,g[e].forEach((function(n){var i=function(t,r,n,e,a){return U(t,r,e,d(n.pos,a.pos))}(t,r,m.bots[e],a,m.bots[n]),c=u(o[3*n],o[3*n+1],o[3*n+2]);v(c,f);var s=x(i,c),b=p(c,s);A[e][a]+=b,A[n][a]-=b}))},i=0;i<3;++i)a(i)},V=0;V<m.bots.length;++V)k(V);for(var C=Object(S.a)(Array(m.bots.length)).map((function(){return u(0,0,0)})),I=0;I<m.bots.length;++I)for(var W=0;W<3;++W)C[I][W]=-A[I][W]+(-a[3*I+W]+2*o[3*I+W]-i[3*I+W])/Math.pow(O,2)*2;for(var P=0;P<m.bots.length;++P)if(!(m.bots[P].pos[1]>.5)){var T=m.bots[P].pos[1]+.5;C[P][1]+=2*e*(2*(T-2))}for(var z=function(t){g[t].forEach((function(r){var n=d(m.bots[r].pos,m.bots[t].pos),a=j(n);a>1||(n=h(n,e*(2*(a-2)/a)),v(C[t],n),l(C[r],n))}))},D=0;D<m.bots.length;++D)z(D);for(var N=0;N<m.bots.length;++N){var F=E(M,O,c.bots[N].pos,s.bots[N].pos,f.bots[N].pos,b.bots[N].pos),B=d(F,m.bots[N].pos);l(C[N],h(B,-.1))}return C},_=new T.a(123),tt=function(t){return function(t){var r=$(t),n=t.map((function(){return{}}));return r.forEach((function(t){for(var r=0;r<4;++r)for(var e=r+1;e<4;++e)n[t[r]][t[e]]=!0,n[t[e]][t[r]]=!0})),n.map((function(t){return Object.keys(t).map((function(t){return Number(t)}))}))}([].concat(Object(S.a)(t),Object(S.a)(t.map((function(t){return[t[0],-.5,t[2]]})))).map((function(t){return b(t,h(u(_.next()-.5,_.next()-.5,_.next()-.5),.1))}))).map((function(r){return r.map((function(r){return r>=t.length?-1:r}))})).slice(0,t.length)},rt=function(){function t(r){Object(z.a)(this,t),this.comparator=void 0,this.elements=void 0,this.comparator=r,this.elements=[]}return Object(D.a)(t,[{key:"peek",value:function(){return this.elements[0]}},{key:"pop",value:function(){var t=this.peek();if(void 0!==t){var r=this.elements.pop();if(void 0!==r){var n=this.size();if(0===n)return t;this.elements[0]=r;for(var e=0;e<n;){var a=e,o=2*e+1,i=2*e+2;if(o<n&&this.compare(o,a)>=0&&(a=o),i<n&&this.compare(i,a)>=0&&(a=i),a===e)break;this.swap(a,e),e=a}return t}}}},{key:"push",value:function(t){for(var r=this.elements.push(t)-1;r>0;){var n=Math.floor((r-1)/2);if(this.compare(r,n)<=0)break;this.swap(n,r),r=n}}},{key:"size",value:function(){return this.elements.length}},{key:"compare",value:function(t,r){return this.comparator(this.elements[t],this.elements[r])}},{key:"swap",value:function(t,r){var n=this.elements[t];this.elements[t]=this.elements[r],this.elements[r]=n}}]),t}(),nt=function(t){for(var r=t.dist/2,n=t;void 0!==n.prev&&n.prev.dist>r;n=n.prev);if(void 0===n.prev)return n.pos;var e=n.prev,a=r-e.dist,o=a/(a+(n.dist-r));return b(h(e.pos,1-o),h(n.pos,o))},et=function(t){return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]},at=function(t,r,n){return h(function(t,r,n){var e=h(b(r,n),.5);if(j(d(n,r))<1)return e;var a=et(r),o=et(n),i={},c=new rt((function(t,r){return r.distEstimate-t.distEstimate}));c.push({dist:0,distEstimate:0,pos:a,prev:void 0});for(var u,f,l=0;l<1e4;){var v=c.pop();if(void 0===v)break;var p=Object(s.a)(v.pos,3),O=p[0],m=p[1],g=p[2];if(!(m<1.5)&&!0!==((t[O]||{})[m]||{})[g]&&void 0===((i[O]||{})[m]||{})[g]){if(void 0===i[O]&&(i[O]={}),void 0===i[O][m]&&(i[O][m]={}),i[O][m][g]=v,f=o,(u=v.pos)[0]===f[0]&&u[1]===f[1]&&u[2]===f[2])return nt(v);++l;for(var w=-1;w<=1;++w)for(var y=-1;y<=1;++y)for(var x=-1;x<=1;++x)if(0!==w||0!==y||0!==x){var M=[w,y,x],A=b(v.pos,M),E=v.dist+j(M);c.push({dist:E,distEstimate:E+j(d(o,A)),pos:A,prev:v})}}}return e}(t,h(r,3),h(n,3)),1/3)},ot=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]},it=function(t){return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]},ct=function(t,r,n){for(var e=it(r),a=Object(s.a)(e,3),o=a[0],i=a[1],c=a[2],u=-1;u<=1;++u)for(var f=-1;f<=1;++f)for(var b=-1;b<=1;++b){var l=o+u,d=i+f,v=c+b;void 0===t[l]&&(t[l]={}),void 0===t[l][d]&&(t[l][d]={}),void 0===t[l][d][v]&&(t[l][d][v]=[]),t[l][d][v][n]=!0}},st=function(t,r,n){for(var e=it(r),a=Object(s.a)(e,3),o=a[0],i=a[1],c=a[2],u=-1;u<=1;++u)for(var f=-1;f<=1;++f)for(var b=-1;b<=1;++b){var l=i+f,d=c+b;delete t[o+u][l][d][n]}},ut=function(t,r,n){var e=G();return e.bots=r.bots.map((function(r,e){return function(r,n){var e=A(r);return e.pos=at(t,r.pos,n.pos),e}(r,n.bots[e])})),e},ft=function(t,r,n,e,a,o,i,c,s,f){for(var l=.2/o.length,d=o.map((function(t){return t.bots.map((function(){return u(0,0,0)}))})),v=o.map((function(t){return tt(t.bots.map((function(t){return t.pos})))})),p=o.map((function(t,r){return t.bots.map((function(n,e){return Q(a,t,v[r],e)}))})),O=function(a){var f=function(t,r,n,e,a,o,i,c,s){for(var f=Object(S.a)(Array(a.length)).map((function(){return Object(S.a)(Array(a[0].bots.length)).map((function(){return u(0,0,0)}))})),b=a.map((function(){return Object(S.a)(Array(3*a[0].bots.length)).map((function(){return 0}))})),l=0;l<a.length;++l){var d=a[Math.max(l-1,0)],v=a[Math.min(l+1,a.length-1)];b[l]=K(t,r,n,d,v,o,i,c,a[l],s[l])}for(var h=1;h<a.length;++h){var p=a[Math.max(h-2,0)],j=a[h-1],O=a[Math.min(h+1,a.length-1)],m=a[Math.min(h+2,a.length-1)];f[h]=Z(t,r,n,e,b[h-1],b[h],b[Math.min(h+1,a.length-1)],p,j,O,m,o,a[h],s[h],h/(a.length-1))}return f}(t,r,n,e,o,i,c,s,p);f=f.map((function(t){return t.map((function(t){return h(t,-l/(1e-4+j(t)))}))})),o.forEach((function(t,r){r<=1||r>=o.length-2||t.bots.forEach((function(t,n){d[r][n]=b(d[r][n],f[r][n]),d[r][n]=h(d[r][n],.9),t.pos=b(t.pos,d[r][n])}))}))},m=0;m<f;++m)O()},bt=function(t,r){return j(d(r.pos,t.pos))};!function(t){t[t.Mst=0]="Mst",t[t.Fibers=1]="Fibers",t[t.Delaunay=2]="Delaunay"}(i||(i={}));for(var lt=function(t,r,n){for(var e=function(r){var e=tt(t.bots.map((function(t){return t.pos}))),a=[];e.forEach((function(r,o){r.forEach((function(r){-1!==r&&o>=r||function(t,r,n,e,a){if(a===i.Delaunay)return!0;if(a===i.Mst){if(-1===e){for(var o=t.bots[n].pos[1]+.5,c=Object(S.a)(Array(t.bots.length)).map((function(){return!1})),s=[],u=0;u<t.bots.length;++u)t.bots[u].pos[1]+.5<o&&s.push(u);for(;s.length>0;){var f=s.shift();if(void 0===f)break;if(!c[f]){c[f]=!0;for(var b=0;b<r[f].length;++b){var l=r[f][b];-1!==l&&O(t.bots[f].pos,t.bots[l].pos)<o&&s.push(l)}}}return!c[n]}for(var d=O(t.bots[n].pos,t.bots[e].pos),v=Object(S.a)(Array(t.bots.length)).map((function(){return!1})),h=[],p=0;p<t.bots.length;++p)t.bots[p].pos[1]+.5<d&&h.push(p);for(;h.length>0;){var j=h.shift();if(void 0===j)break;if(!v[j]){v[j]=!0;for(var m=0;m<r[j].length;++m){var g=r[j][m];-1!==g&&O(t.bots[j].pos,t.bots[g].pos)<d&&h.push(g)}}}return!(v[n]&&v[e])}if(-1===e){var w=t.bots[n];return!t.bots.some((function(t,r){return n!==r&&O(t.pos,[w.pos[0],-.5,t.pos[2]])<w.pos[1]+.5&&O(w.pos,t.pos)<w.pos[1]+.5}))}for(var y=0;y<t.bots.length;++y)if(y!==n&&y!==e){if(bt(t.bots[n],t.bots[e])>t.bots[n].pos[1]+.5&&bt(t.bots[n],t.bots[e])>t.bots[e].pos[1]+.5)return!1;if(bt(t.bots[n],t.bots[e])>bt(t.bots[n],t.bots[y])&&bt(t.bots[n],t.bots[e])>bt(t.bots[y],t.bots[e]))return!1;if(bt(t.bots[n],t.bots[e])>bt(t.bots[e],t.bots[y])&&bt(t.bots[n],t.bots[e])>bt(t.bots[n],t.bots[y]))return!1}return!0}(t,e,o,r,n)&&a.push([o,r])}))})),a.forEach((function(r){var n=Object(s.a)(r,2),e=n[0],a=n[1];if(-1!==a){var o=d(t.bots[a].pos,t.bots[e].pos),i=j(o);if(!(i<1)){var c=h(o,(1-i)/i/2*.2);v(t.bots[e].pos,c),l(t.bots[a].pos,c)}}else t.bots[e].pos[1]+=.2*(.5-t.bots[e].pos[1])}))},a=0;a<r;++a)e()},dt=function(t,r){for(var n=function(n){t[n].bots.forEach((function(e,a){var o=E((n-1)/(t.length-3),r,t[n-2].bots[a].pos,t[n-1].bots[a].pos,t[n+1].bots[a].pos,t[n+2].bots[a].pos);e.pos=b(h(e.pos,.5),h(o,.5))}))},e=2;e<t.length-2;++e)n(e)},vt=function(t,r,n,e,a){for(var o=[t,r,n,e],i=function(t){var r=Object(S.a)(Array(7)).map((function(t,r){return 3*(r/3-1)*.5})),n={};return t.forEach((function(t){r.forEach((function(e){r.forEach((function(a){r.forEach((function(r){var o=et(b(h(t.pos,3),[e,a,r])),i=Object(s.a)(o,3),c=i[0],u=i[1],f=i[2];void 0===n[c]&&(n[c]={}),void 0===n[c][u]&&(n[c][u]={}),n[c][u][f]=!0}))}))}))})),n}(r.bots.filter((function(t){return t.fixed}))),c=function(t){var r=o.map((function(t,r){return!(r<=1||r>=o.length-1)&&function(t,r,n,e){for(var a=0,o=0;o<r.bots.length;++o){var i=h(d(r.bots[o].pos,t.bots[o].pos),1/e),c=h(d(n.bots[o].pos,r.bots[o].pos),1/e),s=h(d(c,i),1/e);a=Math.max(a,j(s))}return a}(o[r-1],t,o[r+1],a.dt)>.2}));if(!r.some((function(t){return t})))return"break";var n=Object(S.a)(o);o=[o[0]],r.forEach((function(t,r){0!==r&&(t&&o.push(ut(i,o[o.length-1],n[r])),o.push(n[r]))})),console.log(t,o.length);for(var e=o.map((function(t){return function(t){for(var r=t.map((function(t){return f(t.pos)})),n={},e=0;e<t.length;++e)ct(n,t[e].pos,e);return function(){for(var e=0;e<t.length;++e)ot(r[e],t[e].pos)||(st(n,r[e],e),ct(n,t[e].pos,e));for(var a=0;a<t.length;++a)for(var o=it(r[a]),i=Object(s.a)(o,3),c=i[0],u=i[1],f=i[2],b=Object.keys(n[c][u][f]).map((function(t){return Number(t)})),p=0;p<b.length;++p){var O=b[p],m=t[O];if(t[a]!==m){var g=d(m.pos,t[a].pos),w=j(g);if(!(w>1)){var y=h(g,(1-w)/w/2);v(t[a].pos,y),l(m.pos,y)}}}}}(t.bots)})),c=0;c<a.contractIterations;++c){for(var u=2;u<o.length-2;++u)lt(o[u],1,a.contractionType);o.map((function(t,r){return e[r]()}))}if(ft(a.offset,a.slack,a.friction,a.overlapPenalty,a.neighborRadius,o,a.dt,a.gravity,a.botMass,a.optimizeIterations),t>3)for(var b=0;b<a.minimizeAccelerationIterations;++b)dt(o,a.dt),o.map((function(t,r){return e[r]()}));o.forEach((function(t){return t.bots.forEach((function(t,r){t.fixed&&(t.pos=f(o[0].bots[r].pos))}))}))},u=0;u<a.subdivideIterations;++u){if("break"===c(u))break}return console.log("done"),o.slice(1,o.length-1)},ht=n(115),pt=n(116),jt=n(123),Ot=n(122),mt=n(110),gt=n(79),wt=n(120),yt=n(119),xt=n(121),Mt=n(114),At=n(0),Et=n.n(At),St=n(33),kt=n.n(St),Vt=n(6),Ct=new T.a(123),It=function(t){var r=Object(At.useState)(!0),n=Object(s.a)(r,2),a=n[0],i=n[1],c=Object(At.useState)([]),u=Object(s.a)(c,2),f=u[0],b=u[1],l=function(){if(void 0!==t.world&&void 0!==t.worldPrev&&void 0!==t.worldEnd)if(0===f.length||t.world.bots.map((function(t,r){return e.sub(t.pos,f[0].bots[r].pos)})).map((function(t){return e.dot(t,t)})).reduce((function(t,r){return t+r}),0)>1e-5)b(o.createAnimation(t.worldPrev,t.world,t.worldEnd,t.worldEnd,t.config));else{var r=f;r.length>1&&(r=r.slice(1)),t.setWorldPrev(t.world),t.setWorld(r[0]),b(r)}};return Object(At.useEffect)((function(){if(!a){var t=setInterval(l,1e3/30);return function(){return clearInterval(t)}}}),[t,a,f]),Object(At.useEffect)((function(){i(!0),void 0!==t.worldStart&&(t.setWorld(t.worldStart),b([]))}),[t.worldStart]),Object(Vt.jsxs)(mt.a,{children:[Object(Vt.jsx)(gt.a,{children:Object(Vt.jsxs)(Mt.a,{variant:"contained",onClick:function(){i(!a)},children:["paused: ",a?"yes":"no"]})}),Object(Vt.jsx)(gt.a,{children:Object(Vt.jsx)(Mt.a,{variant:"contained",onClick:function(){void 0!==t.world&&t.setWorld(kt()(t.world,{bots:{$set:t.world.bots.map((function(t){return kt()(t,{pos:{$set:e.add(t.pos,e.multiplyScalar(e.newVec3(Ct.next()-.5,Ct.next()-.5,Ct.next()-.5),2))}})}))}}))},children:"Disturb"})})]})},Wt=n(7),Pt=n.p+"static/media/grass.75422b3f.jpg",Tt=n.p+"static/media/nx.484e0aff.png",zt=n.p+"static/media/ny.6a6662a7.png",Dt=n.p+"static/media/nz.ed736547.png",Nt=n.p+"static/media/px.c6e24cee.png",Ft=n.p+"static/media/py.a67deb40.png",Bt=n.p+"static/media/pz.39034444.png",qt=function(){var t=new Wt.q,r=new Wt.n(2e3,2e3,8,8),n=(new Wt.u).load(Pt);n.wrapS=Wt.p,n.wrapT=Wt.p,n.repeat.set(100,100);var e=new Wt.k({map:n}),a=new Wt.i(r,e);a.rotateX(-Math.PI/2),a.castShadow=!1,a.receiveShadow=!0,t.add(a),t.add(new Wt.a(16777215,.4));var o=new Wt.f(16777215,.4);o.position.set(10,50,10),o.castShadow=!0,o.shadowCameraRight=50,o.shadowCameraLeft=-50,o.shadowCameraTop=50,o.shadowCameraBottom=-50,o.shadowMapWidth=1024,o.shadowMapHeight=1024,t.add(o);var i=[Nt,Tt,Ft,zt,Bt,Dt].map((function(t){return(new Wt.u).load(t)})).map((function(t){return new Wt.j({map:t,fog:!1,side:Wt.b})})),c=new Wt.c(1e3,1e3,1e3),s=new Wt.i(c,i);return t.add(s),t},Rt=n(57),$t=n(58),Gt=function(t){var r=Object($t.a)(),n=Object(s.a)(r,2),e=n[0],a=n[1],o=.55*e,i=.9*a,c=Object(At.useRef)(null),u=Object(At.useState)(),f=Object(s.a)(u,2),b=f[0],l=f[1],d=Object(At.useState)(),v=Object(s.a)(d,2),h=v[0],p=v[1],j=Object(At.useState)(),O=Object(s.a)(j,2),m=O[0],g=O[1];return Object(At.useEffect)((function(){var t=c.current;if(t){var r=new Wt.m(75,o/i,.1,1e3);r.position.set(10,10,10),r.lookAt(0,0,0),p(r);var n=new Wt.x({antialias:!0});n.setClearColor("#87ceeb"),n.setSize(o,i),n.shadowMapEnabled=!0,n.shadowMapType=Wt.l,t.appendChild(n.domElement),g(n);var e=new Rt.a(r,n.domElement);return e.enableDamping=!0,e.dampingFactor=.5,l(e),function(){t.removeChild(n.domElement)}}}),[c,o,i]),Object(At.useEffect)((function(){if(b&&m&&h&&t.scene){var r=window.setInterval((function(){b.update(),m.render(t.scene,h)}),1e3/30);return function(){window.clearInterval(r)}}}),[b,m,h,t.scene]),Object(Vt.jsx)("div",{ref:c})},Ht=function(t){var r=Object(At.useState)(qt()),n=Object(s.a)(r,2),e=n[0],a=n[1],o=Object(At.useState)([]),i=Object(s.a)(o,2),c=i[0],u=i[1];return Object(At.useEffect)((function(){var r=t.world;void 0!==r&&c.length===r.bots.length&&r.bots.forEach((function(t,r){var n;(n=c[r].position).set.apply(n,Object(S.a)(t.pos))}))}),[t.world,c]),Object(At.useEffect)((function(){var r=t.worldStart;void 0!==r&&u(r.bots.map((function(t){return function(t,r){var n,e=new Wt.r(1,16,16);e.computeVertexNormals(),e.faces.forEach((function(t){return t.vertexColors=new Array(3).fill(!0).map((function(){return r}))}));var a=(new Wt.d).fromGeometry(e);delete a.attributes.uv;var o=new Wt.i(a,new Wt.k({color:r}));return o.geometry=a,(n=o.position).set.apply(n,Object(S.a)(t)),o.scale.set(.5,.5,.5),o.castShadow=!0,o.receiveShadow=!0,o}(t.pos,new Wt.e(t.fixed?"#808080":"#fa8072"))})))}),[t.worldStart]),Object(At.useEffect)((function(){var t=qt();c.forEach((function(r){return t.add(r)})),a(t)}),[c]),Object(Vt.jsx)(Gt,{scene:e})},Jt=function(t,r){return t.map((function(t){return{pos:t,fixed:r}}))},Lt=function(t){return{bots:t}},Xt=function(t,r,n,e){var a=Jt(r,!0),o=Jt(n,!1),i=Jt(e,!1);return{title:t,start:Lt([].concat(Object(S.a)(a),Object(S.a)(o))),end:Lt([].concat(Object(S.a)(a),Object(S.a)(i)))}},Ut=[e.newVec3(0,0,0)],Yt=0;Yt<10;++Yt){var Kt=Math.PI/2*(Yt/10);Ut.push(e.newVec3(Ut[Yt][0]+Math.cos(Kt),Ut[Yt][1]-Math.sin(Kt),0))}for(var Qt=1;Qt<11;++Qt)Ut.push(e.newVec3(-Ut[Qt][0],Ut[Qt][1],0));var Zt=Math.min.apply(Math,Object(S.a)(Ut.map((function(t){return t[1]}))));Ut.forEach((function(t,r){return Ut[r][1]=Ut[r][1]-Zt+.5}));for(var _t=Xt("Arc",[],[].concat(Object(S.a)(Object(S.a)(Array(11)).map((function(t,r){return e.newVec3(r,.5,0)}))),Object(S.a)(Object(S.a)(Array(10)).map((function(t,r){return e.newVec3(-r-1,.5,0)})))),Ut),tr=[e.newVec3(0,0,0)],rr=0;rr<20;++rr){var nr=Math.PI/2*(rr/20);tr.push(e.newVec3(tr[rr][0]+Math.cos(nr),tr[rr][1]-Math.sin(nr),0))}for(var er=1;er<21;++er)tr.push(e.newVec3(-tr[er][0],tr[er][1],0));var ar=Math.min.apply(Math,Object(S.a)(tr.map((function(t){return t[1]}))));tr.forEach((function(t,r){return tr[r][1]=tr[r][1]-ar+.5}));var or,ir,cr,sr=Xt("Big arc",[],[].concat(Object(S.a)(Object(S.a)(Array(21)).map((function(t,r){return e.newVec3(r+15,.5,0)}))),Object(S.a)(Object(S.a)(Array(20)).map((function(t,r){return e.newVec3(-r-1-15,.5,0)})))),tr),ur=Xt("Big cube",[],Object(S.a)(Array(8)).map((function(t,r){return Object(S.a)(Array(8)).map((function(t,n){return e.newVec3(r-3.5,.5,n-3.5)}))})).flat(),Object(S.a)(Array(4)).map((function(t,r){return Object(S.a)(Array(4)).map((function(t,n){return Object(S.a)(Array(4)).map((function(t,a){return e.newVec3(r-1.5,a+.5,n-1.5)}))}))})).flat().flat()),fr=function(t,r){return Object(S.a)(Array(r)).map((function(r,n){return e.add(t,[0,n,0])}))},br=function(t,r){return Object(S.a)(Array(r)).map((function(r,n){return e.add(t,[0,0,n])}))},lr=function(t,r,n){return[].concat(Object(S.a)(fr(e.add(t,[-r,0,0]),n)),Object(S.a)(fr(e.add(t,[r,0,0]),n)),Object(S.a)(function(t,r){return Object(S.a)(Array(r)).map((function(r,n){return e.add(t,[n,0,0])}))}(e.add(t,[1-r,n-1,0]),2*r-1)))},dr=Xt("Brachiation",[].concat(Object(S.a)(lr([-10,.5,0],1,7)),Object(S.a)(lr([10,.5,0],1,7)),Object(S.a)(lr([0,7.5,0],11,5)),Object(S.a)((or=[0,.5,0],ir=2,cr=12,[].concat(Object(S.a)(fr(e.add(or,[0,0,-ir]),cr)),Object(S.a)(fr(e.add(or,[0,0,ir]),cr)),Object(S.a)(br(e.add(or,[0,cr-1,1-ir]),ir-1)),Object(S.a)(br(e.add(or,[0,cr-1,1]),ir-1)))))),fr([-10,7.5,0],3),fr([10,7.5,0],3)),vr=Xt("Crane",[],[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,.5,0]],[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,2.5,0]]),hr=Xt("Cube",[],[[-1.5,.5,-1.5],[-.5,.5,-1.5],[.5,.5,-1.5],[1.5,.5,-1.5],[-1.5,.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[1.5,.5,-.5],[-1.5,.5,.5],[-.5,.5,.5],[.5,.5,.5],[1.5,.5,.5],[-1.5,.5,1.5],[-.5,.5,1.5],[.5,.5,1.5],[1.5,.5,1.5]],[[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5],[-.5,1.5,-.5],[.5,1.5,-.5],[.5,1.5,.5],[-.5,1.5,.5],[-.5,2.5,-.5],[.5,2.5,-.5],[.5,2.5,.5],[-.5,2.5,.5],[-.5,3.5,-.5],[.5,3.5,-.5],[.5,3.5,.5],[-.5,3.5,.5]]),pr=function(){return Object(S.a)(Array(13)).map((function(t,r){return Object(S.a)(Array(13)).map((function(t,n){return[r-6,.5,n-6]}))})).flat().filter((function(t){return Math.abs(t[0]+t[2])<2}))},jr=Xt("Floor transport",[],[].concat(Object(S.a)(pr()),Object(S.a)(Object(S.a)(Array(3)).map((function(t,r){return[-6,r+1.5,6]}))),Object(S.a)(Object(S.a)(Array(3)).map((function(t,r){return[6,r+1.5,-6]}))),[[-6,4.5,6]]),[].concat(Object(S.a)(pr()),Object(S.a)(Object(S.a)(Array(3)).map((function(t,r){return[-6,r+1.5,6]}))),Object(S.a)(Object(S.a)(Array(3)).map((function(t,r){return[6,r+1.5,-6]}))),[[6,4.5,-6]])),Or=function(t){return Object(S.a)(Array(3)).map((function(t,r){return Object(S.a)(Array(3)).map((function(t,n){return Object(S.a)(Array(3)).map((function(t,e){return[r-1,n-1,e-1]}))}))})).flat().flat().filter((function(t){return(1===Math.abs(t[0])?1:0)+(1===Math.abs(t[1])?1:0)+(1===Math.abs(t[2])?1:0)>=2})).map((function(t){return e.newVec3(t[0],t[1]+.5+1,t[2])})).map((function(r){return e.add(r,t)}))},mr=Xt("Frame transport",[],[].concat(Object(S.a)(Or([0,0,5])),Object(S.a)(Or([0,3,5])),Object(S.a)(Or([-5,0,5])),Object(S.a)(Or([5,0,-5])),Object(S.a)(Or([-5,3,5]))),[].concat(Object(S.a)(Or([0,0,5])),Object(S.a)(Or([0,3,5])),Object(S.a)(Or([-5,0,-5])),Object(S.a)(Or([5,0,5])),Object(S.a)(Or([5,3,5])))),gr=function(t,r){return Object(S.a)(Array(r)).map((function(r,n){return e.add(t,[0,n+.5,0])}))},wr=Xt("Platform",Object(S.a)(function(t){return[].concat(Object(S.a)(function(t,r){return[].concat(Object(S.a)(gr(e.add(t,[1,0,1]),r)),Object(S.a)(gr(e.add(t,[1,0,-1]),r)),Object(S.a)(gr(e.add(t,[-1,0,-1]),r)),Object(S.a)(gr(e.add(t,[-1,0,1]),r)))}(t,4)),Object(S.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(r){return e.add(r,t)}))}(e.add(t,[0,4,0]))))}([0,0,0])),gr([0,0,0],4),gr([0,5,0],4)),yr=function(t,r){return Object(S.a)(Array(r)).map((function(r,n){return e.add(t,[0,n,0])}))},xr=function(t){return[[1,.5,1],[1,.5,-1],[-1,.5,1],[-1,.5,-1]].map((function(r){return e.add(r,t)}))},Mr=function(t){return[].concat(Object(S.a)(xr(t)),Object(S.a)(xr(e.add(t,[0,1,0]))),Object(S.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(r){return e.add(r,t)}))}(e.add(t,[0,2,0]))))},Ar=function(t){return[[0,0,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1],[0,1,0],[0,2,0],[0,3,0]].map((function(r){return e.add(r,t)}))},Er=[_t,sr,ur,dr,vr,hr,jr,mr,wr,Xt("Platforms",[].concat(Object(S.a)(Mr([-5,0,0])),Object(S.a)(Mr([5,0,0]))),yr([-5,3.5,0],5),yr([5,3.5,0],5)),Xt("Stack",[],Object(S.a)(Object(S.a)(Array(5)).map((function(t,r){return[r,.5,0]}))),Object(S.a)(Object(S.a)(Array(5)).map((function(t,r){return[0,.5+r,0]})))),Xt("Towers",[],[[2,.5,0],[2,1.5,0],[2,2.5,0],[2,3.5,0],[2,4.5,0],[-2,.5,0],[-2,1.5,0],[-2,2.5,0],[-2,3.5,0],[-2,4.5,0],[2,5.5,0]],[[2,.5,0],[2,1.5,0],[2,2.5,0],[2,3.5,0],[2,4.5,0],[-2,.5,0],[-2,1.5,0],[-2,2.5,0],[-2,3.5,0],[-2,4.5,0],[-2,5.5,0]]),Xt("Transformer",[],[[0,.5,1],[0,.5,-1],[0,1.5,1],[0,1.5,0],[0,1.5,-1],[1,1.5,1],[1,1.5,0],[1,1.5,-1],[2,1.5,1],[2,1.5,0],[2,1.5,-1],[3,1.5,1],[3,1.5,0],[3,1.5,-1],[3,.5,1],[3,.5,-1]],[[0,.5,1],[0,.5,-1],[0,1.5,.8],[0,3.5,0],[0,1.5,-.8],[0,2.5,.6],[0,4.5,0],[0,2.5,-.6],[0,5.5,1],[0,5.5,0],[0,5.5,-1],[0,4.7,1.6],[0,6.5,0],[0,4.7,-1.6],[0,3.7,2],[0,3.7,-2]]),Xt("Transport",[],[].concat(Object(S.a)(Ar([6,.5,-6])),Object(S.a)(Ar([3,.5,-3])),Object(S.a)(Ar([0,.5,0])),Object(S.a)(Ar([-3,.5,3])),Object(S.a)(Ar([-6,.5,6])),[[-6,4.5,6]]),[].concat(Object(S.a)(Ar([6,.5,-6])),Object(S.a)(Ar([3,.5,-3])),Object(S.a)(Ar([0,.5,0])),Object(S.a)(Ar([-3,.5,3])),Object(S.a)(Ar([-6,.5,6])),[[6,4.5,-6]])),Xt("Vertical transport",[],[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,.5,0]],[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,12.5,0]]),Xt("Wall",[[0,.5,1],[0,.5,0],[0,.5,-1],[0,1.5,1],[0,1.5,0],[0,1.5,-1],[0,2.5,1],[0,2.5,0],[0,2.5,-1]],[[2,.5,0]],[[-2,.5,0]])].sort((function(t,r){var n=t.start.bots.length-r.start.bots.length;return 0===n?t.title>r.title?1:-1:n})),Sr=function(t){var r=Object(At.useState)(void 0),n=Object(s.a)(r,2),o=n[0],i=n[1],c=function(r,n){return Object(Vt.jsxs)(Mt.a,{variant:"contained",color:o===n?"primary":"default",onClick:function(){var o=new T.a(123),c=function(t){return[a.clone(t.start),a.clone(t.end)]}(r),u=Object(s.a)(c,2),f=u[0],b=u[1];console.log(f,b);var l=function(){return e.multiplyScalar(e.newVec3(o.next()-.5,o.next()-.5,o.next()-.5),.1)};f.bots.map((function(t){return t.pos=e.add(t.pos,l())})),b.bots.map((function(t){return t.pos=e.add(t.pos,l())})),t.onSelect(f,b),i(n)},children:[r.title," (",r.start.bots.length," bots)"]},n)},u=Er.filter((function(t){return!t.start.bots.some((function(t){return t.fixed}))})),f=Er.filter((function(t){return t.start.bots.some((function(t){return t.fixed}))}));return Object(Vt.jsxs)(Vt.Fragment,{children:[Object(Vt.jsx)("b",{children:"Select an example"}),Object(Vt.jsx)("br",{}),Object(Vt.jsx)("br",{}),"No obstacles",Object(Vt.jsx)("br",{}),Object(Vt.jsx)("br",{}),u.map(c),Object(Vt.jsx)("br",{}),Object(Vt.jsx)("br",{}),"Obstacles",Object(Vt.jsx)("br",{}),Object(Vt.jsx)("br",{}),f.map((function(t,r){return c(t,r+u.length)}))]})},kr=function(t){var r=Object(At.useState)(0),n=Object(s.a)(r,2),e=n[0],a=n[1],i=Object(At.useState)(!0),c=Object(s.a)(i,2),u=c[0],f=c[1],b=Object(At.useState)([]),l=Object(s.a)(b,2),d=l[0],v=l[1];return Object(At.useEffect)((function(){if(0!==d.length){var r=Math.round(.1*d.length),n=e%(2*(d.length+r));n<r?t.setWorld(d[0]):(n-=r)<d.length?t.setWorld(d[n]):(n-=d.length)<r?t.setWorld(d[d.length-1]):(n-=r,t.setWorld(d[d.length-1-n]))}}),[d,e]),Object(At.useEffect)((function(){if(!u){var t=setInterval((function(){return a((function(t){return t+1}))}),1e3/30);return function(){return clearInterval(t)}}}),[u]),Object(At.useEffect)((function(){f(!0),void 0!==t.worldStart&&t.setWorld(t.worldStart)}),[t.worldStart]),Object(Vt.jsxs)(mt.a,{children:[Object(Vt.jsx)(gt.a,{children:Object(Vt.jsx)(Mt.a,{variant:"contained",onClick:function(){if(void 0!==t.worldStart&&void 0!==t.worldEnd){var r=Date.now();v(o.createAnimation(t.worldStart,t.worldStart,t.worldEnd,t.worldEnd,t.config)),console.log((Date.now()-r)/1e3),f(!1)}},children:"Generate animation"})}),Object(Vt.jsxs)(gt.a,{children:[Object(Vt.jsxs)(Mt.a,{variant:"contained",onClick:function(){return f(!u)},children:["paused: ",u?"yes":"no"]}),u&&Object(Vt.jsx)(Mt.a,{variant:"contained",onClick:function(){return a(e+1)},children:"Step"})]})]})},Vr=Object(ht.a)((function(t){return{gridItem:{padding:t.spacing(2),textAlign:"center"}}})),Cr=function(){var t=Vr(),r=Object(At.useState)(void 0),n=Object(s.a)(r,2),e=n[0],a=n[1],i=Object(At.useState)(void 0),u=Object(s.a)(i,2),f=u[0],b=u[1],l=Object(At.useState)(void 0),d=Object(s.a)(l,2),v=d[0],h=d[1],p=Object(At.useState)(void 0),j=Object(s.a)(p,2),O=j[0],m=j[1],g=Object(At.useState)(!1),w=Object(s.a)(g,2),y=w[0],x=w[1],M=Object(At.useState)({subdivideIterations:10,optimizeIterations:10,contractionType:o.ContractionType.Fibers,contractIterations:10,minimizeAccelerationIterations:40,offset:1.5,slack:2,friction:.1,neighborRadius:2,overlapPenalty:1e3,gravity:1,botMass:1,dt:1}),A=Object(s.a)(M,2),E=A[0],S=A[1];return Object(Vt.jsx)(Vt.Fragment,{children:Object(Vt.jsxs)(pt.a,{container:!0,item:!0,xs:11,children:[Object(Vt.jsx)(pt.a,{item:!0,xs:4,style:{height:.9*window.innerHeight,overflowX:"hidden",overflowY:"scroll"},children:Object(Vt.jsxs)(pt.a,{container:!0,direction:"column",children:[Object(Vt.jsx)("b",{style:{fontSize:20},children:"Microbots"}),Object(Vt.jsx)(pt.a,{item:!0,className:t.gridItem,children:Object(Vt.jsx)(Sr,{onSelect:function(t,r){a(t),b(r),h(t),m(t)}})}),Object(Vt.jsxs)(pt.a,{item:!0,className:t.gridItem,children:[Object(Vt.jsx)("b",{children:"Animation"}),Object(Vt.jsx)("br",{}),Object(Vt.jsx)(jt.a,{control:Object(Vt.jsx)(Ot.a,{checked:y,onChange:function(t){return x(t.target.checked)}}),label:"Dynamic"}),y?Object(Vt.jsx)(It,{worldStart:e,worldEnd:f,world:v,worldPrev:O,setWorld:h,setWorldPrev:m,config:E}):Object(Vt.jsx)(kr,{worldStart:e,worldEnd:f,setWorld:h,config:E})]}),Object(Vt.jsxs)(pt.a,{item:!0,className:t.gridItem,children:[Object(Vt.jsx)("b",{children:"Extra options"}),Object(Vt.jsx)(mt.a,{children:Object.entries(E).map((function(t){var r=Object(s.a)(t,2),n=r[0],e=r[1];return Object(Vt.jsx)(gt.a,{children:"contractionType"===n?Object(Vt.jsx)(wt.a,{value:e,onChange:function(t){S(kt()(E,Object(c.a)({},n,{$set:t.target.value})))},children:Object.entries(o.ContractionType).filter((function(t){var r=Object(s.a)(t,1)[0];return isNaN(Number(r))})).map((function(t){var r=Object(s.a)(t,2),n=r[0],e=r[1];return Object(Vt.jsx)(yt.a,{value:e,children:n},n)}))}):Object(Vt.jsx)(xt.a,{type:"number",label:n,value:e,onChange:function(t){return S(kt()(E,Object(c.a)({},n,{$set:Math.max(parseFloat(t.target.value),0)})))}})},n)}))}),Object(Vt.jsx)(mt.a,{children:Object(Vt.jsx)(gt.a,{children:Object(Vt.jsx)(Mt.a,{variant:"contained",onClick:function(){return function(){var t=document.getElementsByTagName("canvas")[0].toDataURL("image/png"),r=document.createElement("a");r.href=t.replace(/^data:image\/(?:(?!;)[\s\S])/,"data:application/octet-stream"),r.download="image.png",r.click()}()},children:"Save screenshot"})})})]})]})}),Object(Vt.jsx)(pt.a,{item:!0,xs:5,children:Object(Vt.jsx)(Ht,{worldStart:e,world:v})})]})})},Ir=n(15);n.n(Ir).a.render(Object(Vt.jsx)(Et.a.StrictMode,{children:Object(Vt.jsx)(Cr,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.5c38815a.chunk.js.map