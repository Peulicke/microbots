(this.webpackJsonpmicrobots=this.webpackJsonpmicrobots||[]).push([[0],{78:function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"newVec3",(function(){return f})),r.d(e,"clone",(function(){return b})),r.d(e,"add",(function(){return l})),r.d(e,"addEq",(function(){return d})),r.d(e,"sub",(function(){return v})),r.d(e,"subEq",(function(){return h})),r.d(e,"multiplyScalar",(function(){return p})),r.d(e,"dot",(function(){return j})),r.d(e,"length",(function(){return m})),r.d(e,"dist",(function(){return O})),r.d(e,"normalize",(function(){return g})),r.d(e,"dir",(function(){return x})),r.d(e,"min",(function(){return w})),r.d(e,"max",(function(){return y}));var a={};r.r(a),r.d(a,"merge",(function(){return I}));var o={};r.r(o),r.d(o,"newWorld",(function(){return U})),r.d(o,"clone",(function(){return Y})),r.d(o,"displacement",(function(){return nt})),r.d(o,"neighbors",(function(){return rt})),r.d(o,"gradient",(function(){return et})),r.d(o,"connections",(function(){return at})),r.d(o,"boundingBox",(function(){return ot}));var i={};r.r(i),r.d(i,"ContractionType",(function(){return c})),r.d(i,"createAnimation",(function(){return Ot}));var c,s=r(12),u=r(10),f=function(t,n,r){return[t,n,r]},b=function(t){return[t[0],t[1],t[2]]},l=function(t,n){return[t[0]+n[0],t[1]+n[1],t[2]+n[2]]},d=function(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]},v=function(t,n){return[t[0]-n[0],t[1]-n[1],t[2]-n[2]]},h=function(t,n){t[0]-=n[0],t[1]-=n[1],t[2]-=n[2]},p=function(t,n){return[t[0]*n,t[1]*n,t[2]*n]},j=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},m=function(t){return Math.sqrt(j(t,t))},O=function(t,n){return m(v(t,n))},g=function(t){return p(t,1/m(t))},x=function(t,n){return g(v(t,n))},w=function(t,n){return[Math.min(t[0],n[0]),Math.min(t[1],n[1]),Math.min(t[2],n[2])]},y=function(t,n){return[Math.max(t[0],n[0]),Math.max(t[1],n[1]),Math.max(t[2],n[2])]},M=function(t,n){for(var r=0;r<3;++r)for(var e=0;e<3;++e)t[r][e]+=n[r][e]},A=function(t,n){for(var r=0;r<3;++r)for(var e=0;e<3;++e)t[r][e]*=n},E=function(t,n){for(var r=[0,0,0],e=0;e<3;++e)for(var a=0;a<3;++a)r[e]+=t[e][a]*n[a];return r},S=function(t,n){return r=f(t[0]*n[0],t[0]*n[1],t[0]*n[2]),e=f(t[1]*n[0],t[1]*n[1],t[1]*n[2]),a=f(t[2]*n[0],t[2]*n[1],t[2]*n[2]),[r,e,a];var r,e,a},k=function(t){return{pos:b(t.pos),fixed:t.fixed}},C=function(t,n,r,e,a,o){return function(t,n,r,e,a){var o=1e-10,i=n.time-t.time,c=a-t.time,s=a-n.time,u=r.time-n.time,f=r.time-a,b=e.time-a,d=i*c+o,v=c*s+o,h=s*u+o,j=u*f+o,m=f*b+o,O=b*(e.time-r.time)+o,g=1/(j*h),x=g+1/Math.pow(v,2)+1/Math.pow(h,2),w=g+1/Math.pow(j,2)+1/Math.pow(m,2),y=-1/(d*v*(x+w)),M=(x+1/(d*v))/(x+w),A=(w+1/(m*O))/(x+w),E=-1/(m*O*(x+w)),S=p(t.pos,y),k=p(n.pos,M),C=p(r.pos,A),V=p(e.pos,E);return l(l(l(S,k),C),V)}({pos:r,time:t-2*n},{pos:e,time:t-n},{pos:a,time:t+n},{pos:o,time:t+2*n},t)},V=function(t){var n=[.5,.5,.5];return{min:v(t.pos,n),max:l(t.pos,n)}},I=function(t,n){return{min:w(t.min,n.min),max:y(t.max,n.max)}},P=r(2),z=function(t,n){for(var r=0;r<t.length;++r)n[r]=t[r]},W=function(t,n){for(var r=0,e=0;e<t.length;++e)r+=t[e]*n[e];return r},F=function(t,n,r){for(var e=0;e<t.length;++e)t[e]+=n[e]*r},T=function(t,n,r){for(var e=0;e<r.length;++e)r[e]=0;for(var a=0;a<t.length;++a)for(var o=0;o<t[a].length;++o){var i=t[a][o][0],c=t[a][o][1];r[a]+=c*n[i],a!==i&&(r[i]+=c*n[a])}},B=function(t,n){for(var r=0;r<n.length;++r)n[r]*=t[Math.floor(r/3)]},D=function(t,n){var r=Array(n.length);z(n,r);var e=function(t,n){for(var r=Array(n.length/3).fill(0),e=0;e<t.length;++e)for(var a=0;a<t[e].length;++a){var o=Object(u.a)(t[e][a],2),i=o[0],c=o[1];Math.floor(e/3)===Math.floor(i/3)&&(r[Math.floor(e/3)]+=c,e!==i&&(r[Math.floor(i/3)]+=c))}for(var s=0;s<r.length;++s)r[s]=Math.sqrt(Math.sqrt(3/r[s]));return r}(t,r);!function(t,n){for(var r=0;r<n.length;++r)for(var e=0;e<n[r].length;++e){var a=n[r][e][0];n[r][e][1]*=t[Math.floor(r/3)],n[r][e][1]*=t[Math.floor(a/3)]}}(e,t),B(e,r);var a=function(t,n){var r=Array(n.length).fill(0),e=Array(n.length);z(n,e);var a=Array(n.length);T(t,r,a),F(e,a,-1);var o=Array(e.length),i=Array(o.length);z(e,o);for(var c=W(e,e),s=0;s<20;++s){T(t,o,a);var u=c/W(o,a);F(r,o,u),F(e,a,-u);var f=W(e,e);z(o,i),z(e,o),F(o,i,f/c),c=f}return r}(t,r);return B(e,a),a},N=r(31),q=r(3),$=r(9),R=function(t){return((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[1][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*-t[2][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*-t[4][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[3][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*-t[4][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*t[0][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[1][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[3][3])-(((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[2][3]+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[4][3])+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[0][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[4][3])))},G=function(){function t(n,r,e){Object(q.a)(this,t),this.vertices=void 0,this.adjacent=void 0,this.boundary=void 0,this.lastVisited=void 0,this.vertices=n,this.adjacent=r,this.boundary=e,this.lastVisited=-1}return Object($.a)(t,[{key:"flip",value:function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var n=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=n}}]),t}(),J=function t(n,r,e){Object(q.a)(this,t),this.vertices=void 0,this.cell=void 0,this.index=void 0,this.vertices=n,this.cell=r,this.index=e},L=function(){function t(n,r){var e=this;Object(q.a)(this,t),this.vertices=void 0,this.simplices=void 0,this.interior=void 0,this.tuple=void 0,this.orient=void 0,this.vertices=n,this.simplices=r,this.interior=r.filter((function(t){return!t.boundary})),this.tuple=Object(P.a)(this.vertices),this.orient=function(){return R(e.tuple)}}return Object($.a)(t,[{key:"handleBoundaryDegeneracy",value:function(t,n){var r=this.vertices.length-1,e=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-r;o.length>0;){var i=o.pop();if(void 0===i)break;for(var c=i.adjacent,s=0;s<=4;++s){var u=c[s];if(u.boundary&&!(u.lastVisited<=-r)){for(var f=u.vertices,b=0;b<=4;++b){var l=f[b];e[b]=l<0?n:a[l]}var d=this.orient();if(d>0)return u;u.lastVisited=-r,0===d&&o.push(u)}}}return null}},{key:"walk",value:function(t){for(var n=this.vertices.length-1,r=this.vertices,e=this.tuple,a=this.interior.length-1,o=this.interior[a];!o.boundary;){for(var i=o.vertices,c=o.adjacent,s=0;s<=4;++s)e[s]=r[i[s]];o.lastVisited=n;for(var u=0;u<=4;++u){var f=c[u];if(!(f.lastVisited>=n)){var b=e[u];e[u]=t;var l=this.orient();if(e[u]=b,l<0){o=f;break}f.boundary?f.lastVisited=-n:f.lastVisited=n}}}return o}},{key:"addPeaks",value:function(t,n){var r=this.vertices.length-1,e=this.vertices,a=this.tuple,o=this.interior,i=this.simplices,c=[n];n.lastVisited=r,n.vertices[n.vertices.indexOf(-1)]=r,n.boundary=!1,o.push(n);for(var s=[];c.length>0;){var u=c.pop();if(void 0===u)break;var f=u.vertices,b=u.adjacent,l=f.indexOf(r);if(!(l<0))for(var d=0;d<=4;++d)if(d!==l){var v=b[d];if(v.boundary&&!(v.lastVisited>=r)){var h=v.vertices;if(v.lastVisited!==-r){for(var p=0,j=0;j<=4;++j)h[j]<0?(p=j,a[j]=t):a[j]=e[h[j]];if(this.orient()>0){h[p]=r,v.boundary=!1,o.push(v),c.push(v),v.lastVisited=r;continue}v.lastVisited=-r}var m=v.adjacent,O=f.slice(),g=b.slice(),x=new G(O,g,!0);i.push(x);var w=m.indexOf(u);if(!(w<0)){m[w]=x,g[l]=v,O[d]=-1,g[d]=u,b[d]=x,x.flip();for(var y=0;y<=4;++y){var M=O[y];if(!(M<0||M===r)){for(var A=new Array(3),E=0,S=0;S<=4;++S){var k=O[S];k<0||S===y||(A[E++]=k)}s.push(new J(A,x,y))}}}}}}s.sort((function(t,n){return function(t,n){var r=t[0]+t[1],e=n[0]+n[1],a=r+t[2]-(e+n[2]);if(a)return a;var o=Math.min(t[0],t[1]),i=Math.min(n[0],n[1]);return(a=Math.min(o,t[2])-Math.min(i,n[2]))||Math.min(o+t[2],r)-Math.min(i+n[2],e)}(t.vertices,n.vertices)}));for(var C=0;C+1<s.length;C+=2){var V=s[C],I=s[C+1],P=V.index,z=I.index;P<0||z<0||(V.cell.adjacent[V.index]=I.cell,I.cell.adjacent[I.index]=V.cell)}}},{key:"insert",value:function(t){var n=this.vertices;n.push(t);var r=this.walk(t);if(r){for(var e=this.tuple,a=0;a<=4;++a){var o=r.vertices[a];e[a]=o<0?t:n[o]}var i=this.orient();if(!(i<0)){if(0===i){var c=this.handleBoundaryDegeneracy(r,t);if(!c)return;r=c}this.addPeaks(t,r)}}}},{key:"boundary",value:function(){for(var t=[],n=this.simplices,r=n.length,e=0;e<r;++e){var a=n[e];if(a.boundary){for(var o=new Array(4),i=a.vertices,c=0,s=0,u=0;u<=4;++u)i[u]>=0?o[c++]=i[u]:s=u&&1;if(1===s){var f=o[0];o[0]=o[1],o[1]=f}t.push(o)}}return t}}]),t}(),X=function t(n,r){Object(q.a)(this,t),this.point=void 0,this.index=void 0,this.point=n,this.index=r},H=function(t){var n=t.length;if(0===n)return[];for(var r=new Array(n),e=1,a=0;a<n;++a){for(var o=t[a],i=new Array(4),c=0,s=0;s<3;++s){var u=o[s];i[s]=u,c+=u*u}i[3]=c,r[a]=new X(i,a),e=Math.max(c,e)}r.sort((function(t,n){for(var r=0;r<5;++r){var e=n.point[r]-t.point[r];if(e)return e}return 0})),n=r.length;for(var f=new Array(n+3+1),b=new Array(n+3+1),l=16*e,d=new Array(4),v=0;v<=3;++v)d[v]=0;d[3]=l,f[0]=d.slice(),b[0]=-1;for(var h=0;h<=3;++h){var p=d.slice();p[h]=1,f[h+1]=p,b[h+1]=-1}for(var j=0;j<n;++j){var m=r[j];f[j+3+1]=m.point,b[j+3+1]=m.index}var O=function(t){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var r=t[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var e=t.slice(0,r+1),a=R(e);if(0===a)throw new Error("Input not in general position");for(var o=new Array(r+1),i=0;i<=r;++i)o[i]=i;a<0&&(o[0]=1,o[1]=0);for(var c=new G(o,new Array(r+1),!1),s=c.adjacent,u=new Array(r+2),f=0;f<=r;++f){for(var b=o.slice(),l=0;l<=r;++l)l===f&&(b[l]=-1);var d=b[0];b[0]=b[1],b[1]=d;var v=new G(b,new Array(r+1),!0);s[f]=v,u[f]=v}u[r+1]=c;for(var h=0;h<=r;++h)for(var p=s[h].vertices,j=s[h].adjacent,m=0;m<=r;++m){var O=p[m];if(O<0)j[m]=c;else for(var g=0;g<=r;++g)s[g].vertices.indexOf(O)<0&&(j[m]=s[g])}for(var x=new L(e,u),w=r+1;w<n;++w)x.insert(t[w]);return x.boundary()}(f);O=O.filter((function(t){for(var n=0;n<=3;++n){var r=b[t[n]];if(r<0)return!1;t[n]=r}return!0}));for(var g=0;g<O.length;++g){var x=O[g],w=x[0];x[0]=x[1],x[1]=w}return O},U=function(){return{bots:[]}},Y=function(t){return{bots:t.bots.map((function(t){return k(t)}))}},K=function(t,n,r){return r<t-n/2?1:r>t+n/2?0:2*(r+n-t)*Math.pow(t+n/2-r,2)/Math.pow(n,3)},Q=function(t,n,r){var e=m(r),a=p(r,Math.sqrt(K(t,n,e))/e);return S(a,a)},Z=function(t,n,r){var e=m(r),a=p(r,Math.sqrt(function(t,n,r){return K(t,n,r)+1e-4}(t,n,e))/e);return S(a,a)},_=function(t,n,r,e){var a=1e-5,o=e[r],i=b(e);i[r]=o+a;var c=b(e);c[r]=o-a;var s=Q(t,n,i);return function(t,n){for(var r=0;r<3;++r)for(var e=0;e<3;++e)t[r][e]-=n[r][e]}(s,Q(t,n,c)),A(s,1/2e-5),s},tt=function(t,n,r,e,a){for(var o=Object(P.a)(Array(3*e.bots.length)).map((function(){return[]})),i=0;i<e.bots.length;++i)for(var c=Z(t,n,f(e.bots[i].pos[1]+.5,0,0)),s=Z(t,n,f(0,e.bots[i].pos[1]+.5,0)),u=Z(t,n,f(0,0,e.bots[i].pos[1]+.5)),b=0;b<3;++b)for(var l=b;l<3;++l)o[3*i+b].push([3*i+l,(c[b][l]+u[b][l])*r+s[b][l]]);for(var d=function(r){a[r].forEach((function(a){for(var i=function(t,n,r,e){var a=v(e.pos,r.pos);return Q(t,n,a)}(t,n,e.bots[r],e.bots[a]),c=0;c<3;++c)for(var s=0;s<3;++s)o[3*r+c].push([3*a+s,-i[c][s]]),c>s||(o[3*r+c][s-c][1]+=i[c][s],o[3*a+c][s-c][1]+=i[c][s])}))},h=0;h<e.bots.length;++h)d(h);return o},nt=function(t,n,r,e,a,o,i,c,s,u){var f=function(t,n,r,e,a,o){var i=Object(P.a)(Array(3*o.bots.length)).map((function(){return 0}));return o.bots.forEach((function(c,s){for(var u=0;u<3;++u){var f=(o.bots[s].pos[u]-t.bots[s].pos[u])/r,b=((n.bots[s].pos[u]-o.bots[s].pos[u])/r-f)/r;i[3*s+u]=((1===u?-1:0)-b)*e*a}})),i}(e,a,o,i,c,s),b=tt(t,n,r,s,u);return D(b,f)},rt=function(t,n,r,e){return r[e].filter((function(t){return t>e})).filter((function(r){return O(n.bots[e].pos,n.bots[r].pos)<t}))},et=function(t,n,r,e,a,o,i,c,s,u,b,l,O,g,x){for(var w=Object(P.a)(Array(O.bots.length)).map((function(){return[0,1,2].map((function(){return 0}))})),y=function(e){for(var a=function(a){var i=_(t,n,a,f(O.bots[e].pos[1]+.5,0,0));A(i,r);var c=_(t,n,a,f(0,O.bots[e].pos[1]+.5,0)),s=_(t,n,a,f(0,0,O.bots[e].pos[1]+.5));A(s,r);var u=f(o[3*e],o[3*e+1],o[3*e+2]);M(i,c),M(i,s);var b=j(u,E(i,u));w[e][a]+=b,g[e].forEach((function(r){var i=function(t,n,r,e,a){return _(t,n,e,v(r.pos,a.pos))}(t,n,O.bots[e],a,O.bots[r]),c=f(o[3*r],o[3*r+1],o[3*r+2]);h(c,u);var s=E(i,c),b=j(c,s);w[e][a]+=b,w[r][a]-=b}))},i=0;i<3;++i)a(i)},S=0;S<O.bots.length;++S)y(S);for(var k=Object(P.a)(Array(O.bots.length)).map((function(){return f(0,0,0)})),V=0;V<O.bots.length;++V)for(var I=0;I<3;++I)k[V][I]=-w[V][I]+(-a[3*V+I]+2*o[3*V+I]-i[3*V+I])/Math.pow(l,2)*2;for(var z=0;z<O.bots.length;++z)if(!(O.bots[z].pos[1]>.5)){var W=O.bots[z].pos[1]+.5;k[z][1]-=2*e*(1-W)}for(var F=function(t){g[t].forEach((function(n){var r=v(O.bots[n].pos,O.bots[t].pos),a=m(r);a>1||(r=p(r,e*(1-a)/a),d(k[t],r),h(k[n],r))}))},T=0;T<O.bots.length;++T)F(T);for(var B=0;B<O.bots.length;++B){var D=C(x,l,c.bots[B].pos,s.bots[B].pos,u.bots[B].pos,b.bots[B].pos),N=v(D,O.bots[B].pos);d(k[B],p(N,-.1))}return k},at=function(t){var n=new N.a(123);return function(t){var n=H(t),r=t.map((function(){return{}}));return n.forEach((function(t){for(var n=0;n<4;++n)for(var e=n+1;e<4;++e)r[t[n]][t[e]]=!0,r[t[e]][t[n]]=!0})),r.map((function(t){return Object.keys(t).map((function(t){return Number(t)}))}))}([].concat(Object(P.a)(t),Object(P.a)(t.map((function(t){return[t[0],-.5,t[2]]})))).map((function(t){return l(t,p(f(n.next()-.5,n.next()-.5,n.next()-.5),.1))}))).map((function(n){return n.map((function(n){return n>=t.length?-1:n}))})).slice(0,t.length)},ot=function(t){if(0===t.bots.length)return{min:[0,0,0],max:[0,0,0]};var n=V(t.bots[0]);return t.bots.forEach((function(t){n=I(n,V(t))})),n},it=function(){function t(n){Object(q.a)(this,t),this.comparator=void 0,this.elements=void 0,this.comparator=n,this.elements=[]}return Object($.a)(t,[{key:"peek",value:function(){return this.elements[0]}},{key:"pop",value:function(){var t=this.peek();if(void 0!==t){var n=this.elements.pop();if(void 0!==n){var r=this.size();if(0===r)return t;this.elements[0]=n;for(var e=0;e<r;){var a=e,o=2*e+1,i=2*e+2;if(o<r&&this.compare(o,a)>=0&&(a=o),i<r&&this.compare(i,a)>=0&&(a=i),a===e)break;this.swap(a,e),e=a}return t}}}},{key:"push",value:function(t){for(var n=this.elements.push(t)-1;n>0;){var r=Math.floor((n-1)/2);if(this.compare(n,r)<=0)break;this.swap(r,n),n=r}}},{key:"size",value:function(){return this.elements.length}},{key:"compare",value:function(t,n){return this.comparator(this.elements[t],this.elements[n])}},{key:"swap",value:function(t,n){var r=this.elements[t];this.elements[t]=this.elements[n],this.elements[n]=r}}]),t}(),ct=function(t){for(var n=t.dist/2,r=t;void 0!==r.prev&&r.prev.dist>n;r=r.prev);if(void 0===r.prev)return r.pos;var e=r.prev,a=n-e.dist,o=a/(a+(r.dist-n));return l(p(e.pos,1-o),p(r.pos,o))},st=function(t){return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]},ut=function(t,n,r){return p(function(t,n,r){var e=p(l(n,r),.5);if(m(v(r,n))<1)return e;var a=st(n),o=st(r),i={},c=new it((function(t,n){return n.distEstimate-t.distEstimate}));c.push({dist:0,distEstimate:0,pos:a,prev:void 0});for(var s,f,b=0;b<1e4;){var d=c.pop();if(void 0===d)break;var h=Object(u.a)(d.pos,3),j=h[0],O=h[1],g=h[2];if(!(O<1.5)&&!0!==((t[j]||{})[O]||{})[g]&&void 0===((i[j]||{})[O]||{})[g]){if(void 0===i[j]&&(i[j]={}),void 0===i[j][O]&&(i[j][O]={}),i[j][O][g]=d,f=o,(s=d.pos)[0]===f[0]&&s[1]===f[1]&&s[2]===f[2])return ct(d);++b;for(var x=-1;x<=1;++x)for(var w=-1;w<=1;++w)for(var y=-1;y<=1;++y)if(0!==x||0!==w||0!==y){var M=[x,w,y],A=l(d.pos,M),E=d.dist+m(M);c.push({dist:E,distEstimate:E+m(v(o,A)),pos:A,prev:d})}}}return e}(t,p(n,3),p(r,3)),1/3)},ft=function(t){return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]},bt=function(t){var n,r=ot({bots:t});return r.min=(n=r.min,[Math.floor(n[0]),Math.floor(n[1]),Math.floor(n[2])]),r.max=function(t){return[Math.ceil(t[0]),Math.ceil(t[1]),Math.ceil(t[2])]}(r.max),{min:r.min,max:r.max,bots:Object(P.a)(Array(r.max[0]-r.min[0]+1)).map((function(){return Object(P.a)(Array(r.max[1]-r.min[1]+1)).map((function(){return Object(P.a)(Array(r.max[2]-r.min[2]+1)).map((function(){return null}))}))}))}},lt=function(t,n,r){for(var e=ft(n),a=Object(u.a)(e,3),o=a[0],i=a[1],c=a[2],s=-1;s<=1;++s)for(var f=-1;f<=1;++f)for(var b=-1;b<=1;++b){var l=o+s-t.min[0],d=i+f-t.min[1],v=c+b-t.min[2];if(!(l<0)&&(!(d<0)&&!(v<0)&&!(l>t.max[0]-t.min[0])&&!(d>t.max[1]-t.min[1])&&!(v>t.max[2]-t.min[2]))){var h=t.bots[l][d][v];t.bots[l][d][v]={value:r,next:h}}}},dt=function(t){for(var n=t.map((function(t){return b(t.pos)})),r=bt(t),e=0;e<t.length;++e)lt(r,t[e].pos,e);for(var a=0;a<t.length;++a)for(var o=v(ft(n[a]),r.min),i=Object(u.a)(o,3),c=i[0],s=i[1],f=i[2],l=r.bots[c][s][f];null!==l;l=l.next){var j=t[l.value];if(t[a]!==j){var O=v(j.pos,t[a].pos),g=m(O);if(!(g>1)){var x=p(O,(1-g)/g/2);h(t[a].pos,x),d(j.pos,x)}}}for(var w=0;w<t.length;++w)t[w].pos[1]=Math.max(t[w].pos[1],.5)},vt=function(t,n,r){var e=n.bots.some((function(t){return t.fixed})),a=U();return a.bots=n.bots.map((function(n,a){return function(n,r){var a=k(n);return a.pos=e?ut(t,n.pos,r.pos):p(l(n.pos,r.pos),.5),a}(n,r.bots[a])})),a},ht=function(t,n,r,e,a,o,i,c,s){for(var u=.2/a.length,b=a.map((function(t){return t.bots.map((function(){return f(0,0,0)}))})),d=a.map((function(t){return at(t.bots.map((function(t){return t.pos})))})),v=a.map((function(r,e){return r.bots.map((function(a,o){return rt(t+n/2,r,d[e],o)}))})),h=function(s){var d=function(t,n,r,e,a,o,i,c,s){for(var u=Object(P.a)(Array(a.length)).map((function(){return Object(P.a)(Array(a[0].bots.length)).map((function(){return f(0,0,0)}))})),b=a.map((function(){return Object(P.a)(Array(3*a[0].bots.length)).map((function(){return 0}))})),l=0;l<a.length;++l){var d=a[Math.max(l-1,0)],v=a[Math.min(l+1,a.length-1)];b[l]=nt(t,n,r,d,v,o,i,c,a[l],s[l])}for(var h=1;h<a.length;++h){var p=a[Math.max(h-2,0)],j=a[h-1],m=a[Math.min(h+1,a.length-1)],O=a[Math.min(h+2,a.length-1)];u[h]=et(t,n,r,e,b[h-1],b[h],b[Math.min(h+1,a.length-1)],p,j,m,O,o,a[h],s[h],h/(a.length-1))}return u}(t,n,r,e,a,o,i,c,v);d=d.map((function(t){return t.map((function(t){return p(t,-u/(1e-4+m(t)))}))})),a.forEach((function(t,n){n<=1||n>=a.length-2||t.bots.forEach((function(t,r){b[n][r]=l(b[n][r],d[n][r]),b[n][r]=p(b[n][r],.9),t.pos=l(t.pos,b[n][r])}))}))},j=0;j<s;++j)h()},pt=function(t,n){return m(v(n.pos,t.pos))};!function(t){t[t.Mst=0]="Mst",t[t.Fibers=1]="Fibers",t[t.Delaunay=2]="Delaunay"}(c||(c={}));var jt=function(t,n,r){for(var e=function(n){var e=Object(P.a)(Array(t.bots.length)).map((function(n){return[-1].concat(Object(P.a)(Object(P.a)(Array(t.bots.length)).map((function(t,n){return n})).filter((function(t){return t!==n}))))})),a=[];e.forEach((function(n,o){n.forEach((function(n){-1!==n&&o>=n||function(t,n,r,e,a){if(a===c.Delaunay)return!0;if(a===c.Mst){if(-1===e){for(var o=t.bots[r].pos[1]+.5,i=Object(P.a)(Array(t.bots.length)).map((function(){return!1})),s=[],u=0;u<t.bots.length;++u)t.bots[u].pos[1]+.5<o&&s.push(u);for(;s.length>0;){var f=s.shift();if(void 0===f)break;if(!i[f]){i[f]=!0;for(var b=0;b<n[f].length;++b){var l=n[f][b];-1!==l&&O(t.bots[f].pos,t.bots[l].pos)<o&&s.push(l)}}}return!i[r]}for(var d=O(t.bots[r].pos,t.bots[e].pos),v=Object(P.a)(Array(t.bots.length)).map((function(){return!1})),h=[],p=0;p<t.bots.length;++p)t.bots[p].pos[1]+.5<d&&h.push(p);for(;h.length>0;){var j=h.shift();if(void 0===j)break;if(!v[j]){v[j]=!0;for(var m=0;m<n[j].length;++m){var g=n[j][m];-1!==g&&O(t.bots[j].pos,t.bots[g].pos)<d&&h.push(g)}}}return!(v[r]&&v[e])}if(-1===e){var x=t.bots[r];return!t.bots.some((function(t,n){return r!==n&&O(t.pos,[x.pos[0],-.5,t.pos[2]])<x.pos[1]+.5&&O(x.pos,t.pos)<x.pos[1]+.5}))}for(var w=0;w<t.bots.length;++w)if(w!==r&&w!==e){if(pt(t.bots[r],t.bots[e])>t.bots[r].pos[1]+.5&&pt(t.bots[r],t.bots[e])>t.bots[e].pos[1]+.5)return!1;if(pt(t.bots[r],t.bots[e])>pt(t.bots[r],t.bots[w])&&pt(t.bots[r],t.bots[e])>pt(t.bots[w],t.bots[e]))return!1;if(pt(t.bots[r],t.bots[e])>pt(t.bots[e],t.bots[w])&&pt(t.bots[r],t.bots[e])>pt(t.bots[r],t.bots[w]))return!1}return!0}(t,e,o,n,r)&&a.push([o,n])}))})),a.forEach((function(n){var r=Object(u.a)(n,2),e=r[0],a=r[1];if(-1!==a){var o=v(t.bots[a].pos,t.bots[e].pos),i=m(o);if(!(i<1)){var c=p(o,(1-i)/i/2*.2);h(t.bots[e].pos,c),d(t.bots[a].pos,c)}}else t.bots[e].pos[1]+=.2*(.5-t.bots[e].pos[1])}))},a=0;a<n;++a)e()},mt=function(t,n){for(var r=function(r){t[r].bots.forEach((function(e,a){var o=C((r-1)/(t.length-3),n,t[r-2].bots[a].pos,t[r-1].bots[a].pos,t[r+1].bots[a].pos,t[r+2].bots[a].pos);e.pos=l(p(e.pos,.5),p(o,.5))}))},e=2;e<t.length-2;++e)r(e)},Ot=function(t,n,r,e,a){for(var o=[Y(t),Y(n),Y(r),Y(e)],i=function(t){var n=Object(P.a)(Array(7)).map((function(t,n){return 3*(n/3-1)*.5})),r={};return t.forEach((function(t){n.forEach((function(e){n.forEach((function(a){n.forEach((function(n){var o=st(l(p(t.pos,3),[e,a,n])),i=Object(u.a)(o,3),c=i[0],s=i[1],f=i[2];void 0===r[c]&&(r[c]={}),void 0===r[c][s]&&(r[c][s]={}),r[c][s][f]=!0}))}))}))})),r}(n.bots.filter((function(t){return t.fixed}))),c=function(t){var r=o.map((function(t,n){return!(n<=1||n>=o.length-1)&&function(t,n,r,e){for(var a=0,o=0;o<n.bots.length;++o){var i=p(v(n.bots[o].pos,t.bots[o].pos),1/e),c=p(v(r.bots[o].pos,n.bots[o].pos),1/e),s=p(v(c,i),1/e);a=Math.max(a,m(s))}return a}(o[n-1],t,o[n+1],a.dt)>.2}));if(!r.some((function(t){return t})))return"break";var e=Object(P.a)(o);o=[o[0]],r.forEach((function(t,n){0!==n&&(t&&o.push(vt(i,o[o.length-1],e[n])),o.push(e[n]))})),console.log(t,o.length);for(var c=0;c<a.contractIterations;++c){for(var s=2;s<o.length-2;++s)jt(o[s],1,a.contractionType);o.forEach((function(t){return dt(t.bots)}))}if(ht(a.offset,a.slack,a.friction,a.overlapPenalty,o,a.dt,a.gravity,a.botMass,a.optimizeIterations),t>3)for(var u=0;u<a.minimizeAccelerationIterations;++u)mt(o,a.dt),o.forEach((function(t){return dt(t.bots)}));o.forEach((function(t){return t.bots.forEach((function(t,r){t.fixed&&(t.pos=b(n.bots[r].pos))}))}))},s=0;s<a.subdivideIterations;++s){if("break"===c(s))break}return console.log("done"),o.slice(1,o.length-1)},gt=r(118),xt=r(119),wt=r(124),yt=r(122),Mt=r(110),At=r(79),Et=r(120),St=r(117),kt=r(121),Ct=r(0),Vt=r.n(Ct),It=r(114),Pt=r(25),zt=r.n(Pt),Wt=r(5),Ft=new N.a(123),Tt=function(t){var n=Object(Ct.useState)(!0),r=Object(u.a)(n,2),a=r[0],o=r[1],c=Object(Ct.useState)([]),s=Object(u.a)(c,2),f=s[0],b=s[1],l=function(){if(void 0!==t.world&&void 0!==t.worldPrev&&void 0!==t.worldEnd)if(0===f.length||t.world.bots.map((function(t,n){return e.sub(t.pos,f[0].bots[n].pos)})).map((function(t){return e.dot(t,t)})).reduce((function(t,n){return t+n}),0)>1e-5)b(i.createAnimation(t.worldPrev,t.world,t.worldEnd,t.worldEnd,t.config));else{var n=f;n.length>1&&(n=n.slice(1)),t.setWorldPrev(t.world),t.setWorld(n[0]),b(n)}};return Object(Ct.useEffect)((function(){if(!a){var t=setInterval(l,1e3/30);return function(){return clearInterval(t)}}}),[t,a,f]),Object(Ct.useEffect)((function(){o(!0),void 0!==t.worldStart&&(t.setWorld(t.worldStart),b([]))}),[t.worldStart]),Object(Wt.jsxs)(Mt.a,{children:[Object(Wt.jsx)(At.a,{children:Object(Wt.jsxs)(It.a,{variant:"contained",onClick:function(){o(!a)},children:["paused: ",a?"yes":"no"]})}),Object(Wt.jsx)(At.a,{children:Object(Wt.jsx)(It.a,{variant:"contained",onClick:function(){void 0!==t.world&&t.setWorld(zt()(t.world,{bots:{$set:t.world.bots.map((function(t){return zt()(t,{pos:{$set:e.add(t.pos,e.multiplyScalar(e.newVec3(Ft.next()-.5,Ft.next()-.5,Ft.next()-.5),2))}})}))}}))},children:"Disturb"})})]})},Bt=r(7),Dt=r.p+"static/media/grass.75422b3f.jpg",Nt=function(){var t=new Bt.n,n=new Bt.k(2e3,2e3,8,8),r=(new Bt.r).load(Dt);r.wrapS=Bt.m,r.wrapT=Bt.m,r.repeat.set(100,100);var e=new Bt.h({map:r}),a=new Bt.g(n,e);a.rotateX(-Math.PI/2),a.castShadow=!1,a.receiveShadow=!0,t.add(a),t.add(new Bt.a(16777215,.4));var o=new Bt.d(16777215,.4);return o.position.set(10,50,10),o.castShadow=!0,o.shadowCameraRight=50,o.shadowCameraLeft=-50,o.shadowCameraTop=50,o.shadowCameraBottom=-50,o.shadowMapWidth=1024,o.shadowMapHeight=1024,t.add(o),t},qt=r(57),$t=r(58),Rt=1920,Gt=1080,Jt=new Bt.u({antialias:!0});Jt.setClearColor("#87ceeb"),Jt.setSize(Rt,Gt),Jt.shadowMapEnabled=!0,Jt.shadowMapType=Bt.i;for(var Lt=function(t){var n=.65*Object($t.a)(),r=.5625*n,a=Object(Ct.useState)(30),o=Object(u.a)(a,2),i=o[0],c=o[1],f=Object(Ct.useRef)(null),b=Object(Ct.useState)(),l=Object(u.a)(b,2),d=l[0],v=l[1],h=Object(Ct.useState)(),p=Object(u.a)(h,2),j=p[0],m=p[1],O=Object(Ct.useState)(),g=Object(u.a)(O,2),x=g[0],w=g[1],y=Object(Ct.useState)(10),M=Object(u.a)(y,2),A=M[0],E=M[1],S=Object(Ct.useState)(!1),k=Object(u.a)(S,2),C=k[0],V=k[1],I=Object(Ct.useState)([0,0,1]),P=Object(u.a)(I,2),z=P[0],W=P[1],F=function(){if(void 0!==j){var n=j.clone();n.aspect=1.7777777777777777,n.updateProjectionMatrix();var r=document.createElement("a");Jt.render(t.scene,n),r.href=Jt.domElement.toDataURL().replace("image/png","image/octet-stream"),r.download="image.png",r.click()}};return Object(Ct.useEffect)((function(){var t=f.current;if(t){var e=new Bt.j(i,n/r,.1,1e3);e.position.set(10,10,10),e.lookAt(0,0,0),m(e);var a=new Bt.u({antialias:!0});a.setClearColor("#87ceeb"),a.setSize(n,r),a.shadowMapEnabled=!0,a.shadowMapType=Bt.i,t.appendChild(a.domElement),w(a);var o=new qt.a(e,a.domElement);return o.enableDamping=!0,o.dampingFactor=.5,v(o),function(){t.removeChild(a.domElement)}}}),[f]),Object(Ct.useEffect)((function(){void 0!==j&&void 0!==x&&(j.aspect=n/r,j.updateProjectionMatrix(),x.setSize(n,r))}),[j,x,n,r]),Object(Ct.useEffect)((function(){if(d&&x&&j&&t.scene){var n=window.setInterval((function(){d.update(),x.render(t.scene,j)}),1e3/30);return function(){window.clearInterval(n)}}}),[d,x,j,t.scene]),Object(Ct.useEffect)((function(){C&&F()}),[t.world]),Object(Wt.jsxs)(Wt.Fragment,{children:[Object(Wt.jsx)("div",{ref:f}),Object(Wt.jsx)(It.a,{variant:"contained",onClick:function(){if(void 0!==d){var n=t.center[0]-d.target.x,r=t.center[1]-d.target.y,e=t.center[2]-d.target.z;d.object.position.set(d.object.position.x+n,d.object.position.y+r,d.object.position.z+e),d.target.set(t.center[0],t.center[1],t.center[2])}},children:"Center camera"}),Object(Wt.jsx)("br",{}),Object(Wt.jsx)(kt.a,{type:"number",label:"Camera distance",value:A,onChange:function(t){var n=Math.max(parseFloat(t.target.value),1);if(E(n),void 0!==j&&void 0!==d){var r=[d.object.position.x,d.object.position.y,d.object.position.z],a=[d.target.x,d.target.y,d.target.z],o=e.sub(r,a),i=e.normalize(o),c=e.multiplyScalar(i,n),s=e.add(a,c);d.object.position.set(s[0],s[1],s[2]),j.updateProjectionMatrix()}}}),Object(Wt.jsx)(kt.a,{type:"number",label:"FOV",value:i,onChange:function(t){var n=Math.min(Math.max(parseFloat(t.target.value),1),179);c(n),void 0!==j&&(j.fov=n,j.updateProjectionMatrix())}}),z.map((function(t,n){return Object(Wt.jsx)(Et.a,{value:t,onChange:function(t){W(zt()(z,Object(s.a)({},n,{$set:parseFloat(t.target.value)})))},children:[-1,0,1].map((function(t){return Object(Wt.jsx)(St.a,{value:t,children:t},t)}))},n)})),Object(Wt.jsxs)(It.a,{variant:"contained",onClick:function(){if(void 0!==d){var t=[d.target.x,d.target.y,d.target.z],n=e.multiplyScalar(z,A),r=e.add(t,n);d.object.position.set(r[0],r[1],r[2])}},children:["Align (",z.join(","),")"]}),Object(Wt.jsx)("br",{}),Object(Wt.jsx)(wt.a,{control:Object(Wt.jsx)(yt.a,{checked:C,onChange:function(t){return V(t.target.checked)}}),label:"Save screenshot on every frame"}),!C&&Object(Wt.jsx)(It.a,{variant:"contained",onClick:F,children:"Save screenshot for this frame"})]})},Xt=function(t){var n=Object(Ct.useState)(Nt()),r=Object(u.a)(n,2),e=r[0],a=r[1],o=Object(Ct.useState)([]),i=Object(u.a)(o,2),c=i[0],s=i[1],f=Object(Ct.useState)(),b=Object(u.a)(f,2),l=b[0],d=b[1];return Object(Ct.useEffect)((function(){var n=t.world;void 0!==n&&c.length===n.bots.length&&(n.bots.forEach((function(t,n){var r;(r=c[n].position).set.apply(r,Object(P.a)(t.pos))})),d(t.world))}),[t.world,c]),Object(Ct.useEffect)((function(){var n=t.worldStart;void 0!==n&&s(n.bots.map((function(t){return function(t,n){var r,e=new Bt.o(1,16,16);e.computeVertexNormals(),e.faces.forEach((function(t){return t.vertexColors=new Array(3).fill(!0).map((function(){return n}))}));var a=(new Bt.b).fromGeometry(e);delete a.attributes.uv;var o=new Bt.g(a,new Bt.h({color:n}));return o.geometry=a,(r=o.position).set.apply(r,Object(P.a)(t)),o.scale.set(.5,.5,.5),o.castShadow=!0,o.receiveShadow=!0,o}(t.pos,new Bt.c(t.fixed?"#808080":"#fa8072"))})))}),[t.worldStart]),Object(Ct.useEffect)((function(){var t=Nt();c.forEach((function(n){return t.add(n)})),a(t)}),[c]),Object(Wt.jsx)(Lt,{scene:e,center:t.center,world:l})},Ht=function(t,n){return t.map((function(t){return{pos:t,fixed:n}}))},Ut=function(t){return{bots:t}},Yt=function(t,n,r,e){var a=Ht(n,!0),o=Ht(r,!1),i=Ht(e,!1);return{title:t,start:Ut([].concat(Object(P.a)(a),Object(P.a)(o))),end:Ut([].concat(Object(P.a)(a),Object(P.a)(i)))}},Kt=[e.newVec3(0,0,0)],Qt=0;Qt<10;++Qt){var Zt=Math.PI/2*(Qt/10);Kt.push(e.newVec3(Kt[Qt][0]+Math.cos(Zt),Kt[Qt][1]-Math.sin(Zt),0))}for(var _t=1;_t<11;++_t)Kt.push(e.newVec3(-Kt[_t][0],Kt[_t][1],0));var tn=Math.min.apply(Math,Object(P.a)(Kt.map((function(t){return t[1]}))));Kt.forEach((function(t,n){return Kt[n][1]=Kt[n][1]-tn+.5}));for(var nn=Yt("Arc",[],[].concat(Object(P.a)(Object(P.a)(Array(11)).map((function(t,n){return e.newVec3(Math.ceil(n/2)+4,.5,n%2-.5)}))),Object(P.a)(Object(P.a)(Array(10)).map((function(t,n){return e.newVec3(-Math.floor(n/2)-1-4,.5,n%2-.5)})))),Kt),rn=[e.newVec3(0,0,0)],en=0;en<20;++en){var an=Math.PI/2*(en/20);rn.push(e.newVec3(rn[en][0]+Math.cos(an),rn[en][1]-Math.sin(an),0))}for(var on=1;on<21;++on)rn.push(e.newVec3(-rn[on][0],rn[on][1],0));var cn=Math.min.apply(Math,Object(P.a)(rn.map((function(t){return t[1]}))));rn.forEach((function(t,n){return rn[n][1]=rn[n][1]-cn+.5}));var sn,un,fn,bn=Yt("Big arc",[],[].concat(Object(P.a)(Object(P.a)(Array(21)).map((function(t,n){return e.newVec3(n+15,.5,0)}))),Object(P.a)(Object(P.a)(Array(20)).map((function(t,n){return e.newVec3(-n-1-15,.5,0)})))),rn),ln=Yt("Big cube",[],Object(P.a)(Array(8)).map((function(t,n){return Object(P.a)(Array(8)).map((function(t,r){return e.newVec3(n-3.5,.5,r-3.5)}))})).flat(),Object(P.a)(Array(4)).map((function(t,n){return Object(P.a)(Array(4)).map((function(t,r){return Object(P.a)(Array(4)).map((function(t,a){return e.newVec3(n-1.5,a+.5,r-1.5)}))}))})).flat().flat()),dn=Yt("Box",[],[[-1.5,.5,-1.5],[-.5,.5,-1.5],[.5,.5,-1.5],[1.5,.5,-1.5],[-1.5,.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[1.5,.5,-.5],[-1.5,.5,.5],[-.5,.5,.5],[.5,.5,.5],[1.5,.5,.5],[-1.5,.5,1.5],[-.5,.5,1.5],[.5,.5,1.5],[1.5,.5,1.5]],[[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5],[-.5,1.5,-.5],[.5,1.5,-.5],[.5,1.5,.5],[-.5,1.5,.5],[-.5,2.5,-.5],[.5,2.5,-.5],[.5,2.5,.5],[-.5,2.5,.5],[-.5,3.5,-.5],[.5,3.5,-.5],[.5,3.5,.5],[-.5,3.5,.5]]),vn=function(t,n){return Object(P.a)(Array(n)).map((function(n,r){return e.add(t,[0,r,0])}))},hn=function(t,n){return Object(P.a)(Array(n)).map((function(n,r){return e.add(t,[0,0,r])}))},pn=function(t,n,r){return[].concat(Object(P.a)(vn(e.add(t,[-n,0,0]),r)),Object(P.a)(vn(e.add(t,[n,0,0]),r)),Object(P.a)(function(t,n){return Object(P.a)(Array(n)).map((function(n,r){return e.add(t,[r,0,0])}))}(e.add(t,[1-n,r-1,0]),2*n-1)))},jn=Yt("Brachiation",[].concat(Object(P.a)(pn([-10,.5,0],1,7)),Object(P.a)(pn([10,.5,0],1,7)),Object(P.a)(pn([0,7.5,0],11,5)),Object(P.a)((sn=[0,.5,0],un=2,fn=12,[].concat(Object(P.a)(vn(e.add(sn,[0,0,-un]),fn)),Object(P.a)(vn(e.add(sn,[0,0,un]),fn)),Object(P.a)(hn(e.add(sn,[0,fn-1,1-un]),un-1)),Object(P.a)(hn(e.add(sn,[0,fn-1,1]),un-1)))))),vn([-10,7.5,0],3),vn([10,7.5,0],3)),mn=Yt("Crane",[],[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,.5,0]],[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,2.5,0]]),On=function(){return Object(P.a)(Array(13)).map((function(t,n){return Object(P.a)(Array(13)).map((function(t,r){return[n-6,.5,r-6]}))})).flat().filter((function(t){return Math.abs(t[0]+t[2])<2}))},gn=Yt("Floor transport",[],[].concat(Object(P.a)(On()),Object(P.a)(Object(P.a)(Array(3)).map((function(t,n){return[-6,n+1.5,6]}))),Object(P.a)(Object(P.a)(Array(3)).map((function(t,n){return[6,n+1.5,-6]}))),[[-6,4.5,6]]),[].concat(Object(P.a)(On()),Object(P.a)(Object(P.a)(Array(3)).map((function(t,n){return[-6,n+1.5,6]}))),Object(P.a)(Object(P.a)(Array(3)).map((function(t,n){return[6,n+1.5,-6]}))),[[6,4.5,-6]])),xn=function(t){return Object(P.a)(Array(3)).map((function(t,n){return Object(P.a)(Array(3)).map((function(t,r){return Object(P.a)(Array(3)).map((function(t,e){return[n-1,r-1,e-1]}))}))})).flat().flat().filter((function(t){return(1===Math.abs(t[0])?1:0)+(1===Math.abs(t[1])?1:0)+(1===Math.abs(t[2])?1:0)>=2})).map((function(t){return e.newVec3(t[0],t[1]+.5+1,t[2])})).map((function(n){return e.add(n,t)}))},wn=Yt("Frame transport",[],[].concat(Object(P.a)(xn([0,0,5])),Object(P.a)(xn([0,3,5])),Object(P.a)(xn([-5,0,5])),Object(P.a)(xn([5,0,-5])),Object(P.a)(xn([-5,3,5]))),[].concat(Object(P.a)(xn([0,0,5])),Object(P.a)(xn([0,3,5])),Object(P.a)(xn([-5,0,-5])),Object(P.a)(xn([5,0,5])),Object(P.a)(xn([5,3,5])))),yn=function(t,n){return Object(P.a)(Array(n)).map((function(n,r){return e.add(t,[0,r+.5,0])}))},Mn=Yt("Platform",Object(P.a)(function(t){return[].concat(Object(P.a)(function(t,n){return[].concat(Object(P.a)(yn(e.add(t,[1,0,1]),n)),Object(P.a)(yn(e.add(t,[1,0,-1]),n)),Object(P.a)(yn(e.add(t,[-1,0,-1]),n)),Object(P.a)(yn(e.add(t,[-1,0,1]),n)))}(t,4)),Object(P.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(n){return e.add(n,t)}))}(e.add(t,[0,4,0]))))}([0,0,0])),yn([0,0,0],4),yn([0,5,0],4)),An=function(t,n){return Object(P.a)(Array(n)).map((function(n,r){return e.add(t,[0,r,0])}))},En=function(t){return[[1,.5,1],[1,.5,-1],[-1,.5,1],[-1,.5,-1]].map((function(n){return e.add(n,t)}))},Sn=function(t){return[].concat(Object(P.a)(En(t)),Object(P.a)(En(e.add(t,[0,1,0]))),Object(P.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(n){return e.add(n,t)}))}(e.add(t,[0,2,0]))))},kn=Yt("Platforms",[].concat(Object(P.a)(Sn([-6,0,0])),Object(P.a)(Sn([6,0,0]))),An([-6,3.5,0],5),An([6,3.5,0],5)),Cn=function(t,n){return Object(P.a)(Array(n)).map((function(n,r){return e.add(t,[0,r,0])}))},Vn=function(t){return[[1,.5,1],[1,.5,-1],[-1,.5,1],[-1,.5,-1]].map((function(n){return e.add(n,t)}))},In=function(t){return[].concat(Object(P.a)(Vn(t)),Object(P.a)(Vn(e.add(t,[0,1,0]))),Object(P.a)(Vn(e.add(t,[0,2,0]))),Object(P.a)(Vn(e.add(t,[0,3,0]))),Object(P.a)(Vn(e.add(t,[0,4,0]))),Object(P.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(n){return e.add(n,t)}))}(e.add(t,[0,5,0]))))},Pn=Yt("Tall platforms",[].concat(Object(P.a)(In([-6,0,0])),Object(P.a)(In([6,0,0]))),Cn([-6,6.5,0],5),Cn([6,6.5,0],5)),zn=Yt("Rolling box",[],[[0,0,0],[0,1,0],[0,2,0],[0,0,1],[0,1,1],[0,2,1],[-1,0,0],[-1,1,0],[-1,2,0],[-1,0,1],[-1,1,1],[-1,2,1]].map((function(t){return e.add(t,[0,.5,0])})),[[0,0,0],[1,0,0],[2,0,0],[0,0,1],[1,0,1],[2,0,1],[0,1,0],[1,1,0],[2,1,0],[0,1,1],[1,1,1],[2,1,1]].map((function(t){return e.add(t,[0,.5,0])}))),Wn=Yt("Stack",[],Object(P.a)(Object(P.a)(Array(5)).map((function(t,n){return[n,.5,0]}))),Object(P.a)(Object(P.a)(Array(5)).map((function(t,n){return[0,.5+n,0]})))),Fn=function(t){return Object(P.a)(Array(5)).map((function(n,r){return e.add(t,[0,r,0])}))},Tn=Yt("Short towers",[],[].concat(Object(P.a)(Fn([5,.5,0])),Object(P.a)(Fn([-5,.5,0])),[[5,5.5,0]]),[].concat(Object(P.a)(Fn([5,.5,0])),Object(P.a)(Fn([-5,.5,0])),[[-5,5.5,0]])),Bn=function(t){return Object(P.a)(Array(7)).map((function(n,r){return e.add(t,[0,r,0])}))},Dn=function(t){return[[0,0,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1],[0,1,0],[0,2,0],[0,3,0]].map((function(n){return e.add(n,t)}))},Nn=[nn,bn,ln,dn,jn,mn,gn,wn,Mn,kn,Pn,zn,Wn,Tn,Yt("Tall towers",[],[].concat(Object(P.a)(Bn([5,.5,0])),Object(P.a)(Bn([-5,.5,0])),[[5,7.5,0]]),[].concat(Object(P.a)(Bn([5,.5,0])),Object(P.a)(Bn([-5,.5,0])),[[-5,7.5,0]])),Yt("Transformer",[],[[0,.5,1],[0,.5,-1],[0,1.5,1],[0,1.5,0],[0,1.5,-1],[1,1.5,1],[1,1.5,0],[1,1.5,-1],[2,1.5,1],[2,1.5,0],[2,1.5,-1],[3,1.5,1],[3,1.5,0],[3,1.5,-1],[3,.5,1],[3,.5,-1]],[[0,.5,1],[0,.5,-1],[0,1.5,.8],[0,3.5,0],[0,1.5,-.8],[0,2.5,.6],[0,4.5,0],[0,2.5,-.6],[0,5.5,1],[0,5.5,0],[0,5.5,-1],[0,4.7,1.6],[0,6.5,0],[0,4.7,-1.6],[0,3.7,2],[0,3.7,-2]]),Yt("Transport",[],[].concat(Object(P.a)(Dn([6,.5,-6])),Object(P.a)(Dn([3,.5,-3])),Object(P.a)(Dn([0,.5,0])),Object(P.a)(Dn([-3,.5,3])),Object(P.a)(Dn([-6,.5,6])),[[-6,4.5,6]]),[].concat(Object(P.a)(Dn([6,.5,-6])),Object(P.a)(Dn([3,.5,-3])),Object(P.a)(Dn([0,.5,0])),Object(P.a)(Dn([-3,.5,3])),Object(P.a)(Dn([-6,.5,6])),[[6,4.5,-6]])),Yt("Vertical transport",[],[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,.5,0]],[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,12.5,0]]),Yt("Wall",[[0,.5,1],[0,.5,0],[0,.5,-1],[0,1.5,1],[0,1.5,0],[0,1.5,-1],[0,2.5,1],[0,2.5,0],[0,2.5,-1]],[[2,.5,0]],[[-2,.5,0]])].sort((function(t,n){var r=t.start.bots.length-n.start.bots.length;return 0===r?t.title>n.title?1:-1:r})),qn=function(t){var n=Object(Ct.useState)(void 0),r=Object(u.a)(n,2),a=r[0],i=r[1],c=function(n,r){return Object(Wt.jsxs)(It.a,{variant:"contained",color:a===r?"primary":"default",onClick:function(){var a=new N.a(123),c=function(t){return[o.clone(t.start),o.clone(t.end)]}(n),s=Object(u.a)(c,2),f=s[0],b=s[1];console.log(f,b);var l=function(){return e.multiplyScalar(e.newVec3(a.next()-.5,a.next()-.5,a.next()-.5),.1)};f.bots.map((function(t){return t.pos=e.add(t.pos,l())})),b.bots.map((function(t){return t.pos=e.add(t.pos,l())})),t.onSelect(f,b),i(r)},children:[n.title," (",n.start.bots.length," bots)"]},r)},s=Nn.filter((function(t){return!t.start.bots.some((function(t){return t.fixed}))})),f=Nn.filter((function(t){return t.start.bots.some((function(t){return t.fixed}))}));return Object(Wt.jsxs)(Wt.Fragment,{children:[Object(Wt.jsx)("b",{children:"Select an example"}),Object(Wt.jsx)("br",{}),Object(Wt.jsx)("br",{}),"No obstacles",Object(Wt.jsx)("br",{}),Object(Wt.jsx)("br",{}),s.map(c),Object(Wt.jsx)("br",{}),Object(Wt.jsx)("br",{}),"Obstacles",Object(Wt.jsx)("br",{}),Object(Wt.jsx)("br",{}),f.map((function(t,n){return c(t,n+s.length)}))]})},$n=function(t){var n=Object(Ct.useState)(0),r=Object(u.a)(n,2),e=r[0],a=r[1],o=Object(Ct.useState)(!0),c=Object(u.a)(o,2),s=c[0],f=c[1],b=Object(Ct.useState)([]),l=Object(u.a)(b,2),d=l[0],v=l[1];return Object(Ct.useEffect)((function(){if(0!==d.length){var n=Math.round(.1*d.length),r=e%(2*(d.length+n));r<n?t.setWorld(d[0]):(r-=n)<d.length?t.setWorld(d[r]):(r-=d.length)<n?t.setWorld(d[d.length-1]):(r-=n,t.setWorld(d[d.length-1-r]))}}),[d,e]),Object(Ct.useEffect)((function(){if(!s){var t=setInterval((function(){return a((function(t){return t+1}))}),1e3/30);return function(){return clearInterval(t)}}}),[s]),Object(Ct.useEffect)((function(){f(!0),void 0!==t.worldStart&&t.setWorld(t.worldStart)}),[t.worldStart]),Object(Wt.jsxs)(Mt.a,{children:[Object(Wt.jsx)(At.a,{children:Object(Wt.jsx)(It.a,{variant:"contained",onClick:function(){if(void 0!==t.worldStart&&void 0!==t.worldEnd){var n=Date.now();v(i.createAnimation(t.worldStart,t.worldStart,t.worldEnd,t.worldEnd,t.config)),console.log((Date.now()-n)/1e3),f(!1)}},children:"Generate animation"})}),Object(Wt.jsxs)(At.a,{children:[Object(Wt.jsxs)(It.a,{variant:"contained",onClick:function(){return f(!s)},children:["paused: ",s?"yes":"no"]}),s&&Object(Wt.jsx)(It.a,{variant:"contained",onClick:function(){return a(e+1)},children:"Step"})]})]})},Rn=Object(gt.a)((function(t){return{gridItem:{padding:t.spacing(2),textAlign:"center"}}})),Gn=function(){var t=Rn(),n=Object(Ct.useState)(void 0),r=Object(u.a)(n,2),c=r[0],f=r[1],b=Object(Ct.useState)(void 0),l=Object(u.a)(b,2),d=l[0],v=l[1],h=Object(Ct.useState)(void 0),p=Object(u.a)(h,2),j=p[0],m=p[1],O=Object(Ct.useState)(void 0),g=Object(u.a)(O,2),x=g[0],w=g[1],y=Object(Ct.useState)(!1),M=Object(u.a)(y,2),A=M[0],E=M[1],S=Object(Ct.useState)({subdivideIterations:10,optimizeIterations:10,contractionType:i.ContractionType.Fibers,contractIterations:10,minimizeAccelerationIterations:100,offset:1.5,slack:2,friction:.1,overlapPenalty:1e3,gravity:1,botMass:1,dt:1}),k=Object(u.a)(S,2),C=k[0],V=k[1],I=void 0===c||void 0===d?[0,0,0]:function(t,n){var r=a.merge(o.boundingBox(t),o.boundingBox(n));return e.multiplyScalar(e.add(r.min,r.max),.5)}(c,d);return Object(Wt.jsx)(Wt.Fragment,{children:Object(Wt.jsxs)(xt.a,{container:!0,item:!0,xs:11,children:[Object(Wt.jsx)(xt.a,{item:!0,xs:4,style:{height:"97vh",overflowX:"hidden",overflowY:"scroll"},children:Object(Wt.jsxs)(xt.a,{container:!0,direction:"column",children:[Object(Wt.jsx)("b",{style:{fontSize:20},children:"Microbots"}),Object(Wt.jsx)(xt.a,{item:!0,className:t.gridItem,children:Object(Wt.jsx)(qn,{onSelect:function(t,n){f(t),v(n),m(t),w(t)}})}),Object(Wt.jsxs)(xt.a,{item:!0,className:t.gridItem,children:[Object(Wt.jsx)("b",{children:"Animation"}),Object(Wt.jsx)("br",{}),Object(Wt.jsx)(wt.a,{control:Object(Wt.jsx)(yt.a,{checked:A,onChange:function(t){return E(t.target.checked)}}),label:"Dynamic"}),A?Object(Wt.jsx)(Tt,{worldStart:c,worldEnd:d,world:j,worldPrev:x,setWorld:m,setWorldPrev:w,config:C}):Object(Wt.jsx)($n,{worldStart:c,worldEnd:d,setWorld:m,config:C})]}),Object(Wt.jsxs)(xt.a,{item:!0,className:t.gridItem,children:[Object(Wt.jsx)("b",{children:"Extra options"}),Object(Wt.jsx)(Mt.a,{children:Object.entries(C).map((function(t){var n=Object(u.a)(t,2),r=n[0],e=n[1];return Object(Wt.jsx)(At.a,{children:"contractionType"===r?Object(Wt.jsx)(Et.a,{value:e,onChange:function(t){V(zt()(C,Object(s.a)({},r,{$set:t.target.value})))},children:Object.entries(i.ContractionType).filter((function(t){var n=Object(u.a)(t,1)[0];return isNaN(Number(n))})).map((function(t){var n=Object(u.a)(t,2),r=n[0],e=n[1];return Object(Wt.jsx)(St.a,{value:e,children:r},r)}))}):Object(Wt.jsx)(kt.a,{type:"number",label:r,value:e,onChange:function(t){return V(zt()(C,Object(s.a)({},r,{$set:Math.max(parseFloat(t.target.value),0)})))}})},r)}))})]})]})}),Object(Wt.jsx)(xt.a,{item:!0,xs:5,children:Object(Wt.jsx)(Xt,{worldStart:c,world:j,center:I})})]})})},Jn=r(15);r.n(Jn).a.render(Object(Wt.jsx)(Vt.a.StrictMode,{children:Object(Wt.jsx)(Gn,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.8edc7f38.chunk.js.map