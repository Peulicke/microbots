(this.webpackJsonpmicrobots=this.webpackJsonpmicrobots||[]).push([[0],{78:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"newVec3",(function(){return f})),n.d(r,"clone",(function(){return b})),n.d(r,"add",(function(){return d})),n.d(r,"addEq",(function(){return l})),n.d(r,"sub",(function(){return v})),n.d(r,"subEq",(function(){return p})),n.d(r,"multiplyScalar",(function(){return h})),n.d(r,"dot",(function(){return j})),n.d(r,"length",(function(){return m})),n.d(r,"dist",(function(){return O})),n.d(r,"normalize",(function(){return g})),n.d(r,"dir",(function(){return w})),n.d(r,"min",(function(){return x})),n.d(r,"max",(function(){return y}));var a={};n.r(a),n.d(a,"merge",(function(){return I}));var o={};n.r(o),n.d(o,"newWorld",(function(){return U})),n.d(o,"clone",(function(){return Y})),n.d(o,"displacement",(function(){return et})),n.d(o,"neighbors",(function(){return nt})),n.d(o,"gradient",(function(){return rt})),n.d(o,"connections",(function(){return ot})),n.d(o,"boundingBox",(function(){return it}));var i={};n.r(i),n.d(i,"ContractionType",(function(){return c})),n.d(i,"createAnimation",(function(){return gt}));var c,s=n(12),u=n(10),f=function(t,e,n){return[t,e,n]},b=function(t){return[t[0],t[1],t[2]]},d=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]},l=function(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]},v=function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},p=function(t,e){t[0]-=e[0],t[1]-=e[1],t[2]-=e[2]},h=function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},j=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},m=function(t){return Math.sqrt(j(t,t))},O=function(t,e){return m(v(t,e))},g=function(t){return h(t,1/m(t))},w=function(t,e){return g(v(t,e))},x=function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.min(t[2],e[2])]},y=function(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1]),Math.max(t[2],e[2])]},M=function(t,e){for(var n=0;n<3;++n)for(var r=0;r<3;++r)t[n][r]+=e[n][r]},A=function(t,e){for(var n=0;n<3;++n)for(var r=0;r<3;++r)t[n][r]*=e},E=function(t,e){for(var n=[0,0,0],r=0;r<3;++r)for(var a=0;a<3;++a)n[r]+=t[r][a]*e[a];return n},S=function(t,e){return n=f(t[0]*e[0],t[0]*e[1],t[0]*e[2]),r=f(t[1]*e[0],t[1]*e[1],t[1]*e[2]),a=f(t[2]*e[0],t[2]*e[1],t[2]*e[2]),[n,r,a];var n,r,a},k=function(t){return{pos:b(t.pos),fixed:t.fixed}},C=function(t,e,n,r,a,o){return function(t,e,n,r,a){var o=1e-10,i=e.time-t.time,c=a-t.time,s=a-e.time,u=n.time-e.time,f=n.time-a,b=r.time-a,l=i*c+o,v=c*s+o,p=s*u+o,j=u*f+o,m=f*b+o,O=b*(r.time-n.time)+o,g=1/(j*p),w=g+1/Math.pow(v,2)+1/Math.pow(p,2),x=g+1/Math.pow(j,2)+1/Math.pow(m,2),y=-1/(l*v*(w+x)),M=(w+1/(l*v))/(w+x),A=(x+1/(m*O))/(w+x),E=-1/(m*O*(w+x)),S=h(t.pos,y),k=h(e.pos,M),C=h(n.pos,A),V=h(r.pos,E);return d(d(d(S,k),C),V)}({pos:n,time:t-2*e},{pos:r,time:t-e},{pos:a,time:t+e},{pos:o,time:t+2*e},t)},V=function(t){var e=[.5,.5,.5];return{min:v(t.pos,e),max:d(t.pos,e)}},I=function(t,e){return{min:x(t.min,e.min),max:y(t.max,e.max)}},z=n(2),P=function(t,e){for(var n=0;n<t.length;++n)e[n]=t[n]},W=function(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n},F=function(t,e,n){for(var r=0;r<t.length;++r)t[r]+=e[r]*n},T=function(t,e,n){for(var r=0;r<n.length;++r)n[r]=0;for(var a=0;a<t.length;++a)for(var o=0;o<t[a].length;++o){var i=t[a][o][0],c=t[a][o][1];n[a]+=c*e[i],a!==i&&(n[i]+=c*e[a])}},D=function(t,e){for(var n=0;n<e.length;++n)e[n]*=t[Math.floor(n/3)]},B=function(t,e){var n=Array(e.length);P(e,n);var r=function(t,e){for(var n=Array(e.length/3).fill(0),r=0;r<t.length;++r)for(var a=0;a<t[r].length;++a){var o=Object(u.a)(t[r][a],2),i=o[0],c=o[1];Math.floor(r/3)===Math.floor(i/3)&&(n[Math.floor(r/3)]+=c,r!==i&&(n[Math.floor(i/3)]+=c))}for(var s=0;s<n.length;++s)n[s]=Math.sqrt(Math.sqrt(3/n[s]));return n}(t,n);!function(t,e){for(var n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r){var a=e[n][r][0];e[n][r][1]*=t[Math.floor(n/3)],e[n][r][1]*=t[Math.floor(a/3)]}}(r,t),D(r,n);var a=function(t,e){var n=Array(e.length).fill(0),r=Array(e.length);P(e,r);var a=Array(e.length);T(t,n,a),F(r,a,-1);var o=Array(r.length),i=Array(o.length);P(r,o);for(var c=W(r,r),s=0;s<20;++s){T(t,o,a);var u=c/W(o,a);F(n,o,u),F(r,a,-u);var f=W(r,r);P(o,i),P(r,o),F(o,i,f/c),c=f}return n}(t,n);return D(r,a),a},N=n(31),q=n(3),R=n(9),$=function(t){return((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[1][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*-t[2][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*-t[4][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[3][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*-t[4][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*t[0][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[1][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[3][3])-(((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[2][3]+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[4][3])+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[0][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[4][3])))},G=function(){function t(e,n,r){Object(q.a)(this,t),this.vertices=void 0,this.adjacent=void 0,this.boundary=void 0,this.lastVisited=void 0,this.vertices=e,this.adjacent=n,this.boundary=r,this.lastVisited=-1}return Object(R.a)(t,[{key:"flip",value:function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e}}]),t}(),J=function t(e,n,r){Object(q.a)(this,t),this.vertices=void 0,this.cell=void 0,this.index=void 0,this.vertices=e,this.cell=n,this.index=r},L=function(){function t(e,n){var r=this;Object(q.a)(this,t),this.vertices=void 0,this.simplices=void 0,this.interior=void 0,this.tuple=void 0,this.orient=void 0,this.vertices=e,this.simplices=n,this.interior=n.filter((function(t){return!t.boundary})),this.tuple=Object(z.a)(this.vertices),this.orient=function(){return $(r.tuple)}}return Object(R.a)(t,[{key:"handleBoundaryDegeneracy",value:function(t,e){var n=this.vertices.length-1,r=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-n;o.length>0;){var i=o.pop();if(void 0===i)break;for(var c=i.adjacent,s=0;s<=4;++s){var u=c[s];if(u.boundary&&!(u.lastVisited<=-n)){for(var f=u.vertices,b=0;b<=4;++b){var d=f[b];r[b]=d<0?e:a[d]}var l=this.orient();if(l>0)return u;u.lastVisited=-n,0===l&&o.push(u)}}}return null}},{key:"walk",value:function(t){for(var e=this.vertices.length-1,n=this.vertices,r=this.tuple,a=this.interior.length-1,o=this.interior[a];!o.boundary;){for(var i=o.vertices,c=o.adjacent,s=0;s<=4;++s)r[s]=n[i[s]];o.lastVisited=e;for(var u=0;u<=4;++u){var f=c[u];if(!(f.lastVisited>=e)){var b=r[u];r[u]=t;var d=this.orient();if(r[u]=b,d<0){o=f;break}f.boundary?f.lastVisited=-e:f.lastVisited=e}}}return o}},{key:"addPeaks",value:function(t,e){var n=this.vertices.length-1,r=this.vertices,a=this.tuple,o=this.interior,i=this.simplices,c=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,o.push(e);for(var s=[];c.length>0;){var u=c.pop();if(void 0===u)break;var f=u.vertices,b=u.adjacent,d=f.indexOf(n);if(!(d<0))for(var l=0;l<=4;++l)if(l!==d){var v=b[l];if(v.boundary&&!(v.lastVisited>=n)){var p=v.vertices;if(v.lastVisited!==-n){for(var h=0,j=0;j<=4;++j)p[j]<0?(h=j,a[j]=t):a[j]=r[p[j]];if(this.orient()>0){p[h]=n,v.boundary=!1,o.push(v),c.push(v),v.lastVisited=n;continue}v.lastVisited=-n}var m=v.adjacent,O=f.slice(),g=b.slice(),w=new G(O,g,!0);i.push(w);var x=m.indexOf(u);if(!(x<0)){m[x]=w,g[d]=v,O[l]=-1,g[l]=u,b[l]=w,w.flip();for(var y=0;y<=4;++y){var M=O[y];if(!(M<0||M===n)){for(var A=new Array(3),E=0,S=0;S<=4;++S){var k=O[S];k<0||S===y||(A[E++]=k)}s.push(new J(A,w,y))}}}}}}s.sort((function(t,e){return function(t,e){var n=t[0]+t[1],r=e[0]+e[1],a=n+t[2]-(r+e[2]);if(a)return a;var o=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]);return(a=Math.min(o,t[2])-Math.min(i,e[2]))||Math.min(o+t[2],n)-Math.min(i+e[2],r)}(t.vertices,e.vertices)}));for(var C=0;C+1<s.length;C+=2){var V=s[C],I=s[C+1],z=V.index,P=I.index;z<0||P<0||(V.cell.adjacent[V.index]=I.cell,I.cell.adjacent[I.index]=V.cell)}}},{key:"insert",value:function(t){var e=this.vertices;e.push(t);var n=this.walk(t);if(n){for(var r=this.tuple,a=0;a<=4;++a){var o=n.vertices[a];r[a]=o<0?t:e[o]}var i=this.orient();if(!(i<0)){if(0===i){var c=this.handleBoundaryDegeneracy(n,t);if(!c)return;n=c}this.addPeaks(t,n)}}}},{key:"boundary",value:function(){for(var t=[],e=this.simplices,n=e.length,r=0;r<n;++r){var a=e[r];if(a.boundary){for(var o=new Array(4),i=a.vertices,c=0,s=0,u=0;u<=4;++u)i[u]>=0?o[c++]=i[u]:s=u&&1;if(1===s){var f=o[0];o[0]=o[1],o[1]=f}t.push(o)}}return t}}]),t}(),X=function t(e,n){Object(q.a)(this,t),this.point=void 0,this.index=void 0,this.point=e,this.index=n},H=function(t){var e=t.length;if(0===e)return[];for(var n=new Array(e),r=1,a=0;a<e;++a){for(var o=t[a],i=new Array(4),c=0,s=0;s<3;++s){var u=o[s];i[s]=u,c+=u*u}i[3]=c,n[a]=new X(i,a),r=Math.max(c,r)}n.sort((function(t,e){for(var n=0;n<5;++n){var r=e.point[n]-t.point[n];if(r)return r}return 0})),e=n.length;for(var f=new Array(e+3+1),b=new Array(e+3+1),d=16*r,l=new Array(4),v=0;v<=3;++v)l[v]=0;l[3]=d,f[0]=l.slice(),b[0]=-1;for(var p=0;p<=3;++p){var h=l.slice();h[p]=1,f[p+1]=h,b[p+1]=-1}for(var j=0;j<e;++j){var m=n[j];f[j+3+1]=m.point,b[j+3+1]=m.index}var O=function(t){var e=t.length;if(0===e)throw new Error("Must have at least d+1 points");var n=t[0].length;if(e<=n)throw new Error("Must input at least d+1 points");var r=t.slice(0,n+1),a=$(r);if(0===a)throw new Error("Input not in general position");for(var o=new Array(n+1),i=0;i<=n;++i)o[i]=i;a<0&&(o[0]=1,o[1]=0);for(var c=new G(o,new Array(n+1),!1),s=c.adjacent,u=new Array(n+2),f=0;f<=n;++f){for(var b=o.slice(),d=0;d<=n;++d)d===f&&(b[d]=-1);var l=b[0];b[0]=b[1],b[1]=l;var v=new G(b,new Array(n+1),!0);s[f]=v,u[f]=v}u[n+1]=c;for(var p=0;p<=n;++p)for(var h=s[p].vertices,j=s[p].adjacent,m=0;m<=n;++m){var O=h[m];if(O<0)j[m]=c;else for(var g=0;g<=n;++g)s[g].vertices.indexOf(O)<0&&(j[m]=s[g])}for(var w=new L(r,u),x=n+1;x<e;++x)w.insert(t[x]);return w.boundary()}(f);O=O.filter((function(t){for(var e=0;e<=3;++e){var n=b[t[e]];if(n<0)return!1;t[e]=n}return!0}));for(var g=0;g<O.length;++g){var w=O[g],x=w[0];w[0]=w[1],w[1]=x}return O},U=function(){return{bots:[]}},Y=function(t){return{bots:t.bots.map((function(t){return k(t)}))}},K=function(t,e,n){return n<t-e/2?1:n>t+e/2?0:2*(n+e-t)*Math.pow(t+e/2-n,2)/Math.pow(e,3)},Q=function(t,e,n){var r=m(n),a=h(n,Math.sqrt(K(t,e,r))/r);return S(a,a)},Z=function(t,e,n){var r=S(n,n);return A(r,function(t,e,n){return K(t,e,n)+1e-4}(t,e,m(n))/j(n,n)),r},_=function(t,e,n,r){var a=1e-5,o=r[n],i=b(r);i[n]=o+a;var c=b(r);c[n]=o-a;var s=Q(t,e,i);return function(t,e){for(var n=0;n<3;++n)for(var r=0;r<3;++r)t[n][r]-=e[n][r]}(s,Q(t,e,c)),A(s,1/2e-5),s},tt=function(t,e,n,r,a){for(var o=Object(z.a)(Array(3*r.bots.length)).map((function(){return[]})),i=0;i<r.bots.length;++i)for(var c=Z(t,e,f(r.bots[i].pos[1]+.5,0,0)),s=Z(t,e,f(0,r.bots[i].pos[1]+.5,0)),u=Z(t,e,f(0,0,r.bots[i].pos[1]+.5)),b=0;b<3;++b)for(var d=b;d<3;++d)o[3*i+b].push([3*i+d,(c[b][d]+u[b][d])*n+s[b][d]]);for(var l=function(n){a[n].forEach((function(a){for(var i=function(t,e,n,r){var a=v(r.pos,n.pos);return Q(t,e,a)}(t,e,r.bots[n],r.bots[a]),c=0;c<3;++c)for(var s=0;s<3;++s)o[3*n+c].push([3*a+s,-i[c][s]]),c>s||(o[3*n+c][s-c][1]+=i[c][s],o[3*a+c][s-c][1]+=i[c][s])}))},p=0;p<r.bots.length;++p)l(p);return o},et=function(t,e,n,r,a,o,i,c,s,u){var f=function(t,e,n,r,a,o){var i=Object(z.a)(Array(3*o.bots.length)).map((function(){return 0}));return o.bots.forEach((function(c,s){for(var u=0;u<3;++u){var f=(o.bots[s].pos[u]-t.bots[s].pos[u])/n,b=((e.bots[s].pos[u]-o.bots[s].pos[u])/n-f)/n;i[3*s+u]=((1===u?-1:0)-b)*r*a}})),i}(r,a,o,i,c,s),b=tt(t,e,n,s,u);return B(b,f)},nt=function(t,e,n,r){return n[r].filter((function(t){return t>r})).filter((function(n){return O(e.bots[r].pos,e.bots[n].pos)<t}))},rt=function(t,e,n,r,a,o,i,c,s,u,b,d,O,g,w){for(var x=Object(z.a)(Array(O.bots.length)).map((function(){return[0,1,2].map((function(){return 0}))})),y=function(r){for(var a=function(a){var i=_(t,e,a,f(O.bots[r].pos[1]+.5,0,0));A(i,n);var c=_(t,e,a,f(0,O.bots[r].pos[1]+.5,0)),s=_(t,e,a,f(0,0,O.bots[r].pos[1]+.5));A(s,n);var u=f(o[3*r],o[3*r+1],o[3*r+2]);M(i,c),M(i,s);var b=j(u,E(i,u));x[r][a]+=b,g[r].forEach((function(n){var i=function(t,e,n,r,a){return _(t,e,r,v(n.pos,a.pos))}(t,e,O.bots[r],a,O.bots[n]),c=f(o[3*n],o[3*n+1],o[3*n+2]);p(c,u);var s=E(i,c),b=j(c,s);x[r][a]+=b,x[n][a]-=b}))},i=0;i<3;++i)a(i)},S=0;S<O.bots.length;++S)y(S);for(var k=Object(z.a)(Array(O.bots.length)).map((function(){return f(0,0,0)})),V=0;V<O.bots.length;++V)for(var I=0;I<3;++I)k[V][I]=-x[V][I]+(-a[3*V+I]+2*o[3*V+I]-i[3*V+I])/Math.pow(d,2)*2;for(var P=0;P<O.bots.length;++P)if(!(O.bots[P].pos[1]>.5)){var W=O.bots[P].pos[1]+.5;k[P][1]+=2*r*(2*(W-2))}for(var F=function(t){g[t].forEach((function(e){var n=v(O.bots[e].pos,O.bots[t].pos),a=m(n);a>1||(n=h(n,r*(2*(a-2)/a)),p(k[t],n),l(k[e],n))}))},T=0;T<O.bots.length;++T)F(T);for(var D=0;D<O.bots.length;++D){var B=C(w,d,c.bots[D].pos,s.bots[D].pos,u.bots[D].pos,b.bots[D].pos),N=v(B,O.bots[D].pos);l(k[D],h(N,-.1))}return k},at=new N.a(123),ot=function(t){return function(t){var e=H(t),n=t.map((function(){return{}}));return e.forEach((function(t){for(var e=0;e<4;++e)for(var r=e+1;r<4;++r)n[t[e]][t[r]]=!0,n[t[r]][t[e]]=!0})),n.map((function(t){return Object.keys(t).map((function(t){return Number(t)}))}))}([].concat(Object(z.a)(t),Object(z.a)(t.map((function(t){return[t[0],-.5,t[2]]})))).map((function(t){return d(t,h(f(at.next()-.5,at.next()-.5,at.next()-.5),.1))}))).map((function(e){return e.map((function(e){return e>=t.length?-1:e}))})).slice(0,t.length)},it=function(t){if(0===t.bots.length)return{min:[0,0,0],max:[0,0,0]};var e=V(t.bots[0]);return t.bots.forEach((function(t){e=I(e,V(t))})),e},ct=function(){function t(e){Object(q.a)(this,t),this.comparator=void 0,this.elements=void 0,this.comparator=e,this.elements=[]}return Object(R.a)(t,[{key:"peek",value:function(){return this.elements[0]}},{key:"pop",value:function(){var t=this.peek();if(void 0!==t){var e=this.elements.pop();if(void 0!==e){var n=this.size();if(0===n)return t;this.elements[0]=e;for(var r=0;r<n;){var a=r,o=2*r+1,i=2*r+2;if(o<n&&this.compare(o,a)>=0&&(a=o),i<n&&this.compare(i,a)>=0&&(a=i),a===r)break;this.swap(a,r),r=a}return t}}}},{key:"push",value:function(t){for(var e=this.elements.push(t)-1;e>0;){var n=Math.floor((e-1)/2);if(this.compare(e,n)<=0)break;this.swap(n,e),e=n}}},{key:"size",value:function(){return this.elements.length}},{key:"compare",value:function(t,e){return this.comparator(this.elements[t],this.elements[e])}},{key:"swap",value:function(t,e){var n=this.elements[t];this.elements[t]=this.elements[e],this.elements[e]=n}}]),t}(),st=function(t){for(var e=t.dist/2,n=t;void 0!==n.prev&&n.prev.dist>e;n=n.prev);if(void 0===n.prev)return n.pos;var r=n.prev,a=e-r.dist,o=a/(a+(n.dist-e));return d(h(r.pos,1-o),h(n.pos,o))},ut=function(t){return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]},ft=function(t,e,n){return h(function(t,e,n){var r=h(d(e,n),.5);if(m(v(n,e))<1)return r;var a=ut(e),o=ut(n),i={},c=new ct((function(t,e){return e.distEstimate-t.distEstimate}));c.push({dist:0,distEstimate:0,pos:a,prev:void 0});for(var s,f,b=0;b<1e4;){var l=c.pop();if(void 0===l)break;var p=Object(u.a)(l.pos,3),j=p[0],O=p[1],g=p[2];if(!(O<1.5)&&!0!==((t[j]||{})[O]||{})[g]&&void 0===((i[j]||{})[O]||{})[g]){if(void 0===i[j]&&(i[j]={}),void 0===i[j][O]&&(i[j][O]={}),i[j][O][g]=l,f=o,(s=l.pos)[0]===f[0]&&s[1]===f[1]&&s[2]===f[2])return st(l);++b;for(var w=-1;w<=1;++w)for(var x=-1;x<=1;++x)for(var y=-1;y<=1;++y)if(0!==w||0!==x||0!==y){var M=[w,x,y],A=d(l.pos,M),E=l.dist+m(M);c.push({dist:E,distEstimate:E+m(v(o,A)),pos:A,prev:l})}}}return r}(t,h(e,3),h(n,3)),1/3)},bt=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},dt=function(t){return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]},lt=function(t,e,n){for(var r=dt(e),a=Object(u.a)(r,3),o=a[0],i=a[1],c=a[2],s=-1;s<=1;++s)for(var f=-1;f<=1;++f)for(var b=-1;b<=1;++b){var d=o+s,l=i+f,v=c+b;void 0===t[d]&&(t[d]={}),void 0===t[d][l]&&(t[d][l]={}),void 0===t[d][l][v]&&(t[d][l][v]=[]),t[d][l][v][n]=!0}},vt=function(t,e,n){for(var r=dt(e),a=Object(u.a)(r,3),o=a[0],i=a[1],c=a[2],s=-1;s<=1;++s)for(var f=-1;f<=1;++f)for(var b=-1;b<=1;++b){var d=i+f,l=c+b;delete t[o+s][d][l][n]}},pt=function(t,e,n){var r=U();return r.bots=e.bots.map((function(e,r){return function(e,n){var r=k(e);return r.pos=ft(t,e.pos,n.pos),r}(e,n.bots[r])})),r},ht=function(t,e,n,r,a,o,i,c,s,u){for(var b=.2/o.length,l=o.map((function(t){return t.bots.map((function(){return f(0,0,0)}))})),v=o.map((function(t){return ot(t.bots.map((function(t){return t.pos})))})),p=o.map((function(t,e){return t.bots.map((function(n,r){return nt(a,t,v[e],r)}))})),j=function(a){var u=function(t,e,n,r,a,o,i,c,s){for(var u=Object(z.a)(Array(a.length)).map((function(){return Object(z.a)(Array(a[0].bots.length)).map((function(){return f(0,0,0)}))})),b=a.map((function(){return Object(z.a)(Array(3*a[0].bots.length)).map((function(){return 0}))})),d=0;d<a.length;++d){var l=a[Math.max(d-1,0)],v=a[Math.min(d+1,a.length-1)];b[d]=et(t,e,n,l,v,o,i,c,a[d],s[d])}for(var p=1;p<a.length;++p){var h=a[Math.max(p-2,0)],j=a[p-1],m=a[Math.min(p+1,a.length-1)],O=a[Math.min(p+2,a.length-1)];u[p]=rt(t,e,n,r,b[p-1],b[p],b[Math.min(p+1,a.length-1)],h,j,m,O,o,a[p],s[p],p/(a.length-1))}return u}(t,e,n,r,o,i,c,s,p);u=u.map((function(t){return t.map((function(t){return h(t,-b/(1e-4+m(t)))}))})),o.forEach((function(t,e){e<=1||e>=o.length-2||t.bots.forEach((function(t,n){l[e][n]=d(l[e][n],u[e][n]),l[e][n]=h(l[e][n],.9),t.pos=d(t.pos,l[e][n])}))}))},O=0;O<u;++O)j()},jt=function(t,e){return m(v(e.pos,t.pos))};!function(t){t[t.Mst=0]="Mst",t[t.Fibers=1]="Fibers",t[t.Delaunay=2]="Delaunay"}(c||(c={}));var mt=function(t,e,n){for(var r=function(e){var r=ot(t.bots.map((function(t){return t.pos}))),a=[];r.forEach((function(e,o){e.forEach((function(e){-1!==e&&o>=e||function(t,e,n,r,a){if(a===c.Delaunay)return!0;if(a===c.Mst){if(-1===r){for(var o=t.bots[n].pos[1]+.5,i=Object(z.a)(Array(t.bots.length)).map((function(){return!1})),s=[],u=0;u<t.bots.length;++u)t.bots[u].pos[1]+.5<o&&s.push(u);for(;s.length>0;){var f=s.shift();if(void 0===f)break;if(!i[f]){i[f]=!0;for(var b=0;b<e[f].length;++b){var d=e[f][b];-1!==d&&O(t.bots[f].pos,t.bots[d].pos)<o&&s.push(d)}}}return!i[n]}for(var l=O(t.bots[n].pos,t.bots[r].pos),v=Object(z.a)(Array(t.bots.length)).map((function(){return!1})),p=[],h=0;h<t.bots.length;++h)t.bots[h].pos[1]+.5<l&&p.push(h);for(;p.length>0;){var j=p.shift();if(void 0===j)break;if(!v[j]){v[j]=!0;for(var m=0;m<e[j].length;++m){var g=e[j][m];-1!==g&&O(t.bots[j].pos,t.bots[g].pos)<l&&p.push(g)}}}return!(v[n]&&v[r])}if(-1===r){var w=t.bots[n];return!t.bots.some((function(t,e){return n!==e&&O(t.pos,[w.pos[0],-.5,t.pos[2]])<w.pos[1]+.5&&O(w.pos,t.pos)<w.pos[1]+.5}))}for(var x=0;x<t.bots.length;++x)if(x!==n&&x!==r){if(jt(t.bots[n],t.bots[r])>t.bots[n].pos[1]+.5&&jt(t.bots[n],t.bots[r])>t.bots[r].pos[1]+.5)return!1;if(jt(t.bots[n],t.bots[r])>jt(t.bots[n],t.bots[x])&&jt(t.bots[n],t.bots[r])>jt(t.bots[x],t.bots[r]))return!1;if(jt(t.bots[n],t.bots[r])>jt(t.bots[r],t.bots[x])&&jt(t.bots[n],t.bots[r])>jt(t.bots[n],t.bots[x]))return!1}return!0}(t,r,o,e,n)&&a.push([o,e])}))})),a.forEach((function(e){var n=Object(u.a)(e,2),r=n[0],a=n[1];if(-1!==a){var o=v(t.bots[a].pos,t.bots[r].pos),i=m(o);if(!(i<1)){var c=h(o,(1-i)/i/2*.2);p(t.bots[r].pos,c),l(t.bots[a].pos,c)}}else t.bots[r].pos[1]+=.2*(.5-t.bots[r].pos[1])}))},a=0;a<e;++a)r()},Ot=function(t,e){for(var n=function(n){t[n].bots.forEach((function(r,a){var o=C((n-1)/(t.length-3),e,t[n-2].bots[a].pos,t[n-1].bots[a].pos,t[n+1].bots[a].pos,t[n+2].bots[a].pos);r.pos=d(h(r.pos,.5),h(o,.5))}))},r=2;r<t.length-2;++r)n(r)},gt=function(t,e,n,r,a){for(var o=[t,e,n,r],i=function(t){var e=Object(z.a)(Array(7)).map((function(t,e){return 3*(e/3-1)*.5})),n={};return t.forEach((function(t){e.forEach((function(r){e.forEach((function(a){e.forEach((function(e){var o=ut(d(h(t.pos,3),[r,a,e])),i=Object(u.a)(o,3),c=i[0],s=i[1],f=i[2];void 0===n[c]&&(n[c]={}),void 0===n[c][s]&&(n[c][s]={}),n[c][s][f]=!0}))}))}))})),n}(e.bots.filter((function(t){return t.fixed}))),c=function(t){var e=o.map((function(t,e){return!(e<=1||e>=o.length-1)&&function(t,e,n,r){for(var a=0,o=0;o<e.bots.length;++o){var i=h(v(e.bots[o].pos,t.bots[o].pos),1/r),c=h(v(n.bots[o].pos,e.bots[o].pos),1/r),s=h(v(c,i),1/r);a=Math.max(a,m(s))}return a}(o[e-1],t,o[e+1],a.dt)>.2}));if(!e.some((function(t){return t})))return"break";var n=Object(z.a)(o);o=[o[0]],e.forEach((function(t,e){0!==e&&(t&&o.push(pt(i,o[o.length-1],n[e])),o.push(n[e]))})),console.log(t,o.length);for(var r=o.map((function(t){return function(t){for(var e=t.map((function(t){return b(t.pos)})),n={},r=0;r<t.length;++r)lt(n,t[r].pos,r);return function(){for(var r=0;r<t.length;++r)bt(e[r],t[r].pos)||(vt(n,e[r],r),lt(n,t[r].pos,r));for(var a=0;a<t.length;++a)for(var o=dt(e[a]),i=Object(u.a)(o,3),c=i[0],s=i[1],f=i[2],b=Object.keys(n[c][s][f]).map((function(t){return Number(t)})),d=0;d<b.length;++d){var j=b[d],O=t[j];if(t[a]!==O){var g=v(O.pos,t[a].pos),w=m(g);if(!(w>1)){var x=h(g,(1-w)/w/2);p(t[a].pos,x),l(O.pos,x)}}}}}(t.bots)})),c=0;c<a.contractIterations;++c){for(var s=2;s<o.length-2;++s)mt(o[s],1,a.contractionType);o.map((function(t,e){return r[e]()}))}if(ht(a.offset,a.slack,a.friction,a.overlapPenalty,a.neighborRadius,o,a.dt,a.gravity,a.botMass,a.optimizeIterations),t>3)for(var f=0;f<a.minimizeAccelerationIterations;++f)Ot(o,a.dt),o.map((function(t,e){return r[e]()}));o.forEach((function(t){return t.bots.forEach((function(t,e){t.fixed&&(t.pos=b(o[0].bots[e].pos))}))}))},s=0;s<a.subdivideIterations;++s){if("break"===c(s))break}return console.log("done"),o.slice(1,o.length-1)},wt=n(118),xt=n(119),yt=n(124),Mt=n(122),At=n(110),Et=n(79),St=n(120),kt=n(117),Ct=n(121),Vt=n(0),It=n.n(Vt),zt=n(114),Pt=n(25),Wt=n.n(Pt),Ft=n(5),Tt=new N.a(123),Dt=function(t){var e=Object(Vt.useState)(!0),n=Object(u.a)(e,2),a=n[0],o=n[1],c=Object(Vt.useState)([]),s=Object(u.a)(c,2),f=s[0],b=s[1],d=function(){if(void 0!==t.world&&void 0!==t.worldPrev&&void 0!==t.worldEnd)if(0===f.length||t.world.bots.map((function(t,e){return r.sub(t.pos,f[0].bots[e].pos)})).map((function(t){return r.dot(t,t)})).reduce((function(t,e){return t+e}),0)>1e-5)b(i.createAnimation(t.worldPrev,t.world,t.worldEnd,t.worldEnd,t.config));else{var e=f;e.length>1&&(e=e.slice(1)),t.setWorldPrev(t.world),t.setWorld(e[0]),b(e)}};return Object(Vt.useEffect)((function(){if(!a){var t=setInterval(d,1e3/30);return function(){return clearInterval(t)}}}),[t,a,f]),Object(Vt.useEffect)((function(){o(!0),void 0!==t.worldStart&&(t.setWorld(t.worldStart),b([]))}),[t.worldStart]),Object(Ft.jsxs)(At.a,{children:[Object(Ft.jsx)(Et.a,{children:Object(Ft.jsxs)(zt.a,{variant:"contained",onClick:function(){o(!a)},children:["paused: ",a?"yes":"no"]})}),Object(Ft.jsx)(Et.a,{children:Object(Ft.jsx)(zt.a,{variant:"contained",onClick:function(){void 0!==t.world&&t.setWorld(Wt()(t.world,{bots:{$set:t.world.bots.map((function(t){return Wt()(t,{pos:{$set:r.add(t.pos,r.multiplyScalar(r.newVec3(Tt.next()-.5,Tt.next()-.5,Tt.next()-.5),2))}})}))}}))},children:"Disturb"})})]})},Bt=n(7),Nt=n.p+"static/media/grass.75422b3f.jpg",qt=n.p+"static/media/nx.484e0aff.png",Rt=n.p+"static/media/ny.6a6662a7.png",$t=n.p+"static/media/nz.ed736547.png",Gt=n.p+"static/media/px.c6e24cee.png",Jt=n.p+"static/media/py.a67deb40.png",Lt=n.p+"static/media/pz.39034444.png",Xt=function(){var t=new Bt.q,e=new Bt.n(2e3,2e3,8,8),n=(new Bt.u).load(Nt);n.wrapS=Bt.p,n.wrapT=Bt.p,n.repeat.set(100,100);var r=new Bt.k({map:n}),a=new Bt.i(e,r);a.rotateX(-Math.PI/2),a.castShadow=!1,a.receiveShadow=!0,t.add(a),t.add(new Bt.a(16777215,.4));var o=new Bt.f(16777215,.4);o.position.set(10,50,10),o.castShadow=!0,o.shadowCameraRight=50,o.shadowCameraLeft=-50,o.shadowCameraTop=50,o.shadowCameraBottom=-50,o.shadowMapWidth=1024,o.shadowMapHeight=1024,t.add(o);var i=[Gt,qt,Jt,Rt,Lt,$t].map((function(t){return(new Bt.u).load(t)})).map((function(t){return new Bt.j({map:t,fog:!1,side:Bt.b})})),c=new Bt.c(1e3,1e3,1e3),s=new Bt.i(c,i);return t.add(s),t},Ht=n(57),Ut=n(58),Yt=new Bt.x({antialias:!0});Yt.setClearColor("#87ceeb"),Yt.setSize(640,480),Yt.shadowMapEnabled=!0,Yt.shadowMapType=Bt.l;for(var Kt=function(t){var e=Object(Ut.a)(),n=Object(u.a)(e,2),a=n[0],o=n[1],i=.55*a,c=.8*o,f=Object(Vt.useState)(30),b=Object(u.a)(f,2),d=b[0],l=b[1],v=Object(Vt.useRef)(null),p=Object(Vt.useState)(),h=Object(u.a)(p,2),j=h[0],m=h[1],O=Object(Vt.useState)(),g=Object(u.a)(O,2),w=g[0],x=g[1],y=Object(Vt.useState)(),M=Object(u.a)(y,2),A=M[0],E=M[1],S=Object(Vt.useState)(10),k=Object(u.a)(S,2),C=k[0],V=k[1],I=Object(Vt.useState)(!1),z=Object(u.a)(I,2),P=z[0],W=z[1],F=Object(Vt.useState)([0,0,1]),T=Object(u.a)(F,2),D=T[0],B=T[1],N=function(){if(void 0!==w){var e=w.clone();e.aspect=640/480,e.updateProjectionMatrix();var n=document.createElement("a");Yt.render(t.scene,e),n.href=Yt.domElement.toDataURL().replace("image/png","image/octet-stream"),n.download="image.png",n.click()}};return Object(Vt.useEffect)((function(){var t=v.current;if(t){var e=new Bt.m(d,i/c,.1,1e3);e.position.set(10,10,10),e.lookAt(0,0,0),x(e);var n=new Bt.x({antialias:!0});n.setClearColor("#87ceeb"),n.setSize(i,c),n.shadowMapEnabled=!0,n.shadowMapType=Bt.l,t.appendChild(n.domElement),E(n);var r=new Ht.a(e,n.domElement);return r.enableDamping=!0,r.dampingFactor=.5,m(r),function(){t.removeChild(n.domElement)}}}),[v]),Object(Vt.useEffect)((function(){void 0!==w&&void 0!==A&&(w.aspect=i/c,w.updateProjectionMatrix(),A.setSize(i,c))}),[w,A,i,c]),Object(Vt.useEffect)((function(){if(j&&A&&w&&t.scene){var e=window.setInterval((function(){j.update(),A.render(t.scene,w)}),1e3/30);return function(){window.clearInterval(e)}}}),[j,A,w,t.scene]),Object(Vt.useEffect)((function(){P&&N()}),[t.world]),Object(Ft.jsxs)(Ft.Fragment,{children:[Object(Ft.jsx)("div",{ref:v}),Object(Ft.jsx)(zt.a,{variant:"contained",onClick:function(){if(void 0!==j){var e=t.center[0]-j.target.x,n=t.center[1]-j.target.y,r=t.center[2]-j.target.z;j.object.position.set(j.object.position.x+e,j.object.position.y+n,j.object.position.z+r),j.target.set(t.center[0],t.center[1],t.center[2])}},children:"Center camera"}),Object(Ft.jsx)("br",{}),Object(Ft.jsx)(Ct.a,{type:"number",label:"Camera distance",value:C,onChange:function(t){var e=Math.max(parseFloat(t.target.value),1);if(V(e),void 0!==w&&void 0!==j){var n=[j.object.position.x,j.object.position.y,j.object.position.z],a=[j.target.x,j.target.y,j.target.z],o=r.sub(n,a),i=r.normalize(o),c=r.multiplyScalar(i,e),s=r.add(a,c);j.object.position.set(s[0],s[1],s[2]),w.updateProjectionMatrix()}}}),Object(Ft.jsx)(Ct.a,{type:"number",label:"FOV",value:d,onChange:function(t){var e=Math.min(Math.max(parseFloat(t.target.value),1),179);l(e),void 0!==w&&(w.fov=e,w.updateProjectionMatrix())}}),D.map((function(t,e){return Object(Ft.jsx)(St.a,{value:t,onChange:function(t){B(Wt()(D,Object(s.a)({},e,{$set:parseFloat(t.target.value)})))},children:[-1,0,1].map((function(t){return Object(Ft.jsx)(kt.a,{value:t,children:t},t)}))},e)})),Object(Ft.jsxs)(zt.a,{variant:"contained",onClick:function(){if(void 0!==j){var t=[j.target.x,j.target.y,j.target.z],e=r.multiplyScalar(D,C),n=r.add(t,e);j.object.position.set(n[0],n[1],n[2])}},children:["Align (",D.join(","),")"]}),Object(Ft.jsx)("br",{}),Object(Ft.jsx)(yt.a,{control:Object(Ft.jsx)(Mt.a,{checked:P,onChange:function(t){return W(t.target.checked)}}),label:"Save screenshot on every frame"}),!P&&Object(Ft.jsx)(zt.a,{variant:"contained",onClick:N,children:"Save screenshot for this frame"})]})},Qt=function(t){var e=Object(Vt.useState)(Xt()),n=Object(u.a)(e,2),r=n[0],a=n[1],o=Object(Vt.useState)([]),i=Object(u.a)(o,2),c=i[0],s=i[1];return Object(Vt.useEffect)((function(){var e=t.world;void 0!==e&&c.length===e.bots.length&&e.bots.forEach((function(t,e){var n;(n=c[e].position).set.apply(n,Object(z.a)(t.pos))}))}),[t.world,c]),Object(Vt.useEffect)((function(){var e=t.worldStart;void 0!==e&&s(e.bots.map((function(t){return function(t,e){var n,r=new Bt.r(1,16,16);r.computeVertexNormals(),r.faces.forEach((function(t){return t.vertexColors=new Array(3).fill(!0).map((function(){return e}))}));var a=(new Bt.d).fromGeometry(r);delete a.attributes.uv;var o=new Bt.i(a,new Bt.k({color:e}));return o.geometry=a,(n=o.position).set.apply(n,Object(z.a)(t)),o.scale.set(.5,.5,.5),o.castShadow=!0,o.receiveShadow=!0,o}(t.pos,new Bt.e(t.fixed?"#808080":"#fa8072"))})))}),[t.worldStart]),Object(Vt.useEffect)((function(){var t=Xt();c.forEach((function(e){return t.add(e)})),a(t)}),[c]),Object(Ft.jsx)(Kt,{scene:r,center:t.center,world:t.world})},Zt=function(t,e){return t.map((function(t){return{pos:t,fixed:e}}))},_t=function(t){return{bots:t}},te=function(t,e,n,r){var a=Zt(e,!0),o=Zt(n,!1),i=Zt(r,!1);return{title:t,start:_t([].concat(Object(z.a)(a),Object(z.a)(o))),end:_t([].concat(Object(z.a)(a),Object(z.a)(i)))}},ee=[r.newVec3(0,0,0)],ne=0;ne<10;++ne){var re=Math.PI/2*(ne/10);ee.push(r.newVec3(ee[ne][0]+Math.cos(re),ee[ne][1]-Math.sin(re),0))}for(var ae=1;ae<11;++ae)ee.push(r.newVec3(-ee[ae][0],ee[ae][1],0));var oe=Math.min.apply(Math,Object(z.a)(ee.map((function(t){return t[1]}))));ee.forEach((function(t,e){return ee[e][1]=ee[e][1]-oe+.5}));for(var ie=te("Arc",[],[].concat(Object(z.a)(Object(z.a)(Array(11)).map((function(t,e){return r.newVec3(e,.5,0)}))),Object(z.a)(Object(z.a)(Array(10)).map((function(t,e){return r.newVec3(-e-1,.5,0)})))),ee),ce=[r.newVec3(0,0,0)],se=0;se<20;++se){var ue=Math.PI/2*(se/20);ce.push(r.newVec3(ce[se][0]+Math.cos(ue),ce[se][1]-Math.sin(ue),0))}for(var fe=1;fe<21;++fe)ce.push(r.newVec3(-ce[fe][0],ce[fe][1],0));var be=Math.min.apply(Math,Object(z.a)(ce.map((function(t){return t[1]}))));ce.forEach((function(t,e){return ce[e][1]=ce[e][1]-be+.5}));var de,le,ve,pe=te("Big arc",[],[].concat(Object(z.a)(Object(z.a)(Array(21)).map((function(t,e){return r.newVec3(e+15,.5,0)}))),Object(z.a)(Object(z.a)(Array(20)).map((function(t,e){return r.newVec3(-e-1-15,.5,0)})))),ce),he=te("Big cube",[],Object(z.a)(Array(8)).map((function(t,e){return Object(z.a)(Array(8)).map((function(t,n){return r.newVec3(e-3.5,.5,n-3.5)}))})).flat(),Object(z.a)(Array(4)).map((function(t,e){return Object(z.a)(Array(4)).map((function(t,n){return Object(z.a)(Array(4)).map((function(t,a){return r.newVec3(e-1.5,a+.5,n-1.5)}))}))})).flat().flat()),je=function(t,e){return Object(z.a)(Array(e)).map((function(e,n){return r.add(t,[0,n,0])}))},me=function(t,e){return Object(z.a)(Array(e)).map((function(e,n){return r.add(t,[0,0,n])}))},Oe=function(t,e,n){return[].concat(Object(z.a)(je(r.add(t,[-e,0,0]),n)),Object(z.a)(je(r.add(t,[e,0,0]),n)),Object(z.a)(function(t,e){return Object(z.a)(Array(e)).map((function(e,n){return r.add(t,[n,0,0])}))}(r.add(t,[1-e,n-1,0]),2*e-1)))},ge=te("Brachiation",[].concat(Object(z.a)(Oe([-10,.5,0],1,7)),Object(z.a)(Oe([10,.5,0],1,7)),Object(z.a)(Oe([0,7.5,0],11,5)),Object(z.a)((de=[0,.5,0],le=2,ve=12,[].concat(Object(z.a)(je(r.add(de,[0,0,-le]),ve)),Object(z.a)(je(r.add(de,[0,0,le]),ve)),Object(z.a)(me(r.add(de,[0,ve-1,1-le]),le-1)),Object(z.a)(me(r.add(de,[0,ve-1,1]),le-1)))))),je([-10,7.5,0],3),je([10,7.5,0],3)),we=te("Crane",[],[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,.5,0]],[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,2.5,0]]),xe=te("Cube",[],[[-1.5,.5,-1.5],[-.5,.5,-1.5],[.5,.5,-1.5],[1.5,.5,-1.5],[-1.5,.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[1.5,.5,-.5],[-1.5,.5,.5],[-.5,.5,.5],[.5,.5,.5],[1.5,.5,.5],[-1.5,.5,1.5],[-.5,.5,1.5],[.5,.5,1.5],[1.5,.5,1.5]],[[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5],[-.5,1.5,-.5],[.5,1.5,-.5],[.5,1.5,.5],[-.5,1.5,.5],[-.5,2.5,-.5],[.5,2.5,-.5],[.5,2.5,.5],[-.5,2.5,.5],[-.5,3.5,-.5],[.5,3.5,-.5],[.5,3.5,.5],[-.5,3.5,.5]]),ye=function(){return Object(z.a)(Array(13)).map((function(t,e){return Object(z.a)(Array(13)).map((function(t,n){return[e-6,.5,n-6]}))})).flat().filter((function(t){return Math.abs(t[0]+t[2])<2}))},Me=te("Floor transport",[],[].concat(Object(z.a)(ye()),Object(z.a)(Object(z.a)(Array(3)).map((function(t,e){return[-6,e+1.5,6]}))),Object(z.a)(Object(z.a)(Array(3)).map((function(t,e){return[6,e+1.5,-6]}))),[[-6,4.5,6]]),[].concat(Object(z.a)(ye()),Object(z.a)(Object(z.a)(Array(3)).map((function(t,e){return[-6,e+1.5,6]}))),Object(z.a)(Object(z.a)(Array(3)).map((function(t,e){return[6,e+1.5,-6]}))),[[6,4.5,-6]])),Ae=function(t){return Object(z.a)(Array(3)).map((function(t,e){return Object(z.a)(Array(3)).map((function(t,n){return Object(z.a)(Array(3)).map((function(t,r){return[e-1,n-1,r-1]}))}))})).flat().flat().filter((function(t){return(1===Math.abs(t[0])?1:0)+(1===Math.abs(t[1])?1:0)+(1===Math.abs(t[2])?1:0)>=2})).map((function(t){return r.newVec3(t[0],t[1]+.5+1,t[2])})).map((function(e){return r.add(e,t)}))},Ee=te("Frame transport",[],[].concat(Object(z.a)(Ae([0,0,5])),Object(z.a)(Ae([0,3,5])),Object(z.a)(Ae([-5,0,5])),Object(z.a)(Ae([5,0,-5])),Object(z.a)(Ae([-5,3,5]))),[].concat(Object(z.a)(Ae([0,0,5])),Object(z.a)(Ae([0,3,5])),Object(z.a)(Ae([-5,0,-5])),Object(z.a)(Ae([5,0,5])),Object(z.a)(Ae([5,3,5])))),Se=function(t,e){return Object(z.a)(Array(e)).map((function(e,n){return r.add(t,[0,n+.5,0])}))},ke=te("Platform",Object(z.a)(function(t){return[].concat(Object(z.a)(function(t,e){return[].concat(Object(z.a)(Se(r.add(t,[1,0,1]),e)),Object(z.a)(Se(r.add(t,[1,0,-1]),e)),Object(z.a)(Se(r.add(t,[-1,0,-1]),e)),Object(z.a)(Se(r.add(t,[-1,0,1]),e)))}(t,4)),Object(z.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(e){return r.add(e,t)}))}(r.add(t,[0,4,0]))))}([0,0,0])),Se([0,0,0],4),Se([0,5,0],4)),Ce=function(t,e){return Object(z.a)(Array(e)).map((function(e,n){return r.add(t,[0,n,0])}))},Ve=function(t){return[[1,.5,1],[1,.5,-1],[-1,.5,1],[-1,.5,-1]].map((function(e){return r.add(e,t)}))},Ie=function(t){return[].concat(Object(z.a)(Ve(t)),Object(z.a)(Ve(r.add(t,[0,1,0]))),Object(z.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(e){return r.add(e,t)}))}(r.add(t,[0,2,0]))))},ze=te("Platforms",[].concat(Object(z.a)(Ie([-6,0,0])),Object(z.a)(Ie([6,0,0]))),Ce([-6,3.5,0],5),Ce([6,3.5,0],5)),Pe=function(t,e){return Object(z.a)(Array(e)).map((function(e,n){return r.add(t,[0,n,0])}))},We=function(t){return[[1,.5,1],[1,.5,-1],[-1,.5,1],[-1,.5,-1]].map((function(e){return r.add(e,t)}))},Fe=function(t){return[].concat(Object(z.a)(We(t)),Object(z.a)(We(r.add(t,[0,1,0]))),Object(z.a)(We(r.add(t,[0,2,0]))),Object(z.a)(We(r.add(t,[0,3,0]))),Object(z.a)(We(r.add(t,[0,4,0]))),Object(z.a)(function(t){return[[0,.5,1],[0,.5,0],[0,.5,-1],[1,.5,1],[1,.5,0],[1,.5,-1],[-1,.5,1],[-1,.5,0],[-1,.5,-1]].map((function(e){return r.add(e,t)}))}(r.add(t,[0,5,0]))))},Te=function(t){return[[0,0,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1],[0,1,0],[0,2,0],[0,3,0]].map((function(e){return r.add(e,t)}))},De=[ie,pe,he,ge,we,xe,Me,Ee,ke,ze,te("Tall platforms",[].concat(Object(z.a)(Fe([-6,0,0])),Object(z.a)(Fe([6,0,0]))),Pe([-6,6.5,0],5),Pe([6,6.5,0],5)),te("Stack",[],Object(z.a)(Object(z.a)(Array(5)).map((function(t,e){return[e,.5,0]}))),Object(z.a)(Object(z.a)(Array(5)).map((function(t,e){return[0,.5+e,0]})))),te("Towers",[],[[2,.5,0],[2,1.5,0],[2,2.5,0],[2,3.5,0],[2,4.5,0],[-2,.5,0],[-2,1.5,0],[-2,2.5,0],[-2,3.5,0],[-2,4.5,0],[2,5.5,0]],[[2,.5,0],[2,1.5,0],[2,2.5,0],[2,3.5,0],[2,4.5,0],[-2,.5,0],[-2,1.5,0],[-2,2.5,0],[-2,3.5,0],[-2,4.5,0],[-2,5.5,0]]),te("Transformer",[],[[0,.5,1],[0,.5,-1],[0,1.5,1],[0,1.5,0],[0,1.5,-1],[1,1.5,1],[1,1.5,0],[1,1.5,-1],[2,1.5,1],[2,1.5,0],[2,1.5,-1],[3,1.5,1],[3,1.5,0],[3,1.5,-1],[3,.5,1],[3,.5,-1]],[[0,.5,1],[0,.5,-1],[0,1.5,.8],[0,3.5,0],[0,1.5,-.8],[0,2.5,.6],[0,4.5,0],[0,2.5,-.6],[0,5.5,1],[0,5.5,0],[0,5.5,-1],[0,4.7,1.6],[0,6.5,0],[0,4.7,-1.6],[0,3.7,2],[0,3.7,-2]]),te("Transport",[],[].concat(Object(z.a)(Te([6,.5,-6])),Object(z.a)(Te([3,.5,-3])),Object(z.a)(Te([0,.5,0])),Object(z.a)(Te([-3,.5,3])),Object(z.a)(Te([-6,.5,6])),[[-6,4.5,6]]),[].concat(Object(z.a)(Te([6,.5,-6])),Object(z.a)(Te([3,.5,-3])),Object(z.a)(Te([0,.5,0])),Object(z.a)(Te([-3,.5,3])),Object(z.a)(Te([-6,.5,6])),[[6,4.5,-6]])),te("Vertical transport",[],[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,.5,0]],[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,12.5,0]]),te("Wall",[[0,.5,1],[0,.5,0],[0,.5,-1],[0,1.5,1],[0,1.5,0],[0,1.5,-1],[0,2.5,1],[0,2.5,0],[0,2.5,-1]],[[2,.5,0]],[[-2,.5,0]])].sort((function(t,e){var n=t.start.bots.length-e.start.bots.length;return 0===n?t.title>e.title?1:-1:n})),Be=function(t){var e=Object(Vt.useState)(void 0),n=Object(u.a)(e,2),a=n[0],i=n[1],c=function(e,n){return Object(Ft.jsxs)(zt.a,{variant:"contained",color:a===n?"primary":"default",onClick:function(){var a=new N.a(123),c=function(t){return[o.clone(t.start),o.clone(t.end)]}(e),s=Object(u.a)(c,2),f=s[0],b=s[1];console.log(f,b);var d=function(){return r.multiplyScalar(r.newVec3(a.next()-.5,a.next()-.5,a.next()-.5),.1)};f.bots.map((function(t){return t.pos=r.add(t.pos,d())})),b.bots.map((function(t){return t.pos=r.add(t.pos,d())})),t.onSelect(f,b),i(n)},children:[e.title," (",e.start.bots.length," bots)"]},n)},s=De.filter((function(t){return!t.start.bots.some((function(t){return t.fixed}))})),f=De.filter((function(t){return t.start.bots.some((function(t){return t.fixed}))}));return Object(Ft.jsxs)(Ft.Fragment,{children:[Object(Ft.jsx)("b",{children:"Select an example"}),Object(Ft.jsx)("br",{}),Object(Ft.jsx)("br",{}),"No obstacles",Object(Ft.jsx)("br",{}),Object(Ft.jsx)("br",{}),s.map(c),Object(Ft.jsx)("br",{}),Object(Ft.jsx)("br",{}),"Obstacles",Object(Ft.jsx)("br",{}),Object(Ft.jsx)("br",{}),f.map((function(t,e){return c(t,e+s.length)}))]})},Ne=function(t){var e=Object(Vt.useState)(0),n=Object(u.a)(e,2),r=n[0],a=n[1],o=Object(Vt.useState)(!0),c=Object(u.a)(o,2),s=c[0],f=c[1],b=Object(Vt.useState)([]),d=Object(u.a)(b,2),l=d[0],v=d[1];return Object(Vt.useEffect)((function(){if(0!==l.length){var e=Math.round(.1*l.length),n=r%(2*(l.length+e));n<e?t.setWorld(l[0]):(n-=e)<l.length?t.setWorld(l[n]):(n-=l.length)<e?t.setWorld(l[l.length-1]):(n-=e,t.setWorld(l[l.length-1-n]))}}),[l,r]),Object(Vt.useEffect)((function(){if(!s){var t=setInterval((function(){return a((function(t){return t+1}))}),1e3/30);return function(){return clearInterval(t)}}}),[s]),Object(Vt.useEffect)((function(){f(!0),void 0!==t.worldStart&&t.setWorld(t.worldStart)}),[t.worldStart]),Object(Ft.jsxs)(At.a,{children:[Object(Ft.jsx)(Et.a,{children:Object(Ft.jsx)(zt.a,{variant:"contained",onClick:function(){if(void 0!==t.worldStart&&void 0!==t.worldEnd){var e=Date.now();v(i.createAnimation(t.worldStart,t.worldStart,t.worldEnd,t.worldEnd,t.config)),console.log((Date.now()-e)/1e3),f(!1)}},children:"Generate animation"})}),Object(Ft.jsxs)(Et.a,{children:[Object(Ft.jsxs)(zt.a,{variant:"contained",onClick:function(){return f(!s)},children:["paused: ",s?"yes":"no"]}),s&&Object(Ft.jsx)(zt.a,{variant:"contained",onClick:function(){return a(r+1)},children:"Step"})]})]})},qe=Object(wt.a)((function(t){return{gridItem:{padding:t.spacing(2),textAlign:"center"}}})),Re=function(){var t=qe(),e=Object(Vt.useState)(void 0),n=Object(u.a)(e,2),c=n[0],f=n[1],b=Object(Vt.useState)(void 0),d=Object(u.a)(b,2),l=d[0],v=d[1],p=Object(Vt.useState)(void 0),h=Object(u.a)(p,2),j=h[0],m=h[1],O=Object(Vt.useState)(void 0),g=Object(u.a)(O,2),w=g[0],x=g[1],y=Object(Vt.useState)(!1),M=Object(u.a)(y,2),A=M[0],E=M[1],S=Object(Vt.useState)({subdivideIterations:10,optimizeIterations:10,contractionType:i.ContractionType.Fibers,contractIterations:10,minimizeAccelerationIterations:40,offset:1.5,slack:2,friction:.1,neighborRadius:2,overlapPenalty:1e3,gravity:1,botMass:1,dt:1}),k=Object(u.a)(S,2),C=k[0],V=k[1],I=void 0===c||void 0===l?[0,0,0]:function(t,e){var n=a.merge(o.boundingBox(t),o.boundingBox(e));return r.multiplyScalar(r.add(n.min,n.max),.5)}(c,l);return Object(Ft.jsx)(Ft.Fragment,{children:Object(Ft.jsxs)(xt.a,{container:!0,item:!0,xs:11,children:[Object(Ft.jsx)(xt.a,{item:!0,xs:4,style:{height:"97vh",overflowX:"hidden",overflowY:"scroll"},children:Object(Ft.jsxs)(xt.a,{container:!0,direction:"column",children:[Object(Ft.jsx)("b",{style:{fontSize:20},children:"Microbots"}),Object(Ft.jsx)(xt.a,{item:!0,className:t.gridItem,children:Object(Ft.jsx)(Be,{onSelect:function(t,e){f(t),v(e),m(t),x(t)}})}),Object(Ft.jsxs)(xt.a,{item:!0,className:t.gridItem,children:[Object(Ft.jsx)("b",{children:"Animation"}),Object(Ft.jsx)("br",{}),Object(Ft.jsx)(yt.a,{control:Object(Ft.jsx)(Mt.a,{checked:A,onChange:function(t){return E(t.target.checked)}}),label:"Dynamic"}),A?Object(Ft.jsx)(Dt,{worldStart:c,worldEnd:l,world:j,worldPrev:w,setWorld:m,setWorldPrev:x,config:C}):Object(Ft.jsx)(Ne,{worldStart:c,worldEnd:l,setWorld:m,config:C})]}),Object(Ft.jsxs)(xt.a,{item:!0,className:t.gridItem,children:[Object(Ft.jsx)("b",{children:"Extra options"}),Object(Ft.jsx)(At.a,{children:Object.entries(C).map((function(t){var e=Object(u.a)(t,2),n=e[0],r=e[1];return Object(Ft.jsx)(Et.a,{children:"contractionType"===n?Object(Ft.jsx)(St.a,{value:r,onChange:function(t){V(Wt()(C,Object(s.a)({},n,{$set:t.target.value})))},children:Object.entries(i.ContractionType).filter((function(t){var e=Object(u.a)(t,1)[0];return isNaN(Number(e))})).map((function(t){var e=Object(u.a)(t,2),n=e[0],r=e[1];return Object(Ft.jsx)(kt.a,{value:r,children:n},n)}))}):Object(Ft.jsx)(Ct.a,{type:"number",label:n,value:r,onChange:function(t){return V(Wt()(C,Object(s.a)({},n,{$set:Math.max(parseFloat(t.target.value),0)})))}})},n)}))})]})]})}),Object(Ft.jsx)(xt.a,{item:!0,xs:5,children:Object(Ft.jsx)(Qt,{worldStart:c,world:j,center:I})})]})})},$e=n(15);n.n($e).a.render(Object(Ft.jsx)(It.a.StrictMode,{children:Object(Ft.jsx)(Re,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.2df387d8.chunk.js.map