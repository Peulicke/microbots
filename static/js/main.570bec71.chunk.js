(this.webpackJsonpmicrobots=this.webpackJsonpmicrobots||[]).push([[0],{61:function(t,n){},66:function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"newBot",(function(){return y})),e.d(r,"setPos",(function(){return M})),e.d(r,"setWeight",(function(){return E})),e.d(r,"setFixed",(function(){return A}));var o={};e.r(o),e.d(o,"newWorld",(function(){return D})),e.d(o,"setBots",(function(){return B})),e.d(o,"initEdges",(function(){return S})),e.d(o,"outerProduct",(function(){return F})),e.d(o,"stiffness",(function(){return $})),e.d(o,"stiffnessDerivative",(function(){return k})),e.d(o,"stiffnessPair",(function(){return z})),e.d(o,"stiffnessPairDerivative",(function(){return C})),e.d(o,"removeFixedFromVector",(function(){return I})),e.d(o,"removeFixedFromMatrix",(function(){return q})),e.d(o,"assembleMatrix",(function(){return T})),e.d(o,"stiffnessMatrix",(function(){return W})),e.d(o,"stiffnessMatrixDerivativeBot",(function(){return J})),e.d(o,"stiffnessMatrixDerivativeEdge",(function(){return N})),e.d(o,"forceMatrix",(function(){return V})),e.d(o,"compliance",(function(){return G})),e.d(o,"complianceDerivative",(function(){return R})),e.d(o,"complianceDerivativeBot",(function(){return U})),e.d(o,"complianceDerivativeEdge",(function(){return X})),e.d(o,"distancePenalty",(function(){return Y})),e.d(o,"distancePenaltyDerivative",(function(){return K})),e.d(o,"distancePenaltyPair",(function(){return L})),e.d(o,"distancePenaltyPairDerivative",(function(){return Q})),e.d(o,"distancePenaltyTotal",(function(){return Z})),e.d(o,"distancePenaltyTotalDerivativeBot",(function(){return _})),e.d(o,"distancePenaltyTotalDerivativeEdge",(function(){return tt})),e.d(o,"objective",(function(){return nt})),e.d(o,"objectiveDerivativeBot",(function(){return et})),e.d(o,"objectiveDerivativeEdge",(function(){return rt})),e.d(o,"optimizeStepBots",(function(){return ot})),e.d(o,"optimizeStepEdges",(function(){return ct})),e.d(o,"resolveCollisionStep",(function(){return it})),e.d(o,"resolveCollision",(function(){return ut})),e.d(o,"optimizeStep",(function(){return ft})),e.d(o,"optimize",(function(){return at}));var c=e(5),i=e(0),u=e.n(i),f=e(15),a=e.n(f),s=e(7),b=e(2),d=e(39),j=e(82),O=e(84),l=e(85),v=e(86),p=e(88),m=e(45),g=e(26),h=e(87),x=e(14),w=e.n(x),y=function(){return{pos:Object(h.f)([0,0,0]),weight:1,fixed:!1}},M=function(t){return function(n){return w()(n,{pos:{$set:t}})}},E=function(t){return function(n){return w()(n,{weight:{$set:t}})}},A=function(t){return function(n){return w()(n,{fixed:{$set:t}})}},P=e(13),D=function(){return{bots:[],edges:Object(h.f)([])}},B=function(t){return function(n){return w()(n,{bots:{$set:t}})}},S=function(t){var n=Object(P.a)(Array(t.bots.length)).map((function(){return 1})),e=n.map((function(t,e){return n.map((function(t,n){return e===n?0:1}))}));return w()(t,{edges:{$set:Object(h.f)(e)}})},F=function(t,n){return Object(h.g)(Object(h.k)(Object(h.f)([t.toArray()])),Object(h.f)([n.toArray()]))},$=function(t){return Object(h.b)(F(t,t),-Object(h.c)(t,t))},k=function(t){return function(n){var e=[0,0,0];e[t]=1;var r=Object(h.k)(Object(h.f)([e])),o=Object(h.g)(r,Object(h.f)([n.toArray()])),c=$(n);return Object(h.b)(Object(h.a)(Object(h.a)(o,Object(h.k)(o)),Object(h.g)(c,2*n.get([t]))),-Object(h.c)(n,n))}},z=function(t,n,e){return Object(h.g)($(Object(h.j)(n.pos,t.pos)),e)},C=function(t){return function(n){return function(e,r,o){if(e!==t&&r!==t)return Object(h.f)([[0,0,0],[0,0,0],[0,0,0]]);var c=Object(h.g)(k(n)(Object(h.j)(r.pos,e.pos)),o);return e===t?Object(h.g)(c,-1):c}}},I=function(t){return function(n){return Object(h.f)(n.toArray().filter((function(n,e){return!t.bots[Math.floor(e/3)].fixed})))}},q=function(t){return function(n){return Object(h.f)(n.toArray().filter((function(n,e){return!t.bots[Math.floor(e/3)].fixed})).map((function(n){return I(t)(Object(h.f)(n)).toArray()})))}},T=function(t,n){var e=3*t.edges.size()[0],r=Object(h.f)(Object(h.l)(e,e));return t.edges.toArray().forEach((function(e,o){e.forEach((function(e,c){if(o!==c){var i=n(t.bots[o],t.bots[c],e),u=Object(h.h)(3*o,3*o+3),f=Object(h.h)(3*c,3*c+3),a=Object(h.d)(u,u),s=Object(h.d)(u,f);r=Object(h.i)(r,a,Object(h.j)(Object(h.i)(r,a),i)),r=Object(h.i)(r,s,Object(h.a)(Object(h.i)(r,s),i))}}))})),q(t)(r)},W=function(t){return T(t,z)},J=function(t){return function(n){return function(e){return T(e,C(t)(n))}}},N=function(t,n){return function(e){var r=Object(P.a)(Array(e.bots.length)).map((function(){return 0})),o=r.map((function(){return r}));o[t][n]=o[n][t]=1;var c=w()(e,{edges:{$set:Object(h.f)(o)}});return W(c)}},V=function(t){return I(t)(Object(h.f)(t.bots.map((function(t){return[0,-t.weight,0]})).flat()))},G=function(t){var n=V(t),e=W(t),r=Object(h.k)(n),o=Object(h.e)(e);return Object(h.g)(Object(h.g)(r,o),n)},H=function(t){return function(n){return Object(h.g)(n,t)}},R=function(t){return function(n){var e=V(n),r=t(n),o=W(n),c=Object(h.k)(e),i=Object(h.e)(o);return-Object(g.a)(c,H(i),H(r),H(i),H(e))}},U=function(t){return function(n){return function(e){return R(J(t)(n))(e)}}},X=function(t,n){return function(e){return R(N(t,n))(e)}},Y=function(t){return Math.pow(Object(h.c)(t,t)-1,2)},K=function(t){return function(n){return 4*(Object(h.c)(n,n)-1)*n.get([t])}},L=function(t,n,e){return Object(h.g)(Y(Object(h.j)(n.pos,t.pos)),e)},Q=function(t){return function(n,e,r){return Object(h.g)(K(t)(Object(h.j)(e.pos,n.pos)),r)}},Z=function(t){var n=0;return t.edges.toArray().forEach((function(e,r){e.forEach((function(e,o){r>=o||(n+=L(t.bots[r],t.bots[o],e))}))})),n},_=function(t){return function(n){return function(e){var r=0;return e.edges.toArray().forEach((function(o,c){o.forEach((function(o,i){e.bots[i]===t&&(r+=Q(n)(e.bots[c],e.bots[i],o))}))})),r}}},tt=function(t,n){return function(e){return L(e.bots[t],e.bots[n],1)}},nt=function(t){return G(t)+Z(t)},et=function(t){return function(n){return function(e){return function(r){return U(n)(e)(r)*(1-t)+_(n)(e)(r)*t}}}},rt=function(t){return function(n,e){return function(r){return X(n,e)(r)*(1-t)+tt(n,e)(r)*t}}},ot=function(t){return function(n){return function(e){var r=e.bots.map((function(r){if(r.fixed)return r;var o=[0,1,2].map((function(t){return et(n)(r)(t)(e)})),c=Object(h.g)(Object(h.f)(o),t),i=Math.sqrt(Object(h.c)(c,c));return i>.3&&(c=Object(h.g)(c,.3/i)),M(Object(h.j)(r.pos,c))(r)}));return B(r)(e)}}},ct=function(t){return function(n){return function(e){for(var r=e.edges.toArray(),o=0;o<e.bots.length;++o)for(var c=0;c<e.bots.length;++c)if(o!==c){var i=rt(n)(o,c)(e);r[o][c]=e.edges.get([o,c])-i*t,r[o][c]=Math.max(r[o][c],.001),r[o][c]=Math.min(r[o][c],1)}return w()(e,{edges:{$set:Object(h.f)(r)}})}}},it=function(t){for(var n=0;n<t.bots.length;++n)for(var e=n+1;e<t.bots.length;++e)if(!t.bots[n].fixed||!t.bots[e].fixed){var r=t.bots[n].fixed||t.bots[e].fixed,o=Object(h.j)(t.bots[e].pos,t.bots[n].pos),c=Math.sqrt(Object(h.c)(o,o));if(!(c>1)){var i=Object(h.g)(Object(h.b)(o,c),(1-c)/(r?1:2));t.bots[n].fixed||(t.bots[n]=w()(t.bots[n],{pos:{$set:Object(h.j)(t.bots[n].pos,i)}})),t.bots[e].fixed||(t.bots[e]=w()(t.bots[e],{pos:{$set:Object(h.a)(t.bots[e].pos,i)}}))}}return t},ut=function(t){for(var n=t,e=0;e<10;++e)n=it(n);return n},ft=function(t){return function(n){return function(e){return Object(g.a)(e,ot(t)(n),ct(t)(n),ut)}}},at=function(t){for(var n=t,e=0;e<100;++e)n=ft(.01)(.5)(n),console.log(n.bots[3].pos.toArray()),console.log(n.edges.toArray());return n},st=e(40),bt=Object(j.a)((function(t){return{gridItem:{padding:t.spacing(2),textAlign:"center"}}})),dt=function(){return r.setPos(Object(h.f)([Math.random(),Math.random(),Math.random()].map((function(t){return 3*t}))))(r.newBot())},jt=[r.setFixed(!0)(r.newBot()),r.setFixed(!0)(r.setPos(Object(h.f)([2,0,0]))(r.newBot())),r.setFixed(!0)(r.setPos(Object(h.f)([0,0,2]))(r.newBot())),dt(),dt(),dt(),dt()],Ot=Object(g.a)(o.newWorld(),o.setBots(jt),o.initEdges),lt=function(){var t=Object(m.a)(),n=Object(s.a)(t,2),e=n[0],r=n[1],u=.55*e,f=.9*r,a=bt(),j=Object(i.useRef)(null),g=Object(i.useState)(),h=Object(s.a)(g,2),x=h[0],w=h[1],y=Object(i.useState)(),M=Object(s.a)(y,2),E=M[0],A=M[1],D=Object(i.useState)(),B=Object(s.a)(D,2),S=B[0],F=B[1],$=Object(i.useState)(),k=Object(s.a)($,2),z=k[0],C=k[1],I=Object(i.useState)(0),q=Object(s.a)(I,2),T=q[0],W=q[1];return Object(i.useEffect)((function(){var t=j.current;if(t){var n=new b.j(75,u/f,.1,1e3);n.position.set(10,10,10),n.lookAt(0,0,0),F(n);var e=new b.r({antialias:!0});e.setClearColor("#000000"),e.setSize(u,f),t.appendChild(e.domElement),C(e);var r=new d.a(n,e.domElement);r.enableDamping=!0,r.dampingFactor=.5,w(r);var o=window.setInterval((function(){return W((function(t){return t+1}))}),1e3/30);return function(){window.clearInterval(o),t.removeChild(e.domElement)}}}),[j,u,f]),Object(i.useEffect)((function(){x&&x.update(),z&&E&&S&&z.render(E,S),Math.random()<.9||(A(Ot.bots.map((function(t){return n=t.pos,function(t){var e=(new b.g).setPosition(Object(st.a)(b.q,Object(P.a)(n.toArray()))).scale(new b.q(.5,.5,.5)),r=new b.m(1,16,16).applyMatrix4(e);r.computeVertexNormals();var o=new b.c(0,1,0);r.faces.forEach((function(t){return t.vertexColors=new Array(3).fill(!0).map((function(){return o}))}));var c=(new b.b).fromGeometry(r);delete c.attributes.uv;var i=new b.h(c,new b.i({color:o}));return i.geometry=c,i.matrixAutoUpdate=!1,i.matrix=e,i.updateMatrix(),t.add(i),t};var n})).reduce((function(t,n){return n(t)}),function(){var t=new b.l;t.add(new b.a(16777215,.4));var n=new b.d(16777215,.4);return n.position.set(0,1,0),t.add(n),t}())),Ot=o.optimizeStep(.1)(.9)(Ot))}),[x,z,E,S,T]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(O.a,{container:!0,item:!0,xs:11,children:[Object(c.jsx)(O.a,{item:!0,xs:4,style:{height:.9*window.innerHeight,overflowX:"hidden",overflowY:"scroll"},children:Object(c.jsx)(O.a,{container:!0,direction:"column",children:Object(c.jsx)(O.a,{item:!0,className:a.gridItem,children:Object(c.jsx)(l.a,{children:Object(c.jsx)(v.a,{children:Object(c.jsx)(p.a,{children:Object(c.jsx)("b",{children:"Microbots"})})})})})})}),Object(c.jsx)(O.a,{item:!0,xs:5,children:Object(c.jsx)("div",{ref:j})})]})})};a.a.render(Object(c.jsx)(u.a.StrictMode,{children:Object(c.jsx)(lt,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.570bec71.chunk.js.map