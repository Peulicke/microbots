(this.webpackJsonpmicrobots=this.webpackJsonpmicrobots||[]).push([[0],{57:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"newVec3",(function(){return A})),n.d(r,"clone",(function(){return E})),n.d(r,"add",(function(){return S})),n.d(r,"addEq",(function(){return V})),n.d(r,"sub",(function(){return k})),n.d(r,"subEq",(function(){return B})),n.d(r,"multiplyScalar",(function(){return C})),n.d(r,"dot",(function(){return I})),n.d(r,"length",(function(){return W})),n.d(r,"dist",(function(){return P})),n.d(r,"normalize",(function(){return D})),n.d(r,"dir",(function(){return q}));var o={};n.r(o),n.d(o,"newBot",(function(){return Q})),n.d(o,"average",(function(){return _})),n.d(o,"interpolate",(function(){return tt}));var a={};n.r(a),n.d(a,"newWorld",(function(){return dt})),n.d(a,"setBots",(function(){return ht})),n.d(a,"setSlack",(function(){return jt})),n.d(a,"setOffset",(function(){return wt})),n.d(a,"edgeStrength",(function(){return gt})),n.d(a,"edgeStrengthGround",(function(){return Ot})),n.d(a,"displacement",(function(){return Et})),n.d(a,"neighbors",(function(){return St})),n.d(a,"gradient",(function(){return Vt})),n.d(a,"connections",(function(){return Bt}));var i={};n.r(i),n.d(i,"createAnimation",(function(){return Dt}));var c=n(4),s=n(0),u=n.n(s),f=n(14),l=n.n(f),p=n(8),b=n(77),d=n(78),h=n(81),v=n(79),m=n(76),j=n(80),w=n(74),g=n(2),O=n(37),y=n(42),x=function(t){var e=Object(y.a)(),n=Object(p.a)(e,2),r=n[0],o=n[1],a=.55*r,i=.9*o,u=Object(s.useRef)(null),f=Object(s.useState)(),l=Object(p.a)(f,2),b=l[0],d=l[1],h=Object(s.useState)(),v=Object(p.a)(h,2),m=v[0],j=v[1],w=Object(s.useState)(),x=Object(p.a)(w,2),M=x[0],A=x[1];return Object(s.useEffect)((function(){var t=u.current;if(t){var e=new g.p(75,a/i,.1,1e3);e.position.set(10,10,10),e.lookAt(0,0,0),j(e);var n=new g.A({antialias:!0});n.setClearColor("#87ceeb"),n.setSize(a,i),n.shadowMapEnabled=!0,n.shadowMapType=g.o,t.appendChild(n.domElement),A(n);var r=new O.a(e,n.domElement);return r.enableDamping=!0,r.dampingFactor=.5,d(r),function(){t.removeChild(n.domElement)}}}),[u,a,i]),Object(s.useEffect)((function(){if(b&&M&&m&&t.scene){var e=window.setInterval((function(){b.update(),M.render(t.scene,m)}),1e3/30);return function(){window.clearInterval(e)}}}),[b,M,m,t.scene]),Object(c.jsx)("div",{ref:u})},M=n(3),A=(n(34),function(t,e,n){return[t,e,n]}),E=function(t){return[t[0],t[1],t[2]]},S=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]},V=function(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]},k=function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},B=function(t,e){t[0]-=e[0],t[1]-=e[1],t[2]-=e[2]},C=function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},I=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},W=function(t){return Math.sqrt(I(t,t))},P=function(t,e){return W(k(t,e))},D=function(t){return C(t,1/W(t))},q=function(t,e){return D(k(t,e))},T=n.p+"static/media/px.c6e24cee.png",N=n.p+"static/media/nx.484e0aff.png",z=n.p+"static/media/py.a67deb40.png",F=n.p+"static/media/ny.6a6662a7.png",G=n.p+"static/media/pz.39034444.png",R=n.p+"static/media/nz.ed736547.png",H=n.p+"static/media/grass.75422b3f.jpg",J=function(){var t=new g.t,e=new g.q(2e3,2e3,8,8),n=(new g.x).load(H);n.wrapS=g.s,n.wrapT=g.s,n.repeat.set(100,100);var r=new g.m({map:n}),o=new g.k(e,r);o.rotateX(-Math.PI/2),o.castShadow=!1,o.receiveShadow=!0,t.add(o),t.add(new g.a(16777215,.4));var a=new g.g(16777215,.4);a.position.set(10,50,10),a.castShadow=!0,a.shadowCameraRight=50,a.shadowCameraLeft=-50,a.shadowCameraTop=50,a.shadowCameraBottom=-50,a.shadowMapWidth=1024,a.shadowMapHeight=1024,t.add(a);var i=[],c=(new g.x).load(T),s=(new g.x).load(N),u=(new g.x).load(z),f=(new g.x).load(F),l=(new g.x).load(G),p=(new g.x).load(R);i.push(new g.l({map:c,fog:!1})),i.push(new g.l({map:s,fog:!1})),i.push(new g.l({map:u,fog:!1})),i.push(new g.l({map:f,fog:!1})),i.push(new g.l({map:l,fog:!1})),i.push(new g.l({map:p,fog:!1}));for(var b=0;b<6;b++)i[b].side=g.b;var d=new g.c(1e3,1e3,1e3),h=new g.k(d,i);return t.add(h),t},L=function(t){var e=Object(s.useState)(J()),n=Object(p.a)(e,2),r=n[0],o=n[1],a=Object(s.useState)([]),i=Object(p.a)(a,2),u=i[0],f=i[1];return Object(s.useEffect)((function(){var e=t.world;void 0!==e&&u.length===e.bots.length&&e.bots.forEach((function(t,e){var n;(n=u[e].position).set.apply(n,Object(M.a)(t.pos))}))}),[t.world,u]),Object(s.useEffect)((function(){var e=t.world;void 0!==e&&u.length!==e.bots.length&&f(e.bots.map((function(t){return function(t,e){var n,r=new g.u(1,16,16);r.computeVertexNormals(),r.faces.forEach((function(t){return t.vertexColors=new Array(3).fill(!0).map((function(){return e}))}));var o=(new g.d).fromGeometry(r);delete o.attributes.uv;var a=new g.k(o,new g.m({color:e}));return a.geometry=o,(n=a.position).set.apply(n,Object(M.a)(t)),a.scale.set(.5,.5,.5),a.castShadow=!0,a.receiveShadow=!0,a}(t.pos,void 0===t.target?new g.e("#0000ff"):new g.e("#fa8072"))})))}),[t.world,u]),Object(s.useEffect)((function(){var t=J();u.forEach((function(e){return t.add(e)})),o(t)}),[u]),Object(c.jsx)(x,{scene:r})},X=function(t,e){for(var n=0;n<3;++n)for(var r=0;r<3;++r)t[n][r]+=e[n][r]},$=function(t,e){for(var n=0;n<3;++n)for(var r=0;r<3;++r)t[n][r]*=e},U=function(t,e){for(var n=[0,0,0],r=0;r<3;++r)for(var o=0;o<3;++o)n[r]+=t[r][o]*e[o];return n},Y=n(15),K=function(t,e){return n=A(t[0]*e[0],t[0]*e[1],t[0]*e[2]),r=A(t[1]*e[0],t[1]*e[1],t[1]*e[2]),o=A(t[2]*e[0],t[2]*e[1],t[2]*e[2]),[n,r,o];var n,r,o},Q=function(t){return{pos:t.pos||A(0,0,0),vel:t.vel||A(0,0,0),target:t.target,weight:t.weight||1}},Z=function(t,e,n){var r,o,a=n.time>e?1:-1;for(o=e;(n.time-o)*a<=0;o+=.01*a)if(void 0!==(r=t.target))return{pos:r,time:o};return n},_=function(t,e,n,r){var o=(n+r)/2,a=Z(t,o,{pos:t.pos,time:n}),i=Z(t,o,{pos:e.pos,time:r});if(i.time-a.time<1e-10)return Q(Object(Y.a)(Object(Y.a)({},t),{},{pos:i.pos}));var c=(i.time-o)/(i.time-a.time),s=(o-a.time)/(i.time-a.time),u=S(C(a.pos,c),C(i.pos,s));return Object(Y.a)(Object(Y.a)({},t),{},{pos:u})},tt=function(t,e,n,r,o,a,i){var c=Z(t,e,{pos:r,time:e-2*n}),s=Z(t,e,{pos:i,time:e+2*n});return s.time-c.time<1e-10?s.pos:(r=c.pos,i=s.pos,c.time>e-n&&(o=c.pos),s.time<e+n&&(a=s.pos),function(t,e,n,r,o){var a=1e-10,i=e.time-t.time,c=o-t.time,s=o-e.time,u=n.time-e.time,f=n.time-o,l=r.time-o,p=i*c+a,b=c*s+a,d=s*u+a,h=u*f+a,v=f*l+a,m=l*(r.time-n.time)+a,j=1/(h*d),w=j+1/Math.pow(b,2)+1/Math.pow(d,2),g=j+1/Math.pow(h,2)+1/Math.pow(v,2),O=-1/(p*b*(w+g)),y=(w+1/(p*b))/(w+g),x=(g+1/(v*m))/(w+g),M=-1/(v*m*(w+g)),A=C(t.pos,O),E=C(e.pos,y),V=C(n.pos,x),k=C(r.pos,M);return S(S(S(A,E),V),k)}({pos:r,time:e-2*n},{pos:o,time:e-n},{pos:a,time:e+n},{pos:i,time:e+2*n},e))},et=function(t,e){for(var n=0;n<t.length;++n)e[n]=t[n]},nt=function(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n},rt=function(t,e,n){for(var r=0;r<t.length;++r)t[r]+=e[r]*n},ot=function(t,e,n){for(var r=0;r<n.length;++r)n[r]=0;for(var o=0;o<t.length;++o)for(var a=0;a<t[o].length;++a){var i=t[o][a][0],c=t[o][a][1];n[o]+=c*e[i],o!==i&&(n[i]+=c*e[o])}},at=function(t,e){for(var n=0;n<e.length;++n)e[n]*=t[Math.floor(n/3)]},it=function(t,e){var n=Array(e.length);et(e,n);var r=function(t,e){for(var n=Array(e.length/3).fill(0),r=0;r<t.length;++r)for(var o=0;o<t[r].length;++o){var a=Object(p.a)(t[r][o],2),i=a[0],c=a[1];Math.floor(r/3)===Math.floor(i/3)&&(n[Math.floor(r/3)]+=c,r!==i&&(n[Math.floor(i/3)]+=c))}for(var s=0;s<n.length;++s)n[s]=Math.sqrt(Math.sqrt(3/n[s]));return n}(t,n);!function(t,e){for(var n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r){var o=e[n][r][0];e[n][r][1]*=t[Math.floor(n/3)],e[n][r][1]*=t[Math.floor(o/3)]}}(r,t),at(r,n);var o=function(t,e){var n=Array(e.length).fill(0),r=Array(e.length);et(e,r);var o=Array(e.length);ot(t,n,o),rt(r,o,-1);var a=Array(r.length),i=Array(a.length);et(r,a);for(var c=nt(r,r),s=0;s<20;++s){ot(t,a,o);var u=c/nt(a,o);rt(n,a,u),rt(r,o,-u);var f=nt(r,r);et(a,i),et(r,a),rt(a,i,f/c),c=f}return n}(t,n);return at(r,o),o},ct=function(t){return((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[1][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*-t[2][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*-t[4][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[3][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[3][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*-t[4][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[1][2]+(t[1][1]*t[3][0]-t[3][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[3][2])*t[0][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[1][3]+((t[1][1]*t[3][0]-t[3][1]*t[1][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[3][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[3][3])-(((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[2][2]+(t[2][1]*t[4][0]-t[4][1]*t[2][0])*-t[3][2]+(t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[4][2])*t[0][3]+((t[3][1]*t[4][0]-t[4][1]*t[3][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[3][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*t[4][2])*-t[2][3]+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*t[3][3]+((t[2][1]*t[3][0]-t[3][1]*t[2][0])*t[0][2]+(t[0][1]*t[3][0]-t[3][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[3][2])*-t[4][3])+(((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[1][2]+(t[1][1]*t[4][0]-t[4][1]*t[1][0])*-t[2][2]+(t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[4][2])*t[0][3]+((t[2][1]*t[4][0]-t[4][1]*t[2][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[2][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*t[4][2])*-t[1][3]+(((t[1][1]*t[4][0]-t[4][1]*t[1][0])*t[0][2]+(t[0][1]*t[4][0]-t[4][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[4][2])*t[2][3]+((t[1][1]*t[2][0]-t[2][1]*t[1][0])*t[0][2]+(t[0][1]*t[2][0]-t[2][1]*t[0][0])*-t[1][2]+(t[0][1]*t[1][0]-t[1][1]*t[0][0])*t[2][2])*-t[4][3])))};function st(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function ut(t,e,n){this.vertices=t,this.cell=e,this.index=n}function ft(t,e){var n=this;this.vertices=t,this.simplices=e,this.interior=e.filter((function(t){return!t.boundary})),this.tuple=Object(M.a)(this.vertices),this.orient=function(){return ct(n.tuple)}}function lt(t,e){this.point=t,this.index=e}function pt(t){var e=t.length;if(0===e)return[];for(var n=new Array(e),r=1,o=0;o<e;++o){for(var a=t[o],i=new Array(4),c=0,s=0;s<3;++s){var u=a[s];i[s]=u,c+=u*u}i[3]=c,n[o]=new lt(i,o),r=Math.max(c,r)}n.sort((function(t,e){for(var n=0;n<5;++n){var r=e.point[n]-t.point[n];if(r)return r}return 0})),e=n.length;for(var f=new Array(e+3+1),l=new Array(e+3+1),p=16*r,b=new Array(4),d=0;d<=3;++d)b[d]=0;b[3]=p,f[0]=b.slice(),l[0]=-1;for(var h=0;h<=3;++h){var v=b.slice();v[h]=1,f[h+1]=v,l[h+1]=-1}for(var m=0;m<e;++m){var j=n[m];f[m+3+1]=j.point,l[m+3+1]=j.index}var w=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var r=t[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var o=t.slice(0,r+1),a=ct(o);if(0===a)throw new Error("Input not in general position");for(var i=new Array(r+1),c=0;c<=r;++c)i[c]=c;a<0&&(i[0]=1,i[1]=0);for(var s=new st(i,new Array(r+1),!1),u=s.adjacent,f=new Array(r+2),l=0;l<=r;++l){for(var p=i.slice(),b=0;b<=r;++b)b===l&&(p[b]=-1);var d=p[0];p[0]=p[1],p[1]=d;var h=new st(p,new Array(r+1),!0);u[l]=h,f[l]=h}f[r+1]=s;for(var v=0;v<=r;++v)for(var m=u[v].vertices,j=u[v].adjacent,w=0;w<=r;++w){var g=m[w];if(g<0)j[w]=s;else for(var O=0;O<=r;++O)u[O].vertices.indexOf(g)<0&&(j[w]=u[O])}for(var y=new ft(o,f),x=!!e,M=r+1;M<n;++M)y.insert(t[M],x);return y.boundary()}(f,!1);w=w.filter((function(t){for(var e=0;e<=3;++e){var n=l[t[e]];if(n<0)return!1;t[e]=n}return!0}));for(var g=0;g<w.length;++g){var O=w[g],y=O[0];O[0]=O[1],O[1]=y}return w}st.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e},ft.prototype.handleBoundaryDegeneracy=function(t,e){var n=this.vertices.length-1,r=this.tuple,o=this.vertices,a=[t];for(t.lastVisited=-n;a.length>0;)for(var i=(t=a.pop()).adjacent,c=0;c<=4;++c){var s=i[c];if(s.boundary&&!(s.lastVisited<=-n)){for(var u=s.vertices,f=0;f<=4;++f){var l=u[f];r[f]=l<0?e:o[l]}var p=this.orient();if(p>0)return s;s.lastVisited=-n,0===p&&a.push(s)}}return null},ft.prototype.walk=function(t,e){var n=this.vertices.length-1,r=this.vertices,o=this.tuple,a=e?this.interior.length*Math.random()|0:this.interior.length-1,i=this.interior[a];t:for(;!i.boundary;){for(var c=i.vertices,s=i.adjacent,u=0;u<=4;++u)o[u]=r[c[u]];i.lastVisited=n;for(var f=0;f<=4;++f){var l=s[f];if(!(l.lastVisited>=n)){var p=o[f];o[f]=t;var b=this.orient();if(o[f]=p,b<0){i=l;continue t}l.boundary?l.lastVisited=-n:l.lastVisited=n}}return}return i},ft.prototype.addPeaks=function(t,e){var n=this.vertices.length-1,r=this.vertices,o=this.tuple,a=this.interior,i=this.simplices,c=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,a.push(e);for(var s=[];c.length>0;){var u=(e=c.pop()).vertices,f=e.adjacent,l=u.indexOf(n);if(!(l<0))for(var p=0;p<=4;++p)if(p!==l){var b=f[p];if(b.boundary&&!(b.lastVisited>=n)){var d=b.vertices;if(b.lastVisited!==-n){for(var h=0,v=0;v<=4;++v)d[v]<0?(h=v,o[v]=t):o[v]=r[d[v]];if(this.orient()>0){d[h]=n,b.boundary=!1,a.push(b),c.push(b),b.lastVisited=n;continue}b.lastVisited=-n}var m=b.adjacent,j=u.slice(),w=f.slice(),g=new st(j,w,!0);i.push(g);var O=m.indexOf(e);if(!(O<0)){m[O]=g,w[l]=b,j[p]=-1,w[p]=e,f[p]=g,g.flip();for(var y=0;y<=4;++y){var x=j[y];if(!(x<0||x===n)){for(var M=new Array(3),A=0,E=0;E<=4;++E){var S=j[E];S<0||E===y||(M[A++]=S)}s.push(new ut(M,g,y))}}}}}}s.sort((function(t,e){return function(t,e){var n=t[0]+t[1],r=e[0]+e[1],o=n+t[2]-(r+e[2]);if(o)return o;var a=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]);return(o=Math.min(a,t[2])-Math.min(i,e[2]))||Math.min(a+t[2],n)-Math.min(i+e[2],r)}(t.vertices,e.vertices)}));for(var V=0;V+1<s.length;V+=2){var k=s[V],B=s[V+1],C=k.index,I=B.index;C<0||I<0||(k.cell.adjacent[k.index]=B.cell,B.cell.adjacent[B.index]=k.cell)}},ft.prototype.insert=function(t,e){var n=this.vertices;n.push(t);var r=this.walk(t,e);if(r){for(var o=this.tuple,a=0;a<=4;++a){var i=r.vertices[a];o[a]=i<0?t:n[i]}var c=this.orient(o);c<0||(0!==c||(r=this.handleBoundaryDegeneracy(r,t)))&&this.addPeaks(t,r)}},ft.prototype.boundary=function(){for(var t=[],e=this.simplices,n=e.length,r=0;r<n;++r){var o=e[r];if(o.boundary){for(var a=new Array(4),i=o.vertices,c=0,s=0,u=0;u<=4;++u)i[u]>=0?a[c++]=i[u]:s=1&u;if(0===s){var f=a[0];a[0]=a[1],a[1]=f}t.push(a)}}return t};for(var bt=n(16),dt=function(){return{bots:[],time:0}},ht=function(t){return function(e){return e.bots=t,e}},vt=1.5,mt=2,jt=function(t){mt=t},wt=function(t){vt=t},gt=function(t){return t<vt-mt/2?1:t>vt+mt/2?0:2*(t+mt-vt)*Math.pow(vt+mt/2-t,2)/Math.pow(mt,3)},Ot=function(t){return gt(t)+1e-4},yt=function(t){var e=W(t);return t=C(t,Math.sqrt(gt(e))/e),K(t,t)},xt=function(t){var e=K(t,t);return $(e,Ot(W(t))/I(t,t)),e},Mt=function(t,e){var n=1e-5,r=e[t],o=E(e);o[t]=r+n;var a=E(e);a[t]=r-n;var i=yt(o);return function(t,e){for(var n=0;n<3;++n)for(var r=0;r<3;++r)t[n][r]-=e[n][r]}(i,yt(a)),$(i,1/2e-5),i},At=function(t,e,n){for(var r=Object(M.a)(Array(3*t.bots.length)).map((function(){return[]})),o=0;o<t.bots.length;++o)for(var a=xt(A(t.bots[o].pos[1]+.5,0,0)),i=xt(A(0,t.bots[o].pos[1]+.5,0)),c=xt(A(0,0,t.bots[o].pos[1]+.5)),s=0;s<3;++s)for(var u=s;u<3;++u)r[3*o+s].push([3*o+u,.1*(a[s][u]+c[s][u])+i[s][u]]);for(var f=function(e){n[e].forEach((function(n){for(var o=function(t,e){var n=k(e.pos,t.pos);return yt(n)}(t.bots[e],t.bots[n]),a=0;a<3;++a)for(var i=0;i<3;++i)r[3*e+a].push([3*n+i,-o[a][i]]),a>i||(r[3*e+a][i-a][1]+=o[a][i],r[3*n+a][i-a][1]+=o[a][i])}))},l=0;l<t.bots.length;++l)f(l);return r},Et=function(t,e,n,r,o,a){var i=function(t,e,n,r){var o=Object(M.a)(Array(3*r.bots.length)).map((function(){return 0}));return r.bots.forEach((function(a,i){for(var c=0;c<3;++c){var s=(r.bots[i].pos[c]-t.bots[i].pos[c])/n,u=((e.bots[i].pos[c]-r.bots[i].pos[c])/n-s)/n;o[3*i+c]=((1===c?-1:0)-u)*a.weight}})),o}(t,e,n,r),c=At(r,0,a);return it(c,i)},St=function(t,e,n){return e[n].filter((function(t){return t!==n})).filter((function(e){return P(t.bots[n].pos,t.bots[e].pos)<2}))},Vt=function(t,e,n,r,o,a,i,c,s,u,f){for(var l=Object(M.a)(Array(s.bots.length)).map((function(){return[0,1,2].map((function(){return 0}))})),p=function(t){for(var n=function(n){var r=Mt(n,A(s.bots[t].pos[1]+.5,0,0));$(r,.1);var o=Mt(n,A(0,s.bots[t].pos[1]+.5,0)),a=Mt(n,A(0,0,s.bots[t].pos[1]+.5));$(a,.1);var i=A(e[3*t],e[3*t+1],e[3*t+2]);X(r,o),X(r,a);var c=I(i,U(r,i));l[t][n]+=c,u[t].forEach((function(r){var o=function(t,e,n){return Mt(e,k(t.pos,n.pos))}(s.bots[t],n,s.bots[r]),a=A(e[3*r],e[3*r+1],e[3*r+2]);B(a,i);var c=U(o,a),u=I(a,c);l[t][n]+=u,l[r][n]-=u}))},r=0;r<3;++r)n(r)},b=0;b<s.bots.length;++b)p(b);for(var d=Object(M.a)(Array(s.bots.length)).map((function(){return A(0,0,0)})),h=0;h<s.bots.length;++h)for(var v=0;v<3;++v)d[h][v]=-l[h][v]+(-t[3*h+v]+2*e[3*h+v]-n[3*h+v])/Math.pow(c,2)*2;for(var m=0;m<s.bots.length;++m)if(!(s.bots[m].pos[1]>.5)){var j=s.bots[m].pos[1]+.5;d[m][1]+=2*(j-2)*2e3}for(var w=function(t){u[t].forEach((function(e){var n=k(s.bots[e].pos,s.bots[t].pos),r=W(n);r>1||(n=C(n,2*(r-2)/r*1e3),B(d[t],n),V(d[e],n))}))},g=0;g<s.bots.length;++g)w(g);for(var O=0;O<s.bots.length;++O){var y=tt(s.bots[O],f,c,r.bots[O].pos,o.bots[O].pos,a.bots[O].pos,i.bots[O].pos),x=k(y,s.bots[O].pos);V(d[O],C(x,-.1))}return d},kt=new bt.a(123),Bt=function(t){return function(t){var e=pt(t),n=t.map((function(){return{}}));return e.map((function(t){for(var e=0;e<4;++e)for(var r=e+1;r<4;++r)n[t[e]][t[r]]=!0,n[t[r]][t[e]]=!0})),n.map((function(t){return Object.keys(t).map((function(t){return Number(t)}))}))}(t.bots.map((function(t){return S(t.pos,C(A(kt.next()-.5,kt.next()-.5,kt.next()-.5),.1))})))},Ct=function(t,e,n){var r=dt();return r.bots=t.bots.map((function(t,r){return function(t,e,n){var r=S(C(t.pos,1-n),C(e.pos,n));return Object(Y.a)(Object(Y.a)({},t),{},{pos:r})}(t,e.bots[r],n)})),r.time=(t.time+e.time)/2,r},It=function(t,e){var n=Math.floor(200/t.length);if(0!==n)for(var r=.2/t.length,o=t.map((function(t){return t.bots.map((function(){return A(0,0,0)}))})),a=t.map((function(t){return Bt(t)})),i=t.map((function(t,e){return t.bots.map((function(n,r){return St(t,a[e],r)}))})),c=function(n){wt(1.5);var c=function(t,e,n,r){for(var o=Object(M.a)(Array(t.length)).map((function(){return Object(M.a)(Array(t[0].bots.length)).map((function(){return A(0,0,0)}))})),a=t.map((function(){return Object(M.a)(Array(3*t[0].bots.length)).map((function(){return 0}))})),i=0;i<t.length;++i){var c=t[Math.max(i-1,0)],s=t[Math.min(i+1,t.length-1)];a[i]=Et(c,s,e,t[i],n[i],r[i])}for(var u=1;u<t.length;++u){var f=t[Math.max(u-2,0)],l=t[u-1],p=t[Math.min(u+1,t.length-1)],b=t[Math.min(u+2,t.length-1)];o[u]=Vt(a[u-1],a[u],a[Math.min(u+1,t.length-1)],f,l,p,b,e,t[u],r[u],u/(t.length-1))}return o}(t,e,a,i);c=c.map((function(t){return t.map((function(t){return C(t,-r/(1e-4+W(t)))}))})),t.map((function(e,n){n<=1||n>=t.length-2||e.bots.map((function(t,e){o[n][e]=S(o[n][e],c[n][e]),o[n][e]=C(o[n][e],.9),t.pos=S(t.pos,o[n][e])}))}))},s=0;s<n;++s)c()},Wt=function(t,e){return W(k(e.pos,t.pos))},Pt=function(t){for(var e=function(e){t.bots.forEach((function(e,n){t.bots.some((function(t,r){if(n===r)return!1;var o=k(e.pos,t.pos),a=A(o[0],0,o[2]),i=I(a,a),c=o[1];return e.pos[1]+.5>t.pos[1]+.5&&10*c>i}))||(e.pos[1]+=.2*(.5-e.pos[1]))}));var n=Bt(t),r=(t.bots.map((function(e,r){return St(t,n,r)})),[]);n.forEach((function(e,n){e.forEach((function(e){n>=e||function(t,e,n,r,o){for(var a=0;a<t.bots.length;++a)if(a!==r&&a!==o){if(Wt(t.bots[r],t.bots[o])>t.bots[r].pos[1]+.5&&Wt(t.bots[r],t.bots[o])>t.bots[o].pos[1]+.5)return!1;if(Wt(t.bots[r],t.bots[o])>Wt(t.bots[r],t.bots[a])&&Wt(t.bots[r],t.bots[o])>Wt(t.bots[a],t.bots[o]))return!1;if(Wt(t.bots[r],t.bots[o])>Wt(t.bots[o],t.bots[a])&&Wt(t.bots[r],t.bots[o])>Wt(t.bots[r],t.bots[a]))return!1}return!0}(t,0,0,n,e)&&r.push([n,e])}))})),r.forEach((function(e){var n=Object(p.a)(e,2),r=n[0],o=n[1],a=k(t.bots[o].pos,t.bots[r].pos),i=W(a);if(!(i<1)){var c=C(a,(1-i)/i/2*.2);B(t.bots[r].pos,c),V(t.bots[o].pos,c)}}))},n=0;n<10;++n)e()},Dt=function(t,e,n,r){for(var o=[t,e,n,r],a=function(t){var e=o.map((function(t,e){return!(e<=1||e>=o.length-1)&&function(t,e,n,r){for(var o=0,a=0;a<e.bots.length;++a){var i=C(k(e.bots[a].pos,t.bots[a].pos),1/r),c=C(k(n.bots[a].pos,e.bots[a].pos),1/r),s=C(k(c,i),1/r);o=Math.max(o,W(s))}return o}(o[e-1],t,o[e+1],1)>.2}));if(!e.some((function(t){return t})))return"break";var n=Object(M.a)(o);o=[o[0]],e.forEach((function(t,e){var r,a;0!==e&&(t&&o.push((r=o[o.length-1],a=n[e],Ct(r,a,.5))),o.push(n[e]))})),console.log(t,o.length);for(var r=2;r<o.length-2;++r)Pt(o[r]);It(o,1),function(t,e){for(var n=0;n<40;++n)for(var r=function(n){t[n].bots.forEach((function(r,o){var a=tt(r,(n-1)/(t.length-3),e,t[n-2].bots[o].pos,t[n-1].bots[o].pos,t[n+1].bots[o].pos,t[n+2].bots[o].pos);r.pos=S(C(r.pos,.5),C(a,.5))}))},o=2;o<t.length-2;++o)r(o)}(o,1),o.map((function(t){return function(t){for(var e=Bt(t),n=0;n<10;++n)t.bots.forEach((function(t){t.pos[1]=Math.max(t.pos[1],.5)})),e.forEach((function(e,n){e.forEach((function(e){if(!(n>=e)){var r=k(t.bots[e].pos,t.bots[n].pos),o=W(r);if(!(o>1)){var a=C(r,(1-o)/o/2);B(t.bots[n].pos,a),V(t.bots[e].pos,a)}}}))}))}(t)}))},i=0;i<10;++i){if("break"===a(i))break}return console.log("done"),o.slice(1,o.length-1)},qt=[r.newVec3(0,0,0)],Tt=0;Tt<10;++Tt){var Nt=Math.PI/2*(Tt/10);qt.push(r.newVec3(qt[Tt][0]+Math.cos(Nt),qt[Tt][1]-Math.sin(Nt),0))}for(var zt=1;zt<11;++zt)qt.push(r.newVec3(-qt[zt][0],qt[zt][1],0));var Ft=Math.min.apply(Math,Object(M.a)(qt.map((function(t){return t[1]}))));qt.forEach((function(t,e){return qt[e][1]=qt[e][1]-Ft+.5}));for(var Gt={title:"Arc",world:{bots:[].concat(Object(M.a)(Object(M.a)(Array(11)).map((function(t,e){return r.newVec3(e,.5,0)}))),Object(M.a)(Object(M.a)(Array(10)).map((function(t,e){return r.newVec3(-e-1,.5,0)})))).map((function(t,e){return o.newBot({pos:t,target:qt[e],weight:1})})),time:0}},Rt=[r.newVec3(0,0,0)],Ht=0;Ht<20;++Ht){var Jt=Math.PI/2*(Ht/20);Rt.push(r.newVec3(Rt[Ht][0]+Math.cos(Jt),Rt[Ht][1]-Math.sin(Jt),0))}for(var Lt=1;Lt<21;++Lt)Rt.push(r.newVec3(-Rt[Lt][0],Rt[Lt][1],0));var Xt=Math.min.apply(Math,Object(M.a)(Rt.map((function(t){return t[1]}))));Rt.forEach((function(t,e){return Rt[e][1]=Rt[e][1]-Xt+.5}));var $t={title:"Big arc",world:{bots:[].concat(Object(M.a)(Object(M.a)(Array(21)).map((function(t,e){return r.newVec3(e+15,.5,0)}))),Object(M.a)(Object(M.a)(Array(20)).map((function(t,e){return r.newVec3(-e-1-15,.5,0)})))).map((function(t,e){return o.newBot({pos:t,target:Rt[e],weight:1})})),time:0}},Ut=Object(M.a)(Array(8)).map((function(t,e){return Object(M.a)(Array(8)).map((function(t,n){return r.newVec3(e-3.5,.5,n-3.5)}))})).flat(),Yt=Object(M.a)(Array(4)).map((function(t,e){return Object(M.a)(Array(4)).map((function(t,n){return Object(M.a)(Array(4)).map((function(t,o){return r.newVec3(e-1.5,o+.5,n-1.5)}))}))})).flat().flat(),Kt={title:"Big cube",world:{bots:Ut.map((function(t,e){return o.newBot({pos:t,target:Yt[e],weight:1})})),time:0}},Qt=[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,2.5,0]],Zt={title:"Crane",world:{bots:[[1,.5,0],[0,.5,0],[-1,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0],[1,3.5,0],[2,3.5,0],[3,3.5,0],[3,.5,0]].map((function(t,e){return o.newBot({pos:t,target:Qt[e],weight:1})})),time:0}},_t=[[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5],[-.5,1.5,-.5],[.5,1.5,-.5],[.5,1.5,.5],[-.5,1.5,.5],[-.5,2.5,-.5],[.5,2.5,-.5],[.5,2.5,.5],[-.5,2.5,.5],[-.5,3.5,-.5],[.5,3.5,-.5],[.5,3.5,.5],[-.5,3.5,.5]],te={title:"Cube",world:{bots:[[-1.5,.5,-1.5],[-.5,.5,-1.5],[.5,.5,-1.5],[1.5,.5,-1.5],[-1.5,.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[1.5,.5,-.5],[-1.5,.5,.5],[-.5,.5,.5],[.5,.5,.5],[1.5,.5,.5],[-1.5,.5,1.5],[-.5,.5,1.5],[.5,.5,1.5],[1.5,.5,1.5]].map((function(t,e){return o.newBot({pos:t,target:_t[e],weight:1})})),time:0}},ee=function(){return Object(M.a)(Array(13)).map((function(t,e){return Object(M.a)(Array(13)).map((function(t,n){return[e-6,.5,n-6]}))})).flat().filter((function(t){return Math.abs(t[0]+t[2])<2}))},ne=[].concat(Object(M.a)(ee()),Object(M.a)(Object(M.a)(Array(3)).map((function(t,e){return[-6,e+1.5,6]}))),Object(M.a)(Object(M.a)(Array(3)).map((function(t,e){return[6,e+1.5,-6]}))),[[-6,4.5,6]]),re=[].concat(Object(M.a)(ee()),Object(M.a)(Object(M.a)(Array(3)).map((function(t,e){return[-6,e+1.5,6]}))),Object(M.a)(Object(M.a)(Array(3)).map((function(t,e){return[6,e+1.5,-6]}))),[[6,4.5,-6]]),oe={title:"Floor transport",world:{bots:ne.map((function(t,e){return o.newBot({pos:t,target:re[e],weight:1})})),time:0}},ae=function(t){return Object(M.a)(Array(3)).map((function(t,e){return Object(M.a)(Array(3)).map((function(t,n){return Object(M.a)(Array(3)).map((function(t,r){return[e-1,n-1,r-1]}))}))})).flat().flat().filter((function(t){return(1===Math.abs(t[0])?1:0)+(1===Math.abs(t[1])?1:0)+(1===Math.abs(t[2])?1:0)>=2})).map((function(t){return r.newVec3(t[0],t[1]+.5+1,t[2])})).map((function(e){return r.add(e,t)}))},ie=[].concat(Object(M.a)(ae([0,0,5])),Object(M.a)(ae([0,3,5])),Object(M.a)(ae([-5,0,5])),Object(M.a)(ae([5,0,-5])),Object(M.a)(ae([-5,3,5]))),ce=[].concat(Object(M.a)(ae([0,0,5])),Object(M.a)(ae([0,3,5])),Object(M.a)(ae([-5,0,-5])),Object(M.a)(ae([5,0,5])),Object(M.a)(ae([5,3,5]))),se={title:"Frame transport",world:{bots:ie.map((function(t,e){return o.newBot({pos:t,target:ce[e],weight:1})})),time:0}},ue={title:"Stack",world:{bots:Object(M.a)(Object(M.a)(Array(5)).map((function(t,e){return o.newBot({pos:[e,.5,0],target:[0,.5+e,0],weight:10})}))),time:0}},fe=[[2,.5,0],[2,1.5,0],[2,2.5,0],[2,3.5,0],[2,4.5,0],[-2,.5,0],[-2,1.5,0],[-2,2.5,0],[-2,3.5,0],[-2,4.5,0],[-2,5.5,0]],le={title:"Towers",world:{bots:[[2,.5,0],[2,1.5,0],[2,2.5,0],[2,3.5,0],[2,4.5,0],[-2,.5,0],[-2,1.5,0],[-2,2.5,0],[-2,3.5,0],[-2,4.5,0],[2,5.5,0]].map((function(t,e){return o.newBot({pos:t,target:fe[e],weight:1})})),time:0}},pe=[[0,.5,1],[0,.5,-1],[0,1.5,.8],[0,3.5,0],[0,1.5,-.8],[0,2.5,.6],[0,4.5,0],[0,2.5,-.6],[0,5.5,1],[0,5.5,0],[0,5.5,-1],[0,4.7,1.6],[0,6.5,0],[0,4.7,-1.6],[0,3.7,2],[0,3.7,-2]],be={title:"Transformer",world:{bots:[[0,.5,1],[0,.5,-1],[0,1.5,1],[0,1.5,0],[0,1.5,-1],[1,1.5,1],[1,1.5,0],[1,1.5,-1],[2,1.5,1],[2,1.5,0],[2,1.5,-1],[3,1.5,1],[3,1.5,0],[3,1.5,-1],[3,.5,1],[3,.5,-1]].map((function(t,e){return o.newBot({pos:t,target:pe[e],weight:1})})),time:0}},de=function(t){return[[0,0,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1],[0,1,0],[0,2,0],[0,3,0]].map((function(e){return r.add(e,t)}))},he=[].concat(Object(M.a)(de([6,.5,-6])),Object(M.a)(de([3,.5,-3])),Object(M.a)(de([0,.5,0])),Object(M.a)(de([-3,.5,3])),Object(M.a)(de([-6,.5,6])),[[-6,4.5,6]]),ve=[].concat(Object(M.a)(de([6,.5,-6])),Object(M.a)(de([3,.5,-3])),Object(M.a)(de([0,.5,0])),Object(M.a)(de([-3,.5,3])),Object(M.a)(de([-6,.5,6])),[[6,4.5,-6]]),me={bots:he.map((function(t,e){return o.newBot({pos:t,target:ve[e],weight:1})})),time:0},je=[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,12.5,0]],we=[Gt,$t,Kt,Zt,te,oe,se,ue,le,be,{title:"Transport",world:me},{title:"Vertical transport",world:{bots:[[-3,.5,0],[-3,1.5,0],[-3,2.5,0],[-2,2.5,0],[-1,2.5,0],[-3,3.5,0],[-3,4.5,0],[-3,5.5,0],[-3,6.5,0],[-2,6.5,0],[-1,6.5,0],[-3,7.5,0],[-3,8.5,0],[-3,9.5,0],[-3,10.5,0],[-2,10.5,0],[-1,10.5,0],[3,.5,0],[3,1.5,0],[3,2.5,0],[3,3.5,0],[3,4.5,0],[2,4.5,0],[1,4.5,0],[3,5.5,0],[3,6.5,0],[3,7.5,0],[3,8.5,0],[2,8.5,0],[1,8.5,0],[3,9.5,0],[3,10.5,0],[3,11.5,0],[3,12.5,0],[3,13.5,0],[2,13.5,0],[1,13.5,0],[0,13.5,0],[-1,13.5,0],[-2,13.5,0],[-3,13.5,0],[-3,12.5,0],[-3,11.5,0],[0,.5,0]].map((function(t,e){return o.newBot({pos:t,target:je[e],weight:1})})),time:0}}].sort((function(t,e){var n=t.world.bots.length-e.world.bots.length;return 0===n?t.title>e.title?1:-1:n})),ge=function(t){var e=Object(s.useState)(void 0),n=Object(p.a)(e,2),o=n[0],i=n[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("b",{children:"Select an example"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),we.map((function(e,n){return Object(c.jsxs)(w.a,{variant:"contained",color:o===n?"primary":"default",onClick:function(){var e,o=new bt.a(123),c=[we[e=n].world,a.setBots(we[e].world.bots.map((function(t){return{pos:t.target||t.pos,vel:t.vel,target:t.target,weight:t.weight}})))(a.newWorld())],s=Object(p.a)(c,2),u=s[0],f=s[1];console.log(u,f);var l=function(){return r.multiplyScalar(r.newVec3(o.next()-.5,o.next()-.5,o.next()-.5),.1)};u.bots.map((function(t){return t.pos=r.add(t.pos,l())})),f.bots.map((function(t){return t.pos=r.add(t.pos,l())})),t.onSelect(u,f),i(n)},children:[e.title," (",e.world.bots.length," bots)"]},n)}))]})},Oe=function(t){var e=Object(s.useState)(0),n=Object(p.a)(e,2),r=n[0],o=n[1],a=Object(s.useState)(!0),u=Object(p.a)(a,2),f=u[0],l=u[1],b=Object(s.useState)([]),d=Object(p.a)(b,2),h=d[0],v=d[1];return Object(s.useEffect)((function(){if(0!==h.length){var e=Math.round(.1*h.length),n=r%(2*(h.length+e));n<e?t.setWorld(h[0]):(n-=e)<h.length?t.setWorld(h[n]):(n-=h.length)<e?t.setWorld(h[h.length-1]):(n-=e,t.setWorld(h[h.length-1-n]))}}),[h,r]),Object(s.useEffect)((function(){if(!f){var t=setInterval((function(){return o((function(t){return t+1}))}),1e3/30);return function(){return clearInterval(t)}}}),[f]),Object(c.jsxs)(m.a,{children:[Object(c.jsx)(j.a,{children:Object(c.jsx)(w.a,{variant:"contained",onClick:function(){if(void 0!==t.worldStart&&void 0!==t.worldEnd){var e=Date.now();v(i.createAnimation(t.worldStart,t.worldStart,t.worldEnd,t.worldEnd)),console.log((Date.now()-e)/1e3),l(!1)}},children:"Generate animation"})}),Object(c.jsxs)(j.a,{children:[Object(c.jsxs)(w.a,{variant:"contained",onClick:function(){return l(!f)},children:["paused: ",f?"yes":"no"]}),f&&Object(c.jsx)(w.a,{variant:"contained",onClick:function(){return o(r+1)},children:"Step"})]})]})},ye=n(35),xe=n.n(ye),Me=new bt.a(123),Ae=function(t){var e=Object(s.useState)(!0),n=Object(p.a)(e,2),o=n[0],a=n[1],u=Object(s.useState)([]),f=Object(p.a)(u,2),l=f[0],b=f[1],d=function(){if(void 0!==t.world&&void 0!==t.worldPrev&&void 0!==t.worldEnd)if(0===l.length||t.world.bots.map((function(t,e){return r.sub(t.pos,l[0].bots[e].pos)})).map((function(t){return r.dot(t,t)})).reduce((function(t,e){return t+e}),0)>1e-5)b(i.createAnimation(t.worldPrev,t.world,t.worldEnd,t.worldEnd));else{var e=l;e.length>1&&(e=e.slice(1)),t.setWorldPrev(t.world),t.setWorld(e[0]),b(e)}};return Object(s.useEffect)((function(){if(!o){var t=setInterval(d,1e3/30);return function(){return clearInterval(t)}}}),[t,o,l]),Object(c.jsxs)(m.a,{children:[Object(c.jsx)(j.a,{children:Object(c.jsxs)(w.a,{variant:"contained",onClick:function(){a(!o)},children:["paused: ",o?"yes":"no"]})}),Object(c.jsx)(j.a,{children:Object(c.jsx)(w.a,{variant:"contained",onClick:function(){void 0!==t.world&&t.setWorld(xe()(t.world,{bots:{$set:t.world.bots.map((function(t){return xe()(t,{pos:{$set:r.add(t.pos,r.multiplyScalar(r.newVec3(Me.next()-.5,Me.next()-.5,Me.next()-.5),2))}})}))}}))},children:"Disturb"})})]})},Ee=Object(b.a)((function(t){return{gridItem:{padding:t.spacing(2),textAlign:"center"}}})),Se=function(){var t=Ee(),e=Object(s.useState)(void 0),n=Object(p.a)(e,2),r=n[0],o=n[1],a=Object(s.useState)(void 0),i=Object(p.a)(a,2),u=i[0],f=i[1],l=Object(s.useState)(void 0),b=Object(p.a)(l,2),g=b[0],O=b[1],y=Object(s.useState)(void 0),x=Object(p.a)(y,2),M=x[0],A=x[1],E=Object(s.useState)(!1),S=Object(p.a)(E,2),V=S[0],k=S[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(d.a,{container:!0,item:!0,xs:11,children:[Object(c.jsx)(d.a,{item:!0,xs:4,style:{height:.9*window.innerHeight,overflowX:"hidden",overflowY:"scroll"},children:Object(c.jsxs)(d.a,{container:!0,direction:"column",children:[Object(c.jsx)("b",{style:{fontSize:20},children:"Microbots"}),Object(c.jsx)(d.a,{item:!0,className:t.gridItem,children:Object(c.jsx)(ge,{onSelect:function(t,e){o(t),f(e),O(t),A(t)}})}),Object(c.jsxs)(d.a,{item:!0,className:t.gridItem,children:[Object(c.jsx)("b",{children:"Animation"}),Object(c.jsx)("br",{}),Object(c.jsx)(h.a,{control:Object(c.jsx)(v.a,{checked:V,onChange:function(t){return k(t.target.checked)}}),label:"Dynamic"}),V?Object(c.jsx)(Ae,{worldEnd:u,world:g,worldPrev:M,setWorld:O,setWorldPrev:A}):Object(c.jsx)(Oe,{worldStart:r,worldEnd:u,setWorld:O})]}),Object(c.jsxs)(d.a,{item:!0,className:t.gridItem,children:[Object(c.jsx)("b",{children:"Extra options"}),Object(c.jsx)(m.a,{children:Object(c.jsx)(j.a,{children:Object(c.jsx)(w.a,{variant:"contained",onClick:function(){return function(){var t=document.getElementsByTagName("canvas")[0].toDataURL("image/png"),e=document.createElement("a");e.href=t.replace(/^data:image\/[^;]/,"data:application/octet-stream"),e.download="image.png",e.click()}()},children:"Save screenshot"})})})]})]})}),Object(c.jsx)(d.a,{item:!0,xs:5,children:Object(c.jsx)(L,{world:g})})]})})};l.a.render(Object(c.jsx)(u.a.StrictMode,{children:Object(c.jsx)(Se,{})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.1e104f8f.chunk.js.map